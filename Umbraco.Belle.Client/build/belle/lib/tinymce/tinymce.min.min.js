// 4.0b2 (2013-04-24)
(function(e,t){"use strict";function n(e,t){for(var n,r=[],i=0;e.length>i;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;r.length>i;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;n.length>r;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;o.length-1>a;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="tinymce/dom/EventUtils",f="tinymce/dom/Sizzle",l="tinymce/dom/DomQuery",c="tinymce/html/Styles",h="tinymce/dom/TreeWalker",p="tinymce/util/Tools",d="tinymce/dom/Range",v="tinymce/html/Entities",m="tinymce/Env",g="tinymce/dom/DOMUtils",y="tinymce/dom/ScriptLoader",b="tinymce/AddOnManager",w="tinymce/html/Node",E="tinymce/html/Schema",S="tinymce/html/SaxParser",x="tinymce/html/DomParser",T="tinymce/html/Writer",N="tinymce/html/Serializer",C="tinymce/dom/Serializer",k="tinymce/dom/TridentSelection",L="tinymce/util/VK",A="tinymce/dom/ControlSelection",O="tinymce/dom/Selection",M="tinymce/dom/RangeUtils",_="tinymce/Formatter",D="tinymce/UndoManager",P="tinymce/EnterKey",H="tinymce/ForceBlocks",B="tinymce/EditorCommands",j="tinymce/util/URI",F="tinymce/util/Class",I="tinymce/ui/Selector",q="tinymce/ui/Collection",R="tinymce/ui/DomUtils",U="tinymce/ui/Control",z="tinymce/ui/Factory",W="tinymce/ui/Container",X="tinymce/ui/DragHelper",V="tinymce/ui/Scrollable",$="tinymce/ui/Panel",J="tinymce/ui/Movable",K="tinymce/ui/Resizable",Q="tinymce/ui/FloatPanel",G="tinymce/ui/KeyboardNavigation",Y="tinymce/ui/Window",Z="tinymce/ui/MessageBox",et="tinymce/WindowManager",tt="tinymce/util/Quirks",nt="tinymce/util/Observable",rt="tinymce/Shortcuts",it="tinymce/Editor",st="tinymce/util/I18n",ot="tinymce/FocusManager",ut="tinymce/EditorManager",at="tinymce/LegacyInput",ft="tinymce/util/XHR",lt="tinymce/util/JSON",ct="tinymce/util/JSONRequest",ht="tinymce/util/JSONP",pt="tinymce/util/LocalStorage",dt="tinymce/Compat",vt="tinymce/ui/Layout",mt="tinymce/ui/AbsoluteLayout",gt="tinymce/ui/Tooltip",yt="tinymce/ui/Widget",bt="tinymce/ui/Button",wt="tinymce/ui/ButtonGroup",Et="tinymce/ui/Checkbox",St="tinymce/ui/CheckboxGroup",xt="tinymce/ui/PanelButton",Tt="tinymce/ui/ColorButton",Nt="tinymce/ui/ComboBox",Ct="tinymce/ui/Path",kt="tinymce/ui/ElementPath",Lt="tinymce/ui/FormItem",At="tinymce/ui/Form",Ot="tinymce/ui/FieldSet",Mt="tinymce/ui/FilePicker",_t="tinymce/ui/FitLayout",Dt="tinymce/ui/FlexLayout",Pt="tinymce/ui/FlowLayout",Ht="tinymce/ui/FormatControls",Bt="tinymce/ui/GridLayout",jt="tinymce/ui/Iframe",Ft="tinymce/ui/Label",It="tinymce/ui/Toolbar",qt="tinymce/ui/MenuBar",Rt="tinymce/ui/MenuButton",Ut="tinymce/ui/ListBox",zt="tinymce/ui/MenuItem",Wt="tinymce/ui/Menu",Xt="tinymce/ui/Radio",Vt="tinymce/ui/RadioGroup",$t="tinymce/ui/ResizeHandle",Jt="tinymce/ui/Spacer",Kt="tinymce/ui/SplitButton",Qt="tinymce/ui/StackLayout",Gt="tinymce/ui/TabPanel",Yt="tinymce/ui/TextBox",Zt="tinymce/ui/Throbber";r(a,[],function(){function e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function n(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){function n(){return!1}function r(){return!0}var i,s=t||{};for(i in e)"layerX"!==i&&"layerY"!==i&&(s[i]=e[i]);return s.target||(s.target=s.srcElement||document),s.preventDefault=function(){s.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=r,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=n,s.isPropagationStopped=n,s.isImmediatePropagationStopped=n),s}function i(r,i,s){function o(){s.domLoaded||(s.domLoaded=!0,i(l))}function u(){"complete"===f.readyState&&(n(f,"readystatechange",u),o())}function a(){try{f.documentElement.doScroll("left")}catch(e){return setTimeout(a,0),t}o()}var f=r.document,l={type:"ready"};return s.domLoaded?(i(l),t):(f.addEventListener?e(r,"DOMContentLoaded",o):(e(f,"readystatechange",u),f.documentElement.doScroll&&r===r.top&&a()),e(r,"load",o),t)}function s(){function t(e,t){var n,r,i,s;if(n=u[t][e.type])for(r=0,i=n.length;i>r;r++)if(s=n[r],s&&s.func.call(s.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var s=this,u={},a,f,l,c,h;f=o+(+(new Date)).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,h={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,s.domLoaded=!1,s.events=u,s.bind=function(n,o,p,d){function v(e){t(r(e||x.event),m)}var m,g,y,b,w,E,S,x=window;if(n&&3!==n.nodeType&&8!==n.nodeType){for(n[f]?m=n[f]:(m=a++,n[f]=m,u[m]={}),d=d||n,o=o.split(" "),y=o.length;y--;)b=o[y],E=v,w=S=!1,"DOMContentLoaded"===b&&(b="ready"),s.domLoaded&&"ready"===b&&"complete"==n.readyState?p.call(d,r({type:b})):(c||(w=h[b],w&&(E=function(e){var n,i;if(n=e.currentTarget,i=e.relatedTarget,i&&n.contains)i=n.contains(i);else for(;i&&i!==n;)i=i.parentNode;i||(e=r(e||x.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=n,t(e,m))})),l||"focusin"!==b&&"focusout"!==b||(S=!0,w="focusin"===b?"focus":"blur",E=function(e){e=r(e||x.event),e.type="focus"===e.type?"focusin":"focusout",t(e,m)}),g=u[m][b],g?"ready"===b&&s.domLoaded?p({type:b}):g.push({func:p,scope:d}):(u[m][b]=g=[{func:p,scope:d}],g.fakeName=w,g.capture=S,g.nativeHandler=E,"ready"===b?i(n,E,s):e(n,w||b,E,S)));return n=g=0,p}},s.unbind=function(e,t,r){var i,o,a,l,c,h;if(!e||3===e.nodeType||8===e.nodeType)return s;if(i=e[f]){if(h=u[i],t){for(t=t.split(" "),a=t.length;a--;)if(c=t[a],o=h[c]){if(r)for(l=o.length;l--;)o[l].func===r&&o.splice(l,1);r&&0!==o.length||(delete h[c],n(e,o.fakeName||c,o.nativeHandler,o.capture))}}else{for(c in h)o=h[c],n(e,o.fakeName||c,o.nativeHandler,o.capture);h={}}for(c in h)return s;delete u[i];try{delete e[f]}catch(p){e[f]=null}}return s},s.fire=function(e,n,i){var o;if(!e||3===e.nodeType||8===e.nodeType)return s;i=r(null,i),i.type=n,i.target=e;do o=e[f],o&&t(i,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!i.isPropagationStopped());return s},s.clean=function(e){var t,n,r=s.unbind;if(!e||3===e.nodeType||8===e.nodeType)return s;if(e[f]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[f]&&r(e);return s},s.destory=function(){u={}},s.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var o="mce-data-";return s.Event=new s,s.Event.bind(window,"ready",function(){}),s}),r(f,[],function(){function e(e){return mt.test(e+"")}function n(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>T.cacheLength&&delete e[t.shift()],e[n]=r,r}}function i(e){return e[I]=!0,e}function s(e){var t=_.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t=null}}function o(e,t,n,r){var i,s,o,u,a,f,l,p,d,v;if((t?t.ownerDocument||t:q)!==_&&M(t),t=t||_,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(P&&!r){if(i=gt.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&F(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return et.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&R.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(o)),n}if(R.qsa&&!H.test(e)){if(l=!0,p=I,d=t,v=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(f=c(e),(l=t.getAttribute("id"))?p=l.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",a=f.length;a--;)f[a]=p+h(f[a]);d=vt.test(e)&&t.parentNode||t,v=f.join(",")}if(v)try{return et.apply(n,d.querySelectorAll(v)),n}catch(m){}finally{l||t.removeAttribute("id")}}}return w(e.replace(ft,"$1"),t,n,r)}function u(e,t){var n=t&&e,r=n&&(~t.sourceIndex||Q)-(~e.sourceIndex||Q);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function f(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function c(e,t){var n,r,i,s,u,a,f,l=X[e+" "];if(l)return t?0:l.slice(0);for(u=e,a=[],f=T.preFilter;u;){(!n||(r=lt.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=ct.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ft," ")}),u=u.slice(n.length));for(s in T.filter)!(r=dt[s].exec(u))||f[s]&&!(r=f[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?o.error(e):X(e,a).slice(0)}function h(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=z++;return t.first?function(t,n,s){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f,l=U+" "+s;if(o){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(f=t[I]||(t[I]={}),(a=f[r])&&a[0]===l){if((u=a[1])===!0||u===x)return u===!0}else if(a=f[r]=[l],a[1]=e(t,n,o)||x,a[1]===!0)return!0}}function d(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function m(e,t,n,r,s,o){return r&&!r[I]&&(r=m(r)),s&&!s[I]&&(s=m(s,o)),i(function(i,o,u,a){var f,l,c,h=[],p=[],d=o.length,m=i||b(t||"*",u.nodeType?[u]:u,[]),g=!e||!i&&t?m:v(m,h,e,u,a),y=n?s||(i?e:d||r)?[]:o:g;if(n&&n(g,y,u,a),r)for(f=v(y,p),r(f,[],u,a),l=f.length;l--;)(c=f[l])&&(y[p[l]]=!(g[p[l]]=c));if(i){if(s||e){if(s){for(f=[],l=y.length;l--;)(c=y[l])&&f.push(g[l]=c);s(null,y=[],f,a)}for(l=y.length;l--;)(c=y[l])&&(f=s?nt.call(i,c):h[l])>-1&&(i[f]=!(o[f]=c))}}else y=v(y===o?y.splice(d,y.length):y),s?s(null,o,y,a):et.apply(o,y)})}function g(e){for(var t,n,r,i=e.length,s=T.relative[e[0].type],o=s||T.relative[" "],u=s?1:0,a=p(function(e){return e===t},o,!0),f=p(function(e){return nt.call(t,e)>-1},o,!0),l=[function(e,n,r){return!s&&(r||n!==L)||((t=n).nodeType?a(e,n,r):f(e,n,r))}];i>u;u++)if(n=T.relative[e[u].type])l=[p(d(l),n)];else{if(n=T.filter[e[u].type].apply(null,e[u].matches),n[I]){for(r=++u;i>r&&!T.relative[e[r].type];r++);return m(u>1&&d(l),u>1&&h(e.slice(0,u-1)).replace(ft,"$1"),n,r>u&&g(e.slice(u,r)),i>r&&g(e=e.slice(r)),i>r&&h(e))}l.push(n)}return d(l)}function y(e,t){var n=0,r=t.length>0,s=e.length>0,u=function(i,u,a,f,l){var c,h,p,d=[],m=0,g="0",y=i&&[],b=null!=l,w=L,E=i||s&&T.find.TAG("*",l&&u.parentNode||u),S=U+=null==w?1:Math.random()||.1;for(b&&(L=u!==_&&u,x=n);null!=(c=E[g]);g++){if(s&&c){for(h=0;p=e[h++];)if(p(c,u,a)){f.push(c);break}b&&(U=S,x=++n)}r&&((c=!p&&c)&&m--,i&&y.push(c))}if(m+=g,r&&g!==m){for(h=0;p=t[h++];)p(y,d,u,a);if(i){if(m>0)for(;g--;)y[g]||d[g]||(d[g]=Y.call(f));d=v(d)}et.apply(f,d),b&&!i&&d.length>0&&m+t.length>1&&o.uniqueSort(f)}return b&&(U=S,L=w),y};return r?i(u):u}function b(e,t,n){for(var r=0,i=t.length;i>r;r++)o(e,t[r],n);return n}function w(e,t,n,r){var i,s,o,u,a,f=c(e);if(!r&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&P&&T.relative[s[1].type]){if(t=(T.find.ID(o.matches[0].replace(St,xt),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}for(i=dt.needsContext.test(e)?0:s.length;i--&&(o=s[i],!T.relative[u=o.type]);)if((a=T.find[u])&&(r=a(o.matches[0].replace(St,xt),vt.test(s[0].type)&&t.parentNode||t))){if(s.splice(i,1),e=r.length&&h(s),!e)return et.apply(n,r),n;break}}return k(e,f)(r,t,!P,n,vt.test(e)),n}function E(){}var S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I="sizzle"+ -(new Date),q=window.document,R={},U=0,z=0,W=n(),X=n(),V=n(),$=!1,J=function(){return 0},K=typeof t,Q=1<<31,G=[],Y=G.pop,Z=G.push,et=G.push,tt=G.slice,nt=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=it.replace("w","w#"),ot="([*^$|!~]?=)",ut="\\["+rt+"*("+it+")"+rt+"*(?:"+ot+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+rt+"*\\]",at=":("+it+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ut.replace(3,8)+")*)|.*)\\)|)",ft=RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),lt=RegExp("^"+rt+"*,"+rt+"*"),ct=RegExp("^"+rt+"*([\\x20\\t\\r\\n\\f>+~])"+rt+"*"),ht=RegExp(at),pt=RegExp("^"+st+"$"),dt={ID:RegExp("^#("+it+")"),CLASS:RegExp("^\\.("+it+")"),NAME:RegExp("^\\[name=['\"]?("+it+")['\"]?\\]"),TAG:RegExp("^("+it.replace("w","w*")+")"),ATTR:RegExp("^"+ut),PSEUDO:RegExp("^"+at),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),needsContext:RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},vt=/[\x20\t\r\n\f]*[+~]/,mt=/^[^{]+\{\s*\[native code/,gt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,yt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,wt=/'|\\/g,Et=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,St=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,xt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{et.apply(G=tt.call(q.childNodes),q.childNodes),G[q.childNodes.length].nodeType}catch(Tt){et={apply:G.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}C=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=o.setDocument=function(n){var r=n?n.ownerDocument||n:q;return r!==_&&9===r.nodeType&&r.documentElement?(_=r,D=r.documentElement,P=!C(r),R.getElementsByTagName=s(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),R.attributes=s(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),R.getElementsByClassName=s(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),R.getByName=s(function(e){e.id=I+0,e.appendChild(_.createElement("a")).setAttribute("name",I),e.appendChild(_.createElement("i")).setAttribute("name",I),D.appendChild(e);var t=r.getElementsByName&&r.getElementsByName(I).length===2+r.getElementsByName(I+0).length;return D.removeChild(e),t}),R.sortDetached=s(function(e){return e.compareDocumentPosition&&1&e.compareDocumentPosition(_.createElement("div"))}),T.attrHandle=s(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==K&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},R.getByName?(T.find.ID=function(e,t){if(typeof t.getElementById!==K&&P){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(St,xt);return function(e){return e.getAttribute("id")===t}}):(T.find.ID=function(e,n){if(typeof n.getElementById!==K&&P){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==K&&r.getAttributeNode("id").value===e?[r]:t:[]}},T.filter.ID=function(e){var t=e.replace(St,xt);return function(e){var n=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=R.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==K?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[i++];)1===n.nodeType&&r.push(n);return r}return s},T.find.NAME=R.getByName&&function(e,n){return typeof n.getElementsByName!==K?n.getElementsByName(name):t},T.find.CLASS=R.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==K&&P?n.getElementsByClassName(e):t},B=[],H=[":focus"],(R.qsa=e(r.querySelectorAll))&&(s(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||H.push("\\["+rt+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||H.push(":checked")}),s(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&H.push("[*^$]="+rt+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(R.matchesSelector=e(j=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&s(function(e){R.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),B.push("!=",at)}),H=RegExp(H.join("|")),B=B.length&&RegExp(B.join("|")),F=e(D.contains)||D.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},J=D.compareDocumentPosition?function(e,t){if(e===t)return $=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||A&&t.compareDocumentPosition(e)===n?e===r||F(q,e)?-1:t===r||F(q,t)?1:O?nt.call(O,e)-nt.call(O,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,s=e.parentNode,o=t.parentNode,a=[e],f=[t];if(e===t)return $=!0,0;if(!s||!o)return e===r?-1:t===r?1:s?-1:o?1:0;if(s===o)return u(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)f.unshift(n);for(;a[i]===f[i];)i++;return i?u(a[i],f[i]):a[i]===q?-1:f[i]===q?1:0},_):_},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_&&M(e),t=t.replace(Et,"='$1']"),R.matchesSelector&&P&&(!B||!B.test(t))&&!H.test(t))try{var n=j.call(e,t);if(n||R.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return o(t,_,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!==_&&M(e),F(e,t)},o.attr=function(e,t){var n;return(e.ownerDocument||e)!==_&&M(e),P&&(t=t.toLowerCase()),(n=T.attrHandle[t])?n(e):!P||R.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},o.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,n=[],r=0,i=0;if($=!R.detectDuplicates,A=!R.sortDetached,O=!R.sortStable&&e.slice(0),e.sort(J),$){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},N=o.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=N(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=N(t);return n},T=o.selectors={cacheLength:50,createPseudo:i,match:dt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(St,xt),e[3]=(e[4]||e[5]||"").replace(St,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return dt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ht.test(n)&&(t=c(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(St,xt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[e+" "];return t||(t=RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=o.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){for(;v;){for(c=t;c=c[v];)if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){for(l=m[I]||(m[I]={}),f=l[e]||[],p=f[0]===U&&f[1],h=f[0]===U&&f[2],c=p&&m.childNodes[p];c=++p&&c&&c[v]||(h=p=0)||d.pop();)if(1===c.nodeType&&++h&&c===t){l[e]=[U,p,h];break}}else if(y&&(f=(t[I]||(t[I]={}))[e])&&f[0]===U)h=f[1];else for(;(c=++p&&c&&c[v]||(h=p=0)||d.pop())&&((u?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++h||(y&&((c[I]||(c[I]={}))[e]=[U,h]),c!==t)););return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=T.pseudos[e]||T.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return r[I]?r(t):r.length>1?(n=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,s=r(e,t),o=s.length;o--;)i=nt.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(ft,"$1"));return r[I]?i(function(e,t,n,i){for(var s,o=r(e,null,i,[]),u=e.length;u--;)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:i(function(e){return function(t){return o(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||N(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(St,xt).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===D},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return yt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}};for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[S]=a(S);for(S in{submit:!0,reset:!0})T.pseudos[S]=f(S);return k=o.compile=function(e,t){var n,r=[],i=[],s=V[e+" "];if(!s){for(t||(t=c(e)),n=t.length;n--;)s=g(t[n]),s[I]?r.push(s):i.push(s);s=V(e,y(i,r))}return s},T.pseudos.nth=T.pseudos.eq,E.prototype=T.filters=T.pseudos,T.setFilters=new E,R.sortStable=I.split("").sort(J).join("")===I,M(),[0,0].sort(J),R.detectDuplicates=$,"function"==typeof r&&r.amd?r(function(){return o}):window.Sizzle=o,o}),r(l,[a,f],function(e,n){function r(e){return e!==t}function i(e){return"string"==typeof e}function s(e){var t,n,r;for(r=m.createElement("div"),t=m.createDocumentFragment(),r.innerHTML=e;n=r.firstChild;)t.appendChild(n);return t}function o(e,t,n){var r;if("string"==typeof t)t=s(t);else if(t.length){for(r=0;t.length>r;r++)o(e,t[r],n);return e}for(r=e.length;r--;)n.call(e[r],t.parentNode?t:t);return e}function u(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function a(e,t){var n;for(e=e||[],"string"==typeof e&&(e=e.split(" ")),t=t||{},n=e.length;n--;)t[e[n]]={};return t}function f(e,t){return new f.fn.init(e,t)}function l(e){var t=arguments,n,r,i;for(r=1;t.length>r;r++){n=t[r];for(i in n)e[i]=n[i]}return e}function c(e){var t=[],n,r;for(n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function h(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e,t){var n,r,i,s,o;if(e)if(n=e.length,n===s){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],t.call(o,o,r)===!1))break}else for(i=0;n>i&&(o=e[i],t.call(o,o,r)!==!1);i++);return e}function d(e,n,r){for(var i=[],s=e[n];s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!f(s).is(r));)1===s.nodeType&&i.push(s),s=s[n];return i}function v(e,t,n,r){for(var i=[];e;e=e[n])r&&e.nodeType!==r||e===t||i.push(e);return i}var m=document,g=Array.prototype.push,y=Array.prototype.slice,b=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,w=e.Event,E=a("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"),S=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=/^\s*|\s*$/g,T=function(e){return null===e||e===t?"":(""+e).replace(x,"")};return f.fn=f.prototype={constructor:f,selector:"",length:0,init:function(e,t){var n=this,r,o;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(i(e)){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:b.exec(e),!r)return f(t||document).find(e);if(r[1])for(o=s(e).firstChild;o;)this.add(o),o=o.nextSibling;else{if(o=m.getElementById(r[2]),o.id!==r[2])return n.find(e);n.length=1,n[0]=o}}else this.add(e);return n},toArray:function(){return c(this)},add:function(e){var t=this;return S(e)?g.apply(t,e):e instanceof f?t.add(e.toArray()):g.call(t,e),t},attr:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.attr(t,e)});else{if(!r(n))return i[0]&&1===i[0].nodeType?i[0].getAttribute(e):t;this.each(function(){1===this.nodeType&&this.setAttribute(e,n)})}return i},css:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.css(t,e)});else{if(e=e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),!r(n))return i[0]?i[0].style[e]:t;"number"!=typeof n||E[e]||(n+="px"),i.each(function(){var r=this.style;"opacity"===e&&this.runtimeStyle&&this.runtimeStyle.opacity===t&&(r.filter=""===n?"":"alpha(opacity="+100*n+")");try{r[e]=n}catch(i){}})}return i},remove:function(){for(var e=this,t,n=this.length;n--;)t=e[n],w.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var e=this,t,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(e){var t=this,n;if(r(e)){for(n=t.length;n--;)t[n].innerHTML=e;return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(r(e)){for(n=t.length;n--;)t[n].innerText=t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return o(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return o(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){var e=this;return e[0]&&e[0].parentNode?o(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?o(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},appendTo:function(e){return f(e).append(this),this},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(){var n=this,r;u(n,e)!==t&&(r=n.className,t?n.className+=r?" "+e:e:n.className=T((" "+r+" ").replace(" "+e+" "," ")))}),n},hasClass:function(e){return u(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){w.bind(this,e,t)})},off:function(e,t){return this.each(function(){w.unbind(this,e,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new f(y.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},replaceWith:function(e){var t=this;return t[0]&&t[0].parentNode.replaceChild(f(e)[0],t[0]),t},wrap:function(e){return e=f(e)[0],this.each(function(){var t=this,n=e.cloneNode(!1);t.parentNode.insertBefore(n,t),n.appendChild(t)})},unwrap:function(){return this.each(function(){for(var e=this,t=e.firstChild,n;t;)n=t,t=t.nextSibling,e.parentNode.insertBefore(n,e)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),f(e)},find:function(e){var t,n,r=[];for(t=0,n=this.length;n>t;t++)f.find(e,this[t],r);return f(r)},push:g,sort:[].sort,splice:[].splice},l(f,{extend:l,toArray:c,inArray:h,isArray:S,each:p,trim:T,makeMap:a,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,isXMLDoc:n.isXML,contains:n.contains,filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?f.find.matchesSelector(t[0],e)?[t[0]]:[]:f.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t){return d(e,"parentNode",t)},next:function(e){return v(e,"nextSibling",1)},prev:function(e){return v(e,"previousSibling",1)},nextNodes:function(e){return v(e,"nextSibling")},prevNodes:function(e){return v(e,"previousSibling")},children:function(e){return v(e.firstChild,"nextSibling",1)},contents:function(e){return c(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){f.fn[e]=function(n){var r=this,i;if(r.length>1)throw Error("DomQuery only supports traverse functions on a single node.");return r[0]&&(i=t(r[0],n)),i=f(i),n&&"parentsUntil"!==e?i.filter(n):i}}),f.fn.filter=function(e){return f.filter(e)},f.fn.is=function(e){return!!e&&this.filter(e).length>0},f.fn.init.prototype=f.fn,f}),r(c,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,u,a,f={},l,c="﻿";for(e=e||{},l=("\\\" \\' \\; \\: ; : "+c).split(" "),a=0;l.length>a;a++)f[l[a]]=c+a,f[c+a]=l[a];return{toHex:function(e){return e.replace(r,n)},parse:function(t){function u(e,t){var n,r,i,s;n=d[e+"-top"+t],n&&(r=d[e+"-right"+t],n==r&&(i=d[e+"-bottom"+t],r==i&&(s=d[e+"-left"+t],i==s&&(d[e+t]=s,delete d[e+"-top"+t],delete d[e+"-right"+t],delete d[e+"-bottom"+t],delete d[e+"-left"+t]))))}function a(e){var t=d[e],n;if(t&&!(0>t.indexOf(" "))){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return d[e]=t[0],!0}}function l(e,t,n,r){a(t)&&a(n)&&a(r)&&(d[e]=d[t]+" "+d[n]+" "+d[r],delete d[t],delete d[n],delete d[r])}function c(e){return y=!0,f[e]}function h(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e,t,n,r,i,s){return(i=i||s)?(i=h(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=h(t||n||r),b&&(t=b.call(w,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var d={},v,m,g,y,b=e.url_converter,w=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g
,c)});v=s.exec(t);)m=v[1].replace(o,"").toLowerCase(),g=v[2].replace(o,""),m&&g.length>0&&("font-weight"===m&&"700"===g?g="bold":("color"===m||"background-color"===m)&&(g=g.toLowerCase()),g=g.replace(r,n),g=g.replace(i,p),d[m]=y?h(g,!0):g),s.lastIndex=v.index+v[0].length;u("border",""),u("border","-width"),u("border","-color"),u("border","-style"),u("padding",""),u("margin",""),l("border","border-width","border-style","border-color"),"medium none"===d.border&&delete d.border}return d},serialize:function(e,n){function r(n){var r,s,o,a;if(r=t.styles[n])for(s=0,o=r.length;o>s;s++)n=r[s],a=e[n],a!==u&&a.length>0&&(i+=(i.length>0?" ":"")+n+": "+a+";")}var i="",s,o;if(n&&t&&t.styles)r("*"),r(n);else for(s in e)o=e[s],o!==u&&o.length>0&&(i+=(i.length>0?" ":"")+s+": "+o+";");return i}}}}),r(h,[],function(){return function(e,t){function n(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){if(s=e[r])return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode)if(s=o[r])return s}}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}}}),r(p,[],function(){function e(e,n){return n?"array"==n&&m(e)?!0:typeof e==n:e!==t}function n(e){var t=[],n,r;for(n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function r(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function i(e,n,r){var i,s;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,s=e.length;s>i;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function s(e,t){var n=[];return i(e,function(e){n.push(t(e))}),n}function o(e,t){var n=[];return i(e,function(e){(!t||t(e))&&n.push(e)}),n}function u(e,n,r){var i=this,s,o,u,a,f,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),u=e[3].match(/(^|\.)(\w+)$/i)[2],o=i.createNS(e[3].replace(/\.\w+$/,""),r),!o[u]){if("static"==e[2])return o[u]=n,this.onCreate&&this.onCreate(e[2],e[3],o[u]),t;n[u]||(n[u]=function(){},l=1),o[u]=n[u],i.extend(o[u].prototype,n),e[5]&&(s=i.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],f=o[u],o[u]=l?function(){return s[a].apply(this,arguments)}:function(){return this.parent=s[a],f.apply(this,arguments)},o[u].prototype[u]=o[u],i.each(s,function(e,t){o[u].prototype[t]=s[t]}),i.each(n,function(e,t){s[t]?o[u].prototype[t]=function(){return this.parent=s[t],e.apply(this,arguments)}:t!=u&&(o[u].prototype[t]=e)})),i.each(n["static"],function(e,t){o[u][t]=e})}}function a(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function f(e,n){var r,i,s,o=arguments,u;for(r=1,i=o.length;i>r;r++){n=o[r];for(s in n)n.hasOwnProperty(s)&&(u=n[s],u!==t&&(e[s]=u))}return e}function l(e,n,r,s){s=s||this,e&&(r&&(e=e[r]),i(e,function(e,i){return n.call(s,e,i,r)===!1?!1:(l(e,n,r,s),t)}))}function c(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;e.length>n;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function h(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;r>n&&(t=t[e[n]],t);n++);return t}function p(t,n){return!t||e(t,"array")?t:s(t.split(n||","),v)}var d=/^\s*|\s*$/g,v=function(e){return null===e||e===t?"":(""+e).replace(d,"")},m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:v,isArray:m,is:e,toArray:n,makeMap:r,each:i,map:s,grep:o,inArray:a,extend:f,create:u,walk:l,createNS:c,resolve:h,explode:p}}),r(d,[p],function(e){function n(r){function i(){return B.createDocumentFragment()}function s(e,t){T(q,e,t)}function o(e,t){T(R,e,t)}function u(e){s(e.parentNode,$(e))}function a(e){s(e.parentNode,$(e)+1)}function f(e){o(e.parentNode,$(e))}function l(e){o(e.parentNode,$(e)+1)}function c(e){e?(H[W]=H[z],H[X]=H[U]):(H[z]=H[W],H[U]=H[X]),H.collapsed=q}function h(e){u(e),l(e)}function p(e){s(e,0),o(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function d(e,n){var r=H[z],i=H[U],s=H[W],o=H[X],u=n.startContainer,a=n.startOffset,f=n.endContainer,l=n.endOffset;return 0===e?x(r,i,u,a):1===e?x(s,o,u,a):2===e?x(s,o,f,l):3===e?x(r,i,f,l):t}function v(){N(I)}function m(){return N(j)}function g(){return N(F)}function y(e){var t=this[z],n=this[U],i,s;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(s=t.childNodes[n]),s?t.insertBefore(e,s):t.appendChild(e)):n?n>=t.nodeValue.length?r.insertAfter(e,t):(i=t.splitText(n),t.parentNode.insertBefore(e,i)):t.parentNode.insertBefore(e,t)}function b(e){var t=H.extractContents();H.insertNode(e),e.appendChild(t),H.selectNode(e)}function w(){return V(new n(r),{startContainer:H[z],startOffset:H[U],endContainer:H[W],endOffset:H[X],collapsed:H.collapsed,commonAncestorContainer:H.commonAncestorContainer})}function E(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function S(){return H[z]==H[W]&&H[U]==H[X]}function x(e,t,n,i){var s,o,u,a,f,l;if(e==n)return t==i?0:i>t?-1:1;for(s=n;s&&s.parentNode!=e;)s=s.parentNode;if(s){for(o=0,u=e.firstChild;u!=s&&t>o;)o++,u=u.nextSibling;return o>=t?-1:1}for(s=e;s&&s.parentNode!=n;)s=s.parentNode;if(s){for(o=0,u=n.firstChild;u!=s&&i>o;)o++,u=u.nextSibling;return i>o?-1:1}for(a=r.findCommonAncestor(e,n),f=e;f&&f.parentNode!=a;)f=f.parentNode;for(f||(f=a),l=n;l&&l.parentNode!=a;)l=l.parentNode;if(l||(l=a),f==l)return 0;for(u=a.firstChild;u;){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function T(e,t,n){var i,s;for(e?(H[z]=t,H[U]=n):(H[W]=t,H[X]=n),i=H[W];i.parentNode;)i=i.parentNode;for(s=H[z];s.parentNode;)s=s.parentNode;s==i?x(H[z],H[U],H[W],H[X])>0&&H.collapse(e):H.collapse(e),H.collapsed=S(),H.commonAncestorContainer=r.findCommonAncestor(H[z],H[W])}function N(e){var t,n=0,r=0,i,s,o,u,a,f;if(H[z]==H[W])return C(e);for(t=H[W],i=t.parentNode;i;t=i,i=i.parentNode){if(i==H[z])return k(t,e);++n}for(t=H[z],i=t.parentNode;i;t=i,i=i.parentNode){if(i==H[W])return L(t,e);++r}for(s=r-n,o=H[z];s>0;)o=o.parentNode,s--;for(u=H[W];0>s;)u=u.parentNode,s++;for(a=o.parentNode,f=u.parentNode;a!=f;a=a.parentNode,f=f.parentNode)o=a,u=f;return A(o,u,e)}function C(e){var t,n,r,s,o,u,a,f,l;if(e!=I&&(t=i()),H[U]==H[X])return t;if(3==H[z].nodeType){if(n=H[z].nodeValue,r=n.substring(H[U],H[X]),e!=F&&(s=H[z],f=H[U],l=H[X]-H[U],0===f&&l>=s.nodeValue.length-1?s.parentNode.removeChild(s):s.deleteData(f,l),H.collapse(q)),e==I)return;return r.length>0&&t.appendChild(B.createTextNode(r)),t}for(s=E(H[z],H[U]),o=H[X]-H[U];s&&o>0;)u=s.nextSibling,a=D(s,e),t&&t.appendChild(a),--o,s=u;return e!=F&&H.collapse(q),t}function k(e,t){var n,r,s,o,u,a;if(t!=I&&(n=i()),r=O(e,t),n&&n.appendChild(r),s=$(e),o=s-H[U],0>=o)return t!=F&&(H.setEndBefore(e),H.collapse(R)),n;for(r=e.previousSibling;o>0;)u=r.previousSibling,a=D(r,t),n&&n.insertBefore(a,n.firstChild),--o,r=u;return t!=F&&(H.setEndBefore(e),H.collapse(R)),n}function L(e,t){var n,r,s,o,u,a;for(t!=I&&(n=i()),s=M(e,t),n&&n.appendChild(s),r=$(e),++r,o=H[X]-r,s=e.nextSibling;s&&o>0;)u=s.nextSibling,a=D(s,t),n&&n.appendChild(a),--o,s=u;return t!=F&&(H.setStartAfter(e),H.collapse(q)),n}function A(e,t,n){var r,s,o,u,a,f,l,c;for(n!=I&&(s=i()),r=M(e,n),s&&s.appendChild(r),o=e.parentNode,u=$(e),a=$(t),++u,f=a-u,l=e.nextSibling;f>0;)c=l.nextSibling,r=D(l,n),s&&s.appendChild(r),l=c,--f;return r=O(t,n),s&&s.appendChild(r),n!=F&&(H.setStartAfter(e),H.collapse(q)),s}function O(e,t){var n=E(H[W],H[X]-1),r,i,s,o,u,a=n!=H[W];if(n==e)return _(n,a,R,t);for(r=n.parentNode,i=_(r,R,R,t);r;){for(;n;)s=n.previousSibling,o=_(n,a,R,t),t!=I&&i.insertBefore(o,i.firstChild),a=q,n=s;if(r==e)return i;n=r.previousSibling,r=r.parentNode,u=_(r,R,R,t),t!=I&&u.appendChild(i),i=u}}function M(e,t){var n=E(H[z],H[U]),r=n!=H[z],i,s,o,u,a;if(n==e)return _(n,r,q,t);for(i=n.parentNode,s=_(i,R,q,t);i;){for(;n;)o=n.nextSibling,u=_(n,r,q,t),t!=I&&s.appendChild(u),r=q,n=o;if(i==e)return s;n=i.nextSibling,i=i.parentNode,a=_(i,R,q,t),t!=I&&a.appendChild(s),s=a}}function _(e,t,n,i){var s,o,u,a,f;if(t)return D(e,i);if(3==e.nodeType){if(s=e.nodeValue,n?(a=H[U],o=s.substring(a),u=s.substring(0,a)):(a=H[X],o=s.substring(0,a),u=s.substring(a)),i!=F&&(e.nodeValue=u),i==I)return;return f=r.clone(e,R),f.nodeValue=o,f}if(i!=I)return r.clone(e,R)}function D(e,n){return n!=I?n==F?r.clone(e,q):e:(e.parentNode.removeChild(e),t)}function P(){return r.create("body",null,g()).outerText}var H=this,B=r.doc,j=0,F=1,I=2,q=!0,R=!1,U="startOffset",z="startContainer",W="endContainer",X="endOffset",V=e.extend,$=r.nodeIndex;return V(H,{startContainer:B,startOffset:0,endContainer:B,endOffset:0,collapsed:q,commonAncestorContainer:B,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:s,setEnd:o,setStartBefore:u,setStartAfter:a,setEndBefore:f,setEndAfter:l,collapse:c,selectNode:h,selectNodeContents:p,compareBoundaryPoints:d,deleteContents:v,extractContents:m,cloneContents:g,insertNode:y,surroundContents:b,cloneRange:w,toStringIE:P}),H}return n.prototype.toString=function(){return this.toStringIE()},n}),r(v,[p],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;e.length>n;n+=2)r=String.fromCharCode(parseInt(e[n],t)),s[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}}var r=e.makeMap,i,s,o,u=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,l=/&(#x|#)?([\w]+);/g,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};s={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?u:a,function(e){return s[e]||e})},encodeAllRaw:function(e){return(""+e).replace(f,function(e){return s[e]||e})},encodeNumeric:function(e,t){return e.replace(t?u:a,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":s[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?u:a,function(e){return s[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?u:a,function(e){return s[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,n){return h.encodeNamed(e,n,t)}return t=n(t)||i,e=r(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?f:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(l,function(e,n,r){return n?(r=parseInt(r,2===n.length?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):c[r]||String.fromCharCode(r)):o[e]||i[e]||t(e)})}};return h}),r(m,[],function(){var e=navigator,t=e.userAgent,n,r,i,s,o,u;n=window.opera&&window.opera.buildNumber,r=/WebKit/.test(t),i=!r&&!n&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),i=i&&/MSIE (\w+)\./.exec(t)[1],s=!r&&/Gecko/.test(t),o=-1!=t.indexOf("Mac"),u=/(iPad|iPhone)/.test(t);var a=!u||t.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:n,webkit:r,ie:i,gecko:s,mac:o,iOS:u,contentEditable:a,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window}}),r(g,[f,c,a,h,d,v,m,p],function(e,n,r,i,s,o,u,a){function f(e,t){var i=this,s;i.doc=e,i.win=window,i.files={},i.counter=0,i.stdMode=!m||e.documentMode>=8,i.boxModel=!m||"CSS1Compat"==e.compatMode||i.stdMode,i.hasOuterHTML="outerHTML"in e.createElement("a"),i.settings=t=d({keep_values:!1,hex_colors:1},t),i.schema=t.schema,i.styles=new n({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),i.fixDoc(e),i.events=t.ownEvents?new r(t.proxy):r.Event,s=t.schema?t.schema.getBlockElements():{},i.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?1===t&&!!s[e.nodeName]:!!s[e]}}var l=a.each,c=a.is,h=a.grep,p=a.trim,d=a.extend,v=u.webkit,m=u.ie,g=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/,b=a.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");return f.prototype={root:null,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},fixDoc:function(e){var t=this.settings,n;if(m&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,r,i;return!m||1!==e.nodeType||t?e.cloneNode(t):(i=n.doc,t?r.firstChild:(r=i.createElement(e.nodeName),l(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===r.indexOf("px")&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var s=this,o,u=[];for(e=s.get(e),i=i===t,r=r||("BODY"!=s.getRoot().nodeName?s.getRoot().parentNode:null),c(n,"string")&&(o=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return s.is(e,o)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;u.push(e)}e=e.parentNode}return i?u:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(g.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}return e.matches(r,n.nodeType?[n]:n).length>0},add:function(e,t,n,r,i){var s=this;return this.run(e,function(e){var o;return o=c(t,"string")?s.doc.createElement(t):t,s.setAttribs(o,n),r&&(r.nodeType?o.appendChild(r):s.setHTML(o,r)),i?o:e.appendChild(o)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,n,r){var i="",s;i+="<"+e;for(s in n)n.hasOwnProperty(s)&&null!==n[s]&&(i+=" "+s+'="'+this.encode(n[s])+'"');return r!==t?i+">"+r+"</"+e+">":i+" />"},createFragment:function(e){var t,n,r=this.doc,i;for(i=r.createElement("div"),t=r.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return this.run(e,function(e){var n,r=e.parentNode;if(!r)return null;if(t)for(;n=e.firstChild;)!m||3!==n.nodeType||n.nodeValue?r.insertBefore(n,e):e.removeChild(n);return r.removeChild(e)})},setStyle:function(e,n,r){return this.run(e,function(e){var i=this,s,o;if(n)if("string"==typeof n){s=e.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"number"!=typeof r||b[n]||(r+="px"),"opacity"===n&&e.runtimeStyle&&e.runtimeStyle.opacity===t&&(s.filter=""===r?"":"alpha(opacity="+100*r+")"),"float"==n&&(n="cssFloat"in e.style?"cssFloat":"styleFloat");try{s[n]=r}catch(u){}i.settings.update_styles&&e.removeAttribute("data-mce-style")}else for(o in n)i.setStyle(e,o,n[o])})},getStyle:function(e,n,r){if(e=this.get(e)){if(this.doc.defaultView&&r){n=n.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(n)}catch(i){return null}}return n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=m?"styleFloat":"cssFloat"),n.currentStyle&&r?e.currentStyle[n]:e.style?e.style[n]:t}},setStyles:function(e,t){this.setStyle(e,t)},css:function(e,t,n){this.setStyle(e,t,n)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,n,r){var i=this;if(e&&n)return this.run(e,function(e){var s=i.settings,o=e.getAttribute(n);if(null!==r)switch(n){case"style":if(!c(r,"string"))return l(r,function(t,n){i.setStyle(e,n,t)}),t;s.keep_values&&(r?e.setAttribute("data-mce-style",r,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=r;break;case"class":e.className=r||"";break;case"src":case"href":s.keep_values&&(s.url_converter&&(r=s.url_converter.call(s.url_converter_scope||i,r,n,e)),i.setAttrib(e,"data-mce-"+n,r,2));break;case"shape":e.setAttribute("data-mce-style",r)}c(r)&&null!==r&&0!==r.length?e.setAttribute(n,""+r,2):e.removeAttribute(n,2),o!=r&&s.onSetAttrib&&s.onSetAttrib({attrElm:e,attrName:n,attrValue:r})})},setAttribs:function(e,t){var n=this;return this.run(e,function(e){l(t,function(t,r){n.setAttrib(e,r,t)})})},getAttrib:function(e,t,n){var r,i=this,s;if(e=i.get(e),!e||1!==e.nodeType)return n===s?!1:n;if(c(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(r=e.getAttribute("data-mce-"+t)))return r;if(m&&i.props[t]&&(r=e[i.props[t]],r=r&&r.nodeValue?r.nodeValue:r),r||(r=e.getAttribute(t,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(t))return e[i.props[t]]===!0&&""===r?t:r?t:"";if("FORM"===e.nodeName&&e.getAttributeNode(t))return e.getAttributeNode(t).nodeValue;if("style"===t&&(r=r||e.style.cssText,r&&(r=i.serializeStyle(i.parseStyle(r),e.nodeName),i.settings.keep_values&&e.setAttribute("data-mce-style",r))),v&&"class"===t&&r&&(r=r.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),m)switch(t){case"rowspan":case"colspan":1===r&&(r="");break;case"size":("+0"===r||20===r||0===r)&&(r="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===r&&(r="");break;case"hspace":-1===r&&(r="");break;case"maxlength":case"tabindex":(32768===r||2147483647===r||"32768"===r)&&(r="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===r?t:n;case"shape":r=r.toLowerCase();break;default:0===t.indexOf("on")&&r&&(r=(""+r).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return r!==s&&null!==r&&""!==r?""+r:n},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u;if(e=n.get(e),t=t||o.body,e){if(t===o.body&&e.getBoundingClientRect)return u=e.getBoundingClientRect(),t=n.boxModel?o.documentElement:o.body,r=u.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-t.clientTop,i=u.top+(o.documentElement.scrollTop||o.body.scrollTop)-t.clientLeft,{x:r,y:i};for(s=e;s&&s!=t&&s.nodeType;)r+=s.offsetLeft||0,i+=s.offsetTop||0,s=s.offsetParent;for(s=e.parentNode;s&&s!=t&&s.nodeType;)r-=s.scrollLeft||0,i-=s.scrollTop||0,s=s.parentNode}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,i;if(t!==f.DOM&&n===document){var s=f.DOM.addedStyles;if(s=s||[],s[e])return;s[e]=!0,f.DOM.addedStyles=s}i=n.getElementById("mceDefaultStyles"),i||(i=n.createElement("style"),i.id="mceDefaultStyles",i.type="text/css",r=n.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(n.createTextNode(e))},loadCSS:function(e){var n=this,r=n.doc,i;return n!==f.DOM&&r===document?(f.DOM.loadCSS(e),t):(e||(e=""),i=r.getElementsByTagName("head")[0],l(e.split(","),function(e){var t;n.files[e]||(n.files[e]=!0,t=n.create("link",{rel:"stylesheet",href:e}),m&&r.documentMode&&r.recalc&&(t.onload=function(){r.recalc&&r.recalc(),t.onload=null}),i.appendChild(t))}),t)},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=n=(""!==n?n+" ":"")+t,n):0})},removeClass:function(e,t){var n=this,r;return n.run(e,function(e){var i;return n.hasClass(e,t)?(r||(r=RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),i=e.className.replace(r," "),i=p(" "!=i?i:""),e.className=i,i||(e.removeAttribute("class"),e.removeAttribute("className")),i):e.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},toggleClass:function(e,n,r){r=r===t?!this.hasClass(e,n):r,this.hasClass(e,n)!==r&&(r?this.addClass(e,n):this.removeClass(e,n))},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var n=this;return n.run(e,function(e){if(m){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(r){var i=n.create("div");i.innerHTML="<br />"+t,l(h(i.childNodes),function(t,n){n&&e.canHaveHTML&&e.appendChild(t)})}}else e.innerHTML=t;return t})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var r=this;return r.run(e,function(e){function i(){var i,s;for(s=n.createElement("body"),s.innerHTML=t,i=s.lastChild;i;)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}if(1==e.nodeType)if(n=n||e.ownerDocument||r.doc,m)try{1==e.nodeType&&r.hasOuterHTML?e.outerHTML=t:i()}catch(s){i()}else i()})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return c(t,"array")&&(e=e.cloneNode(!0)),n&&l(h(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;return e.nodeName!=t.toUpperCase()&&(r=n.create(t),l(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){for(var n=e,r;n;){for(r=t;r&&n!=r;)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(a.trim(e))},getClasses:function(){function e(t){l(t.imports,function(t){e(t)}),l(t.cssRules||t.rules,function(t){switch(t.type||1){case 1:t.selectorText&&l(t.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(s=e,e=e.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!i||(e=i(e,s)))&&(r[e]||(n.push({"class":e}),r[e]=1)))});break;case 3:e(t.styleSheet)}})}var t=this,n=[],r={},i=t.settings.class_filter,s;if(t.classes)return t.classes;try{l(t.doc.styleSheets,e)}catch(o){}return n.length>0&&(t.classes=n),n},run:function(e,t,n){var r=this,i;return"string"==typeof e&&(e=r.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],l(e,function(e,s){e&&("string"==typeof e&&(e=r.get(e)),i.push(t.call(n,e,s)))}),i)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(m){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,s,o,u,a,f=0;if(e=e.firstChild){u=new i(e,e.parentNode),t=t||n.schema?n.schema.getNonEmptyElements():null;do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"===a){f++;continue}return!1}for(s=n.getAttribs(e),r=e.attributes.length;r--;)if(a=e.attributes[r].nodeName,"name"===a||"data-mce-bookmark"===a)return!1}if(8==o)return!1;if(3===o&&!y.test(e.nodeValue))return!1}while(e=u.next())}return 1>=f},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new s(this)},nodeIndex:function(e,t){var n=0,r,i,s;if(e)for(r=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling)s=e.nodeType,(!t||3!=s||s!=r&&e.nodeValue.length)&&(n++,r=s);return n},split:function(e,n,r){function i(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,r=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=r.length-1;n>=0;n--)i(r[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var u=p(e.nodeValue).length;if(!s.isBlock(e.parentNode)||u>0||0===u&&t(e))return}else if(1==o&&(r=e.childNodes,1==r.length&&r[0]&&1==r[0].nodeType&&"bookmark"==r[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(r[0],e),r.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var s=this,o=s.createRng(),u,a,f;return e&&n?(o.setStart(e.parentNode,s.nodeIndex(e)),o.setEnd(n.parentNode,s.nodeIndex(n)),u=o.extractContents(),o=s.createRng(),o.setStart(n.parentNode,s.nodeIndex(n)+1),o.setEnd(e.parentNode,s.nodeIndex(e)+1),a=o.extractContents(),f=e.parentNode,f.insertBefore(i(u),e),r?f.replaceChild(r,n):f.insertBefore(n,e),f.insertBefore(i(a),e),s.remove(e),r||n):t},bind:function(e,t,n,r){return this.events.bind(e,t,n,r||this)},unbind:function(e,t,n){return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},destroy:function(){var e=this;e.win=e.doc=e.root=e.events=e.frag=null},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},f.DOM=new f(document),f}),r(y,[g,p],function(e,n){function r(){function e(e,t){function n(){s.remove(u),o&&(o.onreadystatechange=o.onload=o=null),t()}function r(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var s=i,o,u;u=s.uniqueId(),o=document.createElement("script"),o.id=u,o.type="text/javascript",o.src=e,o.onload=n,o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()},o.onerror=r,(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}var n=0,r=1,u=2,a={},f=[],l={},c=[],h=0,p;this.isDone=function(e){return a[e]==u},this.markDone=function(e){a[e]=u},this.add=this.load=function(e,t,r){var i=a[e];i==p&&(f.push(e),a[e]=n),t&&(l[e]||(l[e]=[]),l[e].push({func:t,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(f,e,t)},this.loadScripts=function(n,i,f){function d(e){s(l[e],function(e){e.func.call(e.scope)}),l[e]=p}var v;c.push({func:i,scope:f||this}),v=function(){var i=o(n);n.length=0,s(i,function(n){return a[n]==u?(d(n),t):(a[n]!=r&&(a[n]=r,h++,e(n,function(){a[n]=u,h--,d(n),v()})),t)}),h||(s(c,function(e){e.func.call(e.scope)}),c.length=0)},v()}}var i=e.DOM,s=n.each,o=n.grep;return r.ScriptLoader=new r,r}),r(b,[y,p],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=r.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,s,o,u){function a(){var r=f.dependencies(n);i(r,function(e){var n=f.createUrl(s,e);f.load(n.resource,n,t,t)}),o&&(u?o.call(u):o.call(e))}var f=this,l=s;f.urls[n]||("object"==typeof s&&(l=s.prefix+s.resource+s.suffix),0!==l.indexOf("/")&&-1==l.indexOf("://")&&(l=r.baseURL+"/"+l),f.urls[n]=l.substring(0,l.lastIndexOf("/")),f.lookup[n]?a():e.ScriptLoader.add(l,a,u))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(w,[],function(){function e(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){if(r=e[o])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[o])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,s;if("string"!=typeof e){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==s){if(null===t){if(e in r.map)for(delete r.map[e],i=r.length;i--;)if(r[i].name===e)return r=r.splice(i,1),n;return n}if(e in r.map){for(i=r.length;i--;)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,n=new t(e.name,e.type),r,i,s,o,u;if(s=e.attributes){for(u=[],u.map={},r=0,i=s.length;i>r;r++)o=s[r],"id"!==o.name&&(u[u.length]={name:o.name,value:o.value},u.map[o.name]=o.value);n.attributes=u}return n.value=e.value,n.shortEnded=e.shortEnded,n},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(
e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n=this,r,i=[];for(r=n.firstChild;r;r=e(r,n))r.name===t&&i.push(r);return i},empty:function(){var t=this,n,r,i;if(t.firstChild){for(n=[],i=t.firstChild;i;i=e(i,t))n.push(i);for(r=n.length;r--;)i=n[r],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return t.firstChild=t.lastChild=null,t},isEmpty:function(t){var r=this,i=r.firstChild,s,o;if(i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(t[i.name])return!1;for(s=i.attributes.length;s--;)if(o=i.attributes[s].name,"name"===o||0===o.indexOf("data-mce-"))return!1}if(8===i.type)return!1;if(3===i.type&&!n.test(i.value))return!1}while(i=e(i,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,s;if(i=new t(e,r[e]||1),n)for(s in n)i.attr(s,n[s]);return i},t}),r(E,[p],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,r){function i(e){var t={},n,r;for(n=0,r=e.length;r>n;n++)t[e[n]]={};return t}var s,a,f,l=arguments;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),a=3;l.length>a;a++)"string"==typeof l[a]&&(l[a]=t(l[a])),r.push.apply(r,l[a]);for(e=t(e),s=e.length;s--;)f=[].concat(u,t(n)),o[e[s]]={attributes:i(f),attributesOrder:f,children:i(r)}}function i(e,n){var r,i,s,u;for(e=t(e),r=e.length,n=t(n);r--;)for(i=o[e[r]],s=0,u=n.length;u>s;s++)i.attributes[n[s]]={},i.attributesOrder.push(n[s])}var o={},u,a,f,l,c,h,p;return r[e]?r[e]:(u=t("id accesskey class dir lang style tabindex title"),a=t("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting"),f=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),l=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(u.push.apply(u,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),f.push.apply(f,t("article aside details dialog figure header footer hgroup section nav")),l.push.apply(l,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(u.push("xml:lang"),p=t("acronym applet basefont big font strike tt"),l.push.apply(l,p),s(p,function(e){n(e,"",l)}),h=t("center dir isindex noframes"),f.push.apply(f,h),c=[].concat(f,l),s(h,function(e){n(e,"",c)})),c=c||[].concat(f,l),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),n("address dt dd div caption","",c),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),n("blockquote","cite",c),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",c),n("dl","","dt dd"),n("a","href target rel media hreflang type",l),n("q","cite",l),n("ins del","cite datetime",c),n("img","src alt usemap ismap width height"),n("iframe","src name width height",c),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",c,"param"),n("param","name value"),n("map","name",c,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",c),n("th","colspan rowspan headers scope abbr",c),n("form","accept-charset action autocomplete enctype method name novalidate target",c),n("fieldset","disabled form name",c,"legend"),n("label","form for",l),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?c:l),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",c,"li"),n("noscript","",c),"html4"!=e&&(n("wbr"),n("ruby","",l,"rt rp"),n("figcaption","",c),n("mark rt rp summary bdi","",l),n("canvas","width height",c),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height",c,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls",c,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",l,"option"),n("article section nav aside header footer","",c),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",c,"figcaption"),n("time","datetime",l),n("dialog","open",c),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",l),n("progress","value max",l),n("meter","value min max low high optimum",l),n("details","open",c,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid codebase codetype archive standby align border hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","srcdoc sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){o[e]&&delete o[e].children[e]}),delete o.caption.children.table,r[e]=o,o)}var r={},i=e.makeMap,s=e.each,o=e.extend,u=e.explode,a=e.inArray;return function(e){function f(t,n,s){var u=e[t];return u?u=i(u,",",i(u.toUpperCase()," ")):(u=r[t],u||(u=i(n," ",i(n.toUpperCase()," ")),u=o(u,s),r[t]=u)),u}function l(e){return RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function c(e){var n,r,s,o,u,f,c,h,p,d,v,m,y,w,E,S,x,T,N,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,L=/[*?+]/;if(e)for(e=t(e,","),g["@"]&&(S=g["@"].attributes,x=g["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(u=C.exec(e[n])){if(w=u[1],p=u[2],E=u[3],h=u[5],m={},y=[],f={attributes:m,attributesOrder:y},"#"===w&&(f.paddEmpty=!0),"-"===w&&(f.removeEmpty=!0),"!"===u[4]&&(f.removeEmptyAttrs=!0),S){for(T in S)m[T]=S[T];y.push.apply(y,x)}if(h)for(h=t(h,"|"),s=0,o=h.length;o>s;s++)if(u=k.exec(h[s])){if(c={},v=u[1],d=u[2].replace(/::/g,":"),w=u[3],N=u[4],"!"===v&&(f.attributesRequired=f.attributesRequired||[],f.attributesRequired.push(d),c.required=!0),"-"===v){delete m[d],y.splice(a(y,d),1);continue}w&&("="===w&&(f.attributesDefault=f.attributesDefault||[],f.attributesDefault.push({name:d,value:N}),c.defaultValue=N),":"===w&&(f.attributesForced=f.attributesForced||[],f.attributesForced.push({name:d,value:N}),c.forcedValue=N),"<"===w&&(c.validValues=i(N,"?"))),L.test(d)?(f.attributePatterns=f.attributePatterns||[],c.pattern=l(d),f.attributePatterns.push(c)):(m[d]||y.push(d),m[d]=c)}S||"@"!=p||(S=m,x=y),E&&(f.outputName=p,g[E]=f),L.test(p)?(f.pattern=l(p),b.push(f)):g[p]=f}}function h(e){g={},b=[],c(e),s(E,function(e,t){y[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&s(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",o=t[2];y[o]=y[i],A[o]=i,r||(C[o.toUpperCase()]={},C[o]={}),g[o]||(g[o]=g[i]),s(y,function(e){e[i]&&(e[o]=e[i])})})}function d(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e,","),function(e){var r=n.exec(e),i,o;r&&(o=r[1],i=o?y[r[2]]:y[r[2]]={"#comment":{}},i=y[r[2]],s(t(r[3],"|"),function(e){"-"===o?delete i[e]:i[e]={}}))})}function v(e){var t=g[e],n;if(t)return t;for(n=b.length;n--;)if(t=b[n],t.pattern.test(e))return t}var m=this,g={},y={},b=[],w,E,S,x,T,N,C,k,L,A={},O={};e=e||{},E=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),e.valid_styles&&(w={},s(e.valid_styles,function(e,t){w[t]=u(e)})),S=f("whitespace_elements","pre script noscript style textarea video audio iframe object"),x=f("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),T=f("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),N=f("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),k=f("non_empty_elements","td th iframe video audio object",T),L=f("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),C=f("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",L),s((e.special||"script noscript style textarea").split(" "),function(e){O[e]=RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?h(e.valid_elements):(s(E,function(e,t){g[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},y[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),g[e[1]].outputName=e[0]}),g.img.attributesDefault=[{name:"alt",value:""}],s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){g[e]&&(g[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){g[e].paddEmpty=!0}),s(t("span"),function(e){g[e].removeEmptyAttrs=!0})),p(e.custom_elements),d(e.valid_children),c(e.extended_valid_elements),d("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&s(u(e.invalid_elements),function(e){g[e]&&delete g[e]}),v("span")||c("span[!data-mce-type|*]"),m.children=y,m.styles=w,m.getBoolAttrs=function(){return N},m.getBlockElements=function(){return C},m.getTextBlockElements=function(){return L},m.getShortEndedElements=function(){return T},m.getSelfClosingElements=function(){return x},m.getNonEmptyElements=function(){return k},m.getWhiteSpaceElements=function(){return S},m.getSpecialElements=function(){return O},m.isValidChild=function(e,t){var n=y[e];return!!n&&!!n[t]},m.isValid=function(e,t){var n,r,i=v(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},m.getElementRule=v,m.getCustomElements=function(){return A},m.addValidElements=c,m.setValidElements=h,m.addCustomElements=p,m.addValidChildren=d,m.elements=g}}),r(S,[E,v,p],function(e,t,n){var r=n.each;return function(n,i){var s=this,o=function(){};n=n||{},s.schema=i=i||new e,n.fix_self_closing!==!1&&(n.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(s[e]=n[e]||o)}),s.parse=function(e){function r(e){var t,n;for(t=c.length;t--&&c[t].name!==e;);if(t>=0){for(n=c.length-1;n>=t;n--)e=c[n],e.valid&&o.end(e.name);c.length=t}}function s(e,t,n,r,i){var s,o;if(t=t.toLowerCase(),n=t in b?t:F(n||r||i||""),E&&!m&&0!==t.indexOf("data-mce-")){if(s=C[t],!s&&k){for(o=k.length;o--&&(s=k[o],!s.pattern.test(t)););-1===o&&(s=null)}if(!s)return;if(s.validValues&&!(n in s.validValues))return}h.map[t]=n,h.push({name:t,value:n})}var o=this,u,a=0,f,l,c=[],h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0,F=t.decode,I;for(D=RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=i.getShortEndedElements(),_=n.self_closing_elements||i.getSelfClosingElements(),b=i.getBoolAttrs(),E=n.validate,g=n.remove_internals,I=n.fix_self_closing,H=i.getSpecialElements();u=D.exec(e);){if(u.index>a&&o.text(F(e.substr(a,u.index-a))),f=u[6])f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),r(f);else if(f=u[7]){if(f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),w=f in y,I&&_[f]&&c.length>0&&c[c.length-1].name===f&&r(f),!E||(S=i.getElementRule(f))){if(x=!0,E&&(C=S.attributes,k=S.attributePatterns),(N=u[8])?(m=-1!==N.indexOf("data-mce-type"),m&&g&&(x=!1),h=[],h.map={},N.replace(P,s)):(h=[],h.map={}),E&&!m){if(L=S.attributesRequired,A=S.attributesDefault,O=S.attributesForced,M=S.removeEmptyAttrs,M&&!h.length&&(x=!1),O)for(p=O.length;p--;)T=O[p],v=T.name,B=T.value,"{$uid}"===B&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B});if(A)for(p=A.length;p--;)T=A[p],v=T.name,v in h.map||(B=T.value,"{$uid}"===B&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B}));if(L){for(p=L.length;p--&&!(L[p]in h.map););-1===p&&(x=!1)}h.map["data-mce-bogus"]&&(x=!1)}x&&o.start(f,h,w)}else x=!1;if(l=H[f]){l.lastIndex=a=u.index+u[0].length,(u=l.exec(e))?(x&&(d=e.substr(a,u.index-a)),a=u.index+u[0].length):(d=e.substr(a),a=e.length),x&&(d.length>0&&o.text(d,!0),o.end(f)),D.lastIndex=a;continue}w||(N&&N.indexOf("/")==N.length-1?x&&o.end(f):c.push({name:f,valid:x}))}else(f=u[1])?o.comment(f):(f=u[2])?o.cdata(f):(f=u[3])?o.doctype(f):(f=u[4])&&o.pi(f,u[5]);a=u.index+u[0].length}for(e.length>a&&o.text(F(e.substr(a))),p=c.length-1;p>=0;p--)f=c[p],f.valid&&o.end(f.name)}}}),r(x,[w,E,S,p],function(e,n,r,i){var s=i.makeMap,o=i.each,u=i.explode,a=i.extend;return function(i,f){function l(t){var n,r,i,o,u,a,l,h,p,d,v,m,g,y;for(v=s("tr,td,th,tbody,thead,tfoot,table"),d=f.getNonEmptyElements(),m=f.getTextBlockElements(),n=0;t.length>n;n++)if(r=t[n],r.parent&&!r.fixed)if(m[r.name]&&"li"==r.parent.name){for(g=r.next;g&&m[g.name];)g.name="li",g.fixed=!0,r.parent.insert(g,r.parent),g=g.next;r.unwrap(r)}else{for(o=[r],i=r.parent;i&&!f.isValidChild(i.name,r.name)&&!v[i.name];i=i.parent)o.push(i);if(i&&o.length>1){for(o.reverse(),u=a=c.filterNode(o[0].clone()),p=0;o.length-1>p;p++){for(f.isValidChild(a.name,o[p].name)?(l=c.filterNode(o[p].clone()),a.append(l)):l=a,h=o[p].firstChild;h&&h!=o[p+1];)y=h.next,l.append(h),h=y;a=l}u.isEmpty(d)?i.insert(r,o[0],!0):(i.insert(u,o[0],!0),i.insert(r,u)),i=o[0],(i.isEmpty(d)||i.firstChild===i.lastChild&&"br"===i.firstChild.name)&&i.empty().remove()}else if(r.parent){if("li"===r.name){if(g=r.prev,!g||"ul"!==g.name&&"ul"!==g.name){if(g=r.next,!g||"ul"!==g.name&&"ul"!==g.name){r.wrap(c.filterNode(new e("ul",1)));continue}g.insert(r,g.firstChild,!0);continue}g.append(r);continue}f.isValidChild(r.parent.name,"div")&&f.isValidChild("div",r.name)?r.wrap(c.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var c=this,h={},p=[],d={},v={};i=i||{},i.validate="validate"in i?i.validate:!0,i.root_name=i.root_name||"body",c.schema=f=f||new n,c.filterNode=function(e){var t,n,r;n in h&&(r=d[n],r?r.push(e):d[n]=[e]),t=p.length;for(;t--;)n=p[t].name,n in e.attributes.map&&(r=v[n],r?r.push(e):v[n]=[e]);return e},c.addNodeFilter=function(e,t){o(u(e),function(e){var n=h[e];n||(h[e]=n=[]),n.push(t)})},c.addAttributeFilter=function(e,n){o(u(e),function(e){var r;for(r=0;p.length>r;r++)if(p[r].name===e)return p[r].callbacks.push(n),t;p.push({name:e,callbacks:[n]})})},c.parse=function(n,o){function u(){function e(e){e&&(t=e.firstChild,t&&3==t.type&&(t.value=t.value.replace(O,"")),t=e.lastChild,t&&3==t.type&&(t.value=t.value.replace(D,"")))}var t=b.firstChild,n,r;if(f.isValidChild(b.name,I.toLowerCase())){for(;t;)n=t.next,3==t.type||1==t.type&&"p"!==t.name&&!A[t.name]&&!t.attr("data-mce-type")?r?r.append(t):(r=c(I,1),b.insert(r,t),r.append(t)):(e(r),r=null),t=n;e(r)}}function c(t,n){var r=new e(t,n),i;return t in h&&(i=d[t],i?i.push(r):d[t]=[r]),r}function m(e){var t,n,r;for(t=e.prev;t&&3===t.type;)n=t.value.replace(D,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function g(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var y,b,w,E,S,x,T,N,C,k,L,A,O,M=[],_,D,P,H,B,j,F,I;if(o=o||{},d={},v={},A=a(s("script,style,head,html,body,title,meta,param"),f.getBlockElements()),F=f.getNonEmptyElements(),j=f.children,L=i.validate,I="forced_root_block"in o?o.forced_root_block:i.forced_root_block,B=f.getWhiteSpaceElements(),O=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,P=/[ \t\r\n]+/g,H=/^[ \t\r\n]+$/,y=new r({validate:L,self_closing_elements:g(f.getSelfClosingElements()),cdata:function(e){w.append(c("#cdata",4)).value=e},text:function(e,t){var n;_||(e=e.replace(P," "),w.lastChild&&A[w.lastChild.name]&&(e=e.replace(O,""))),0!==e.length&&(n=c("#text",3),n.raw=!!t,w.append(n).value=e)},comment:function(e){w.append(c("#comment",8)).value=e},pi:function(e,t){w.append(c(e,7)).value=t,m(w)},doctype:function(e){var t;t=w.append(c("#doctype",10)),t.value=e,m(w)},start:function(e,t,n){var r,i,s,o,u;if(s=L?f.getElementRule(e):{}){for(r=c(s.outputName||e,1),r.attributes=t,r.shortEnded=n,w.append(r),u=j[w.name],u&&j[r.name]&&!u[r.name]&&M.push(r),i=p.length;i--;)o=p[i].name,o in t.map&&(C=v[o],C?C.push(r):v[o]=[r]);A[e]&&m(r),n||(w=r),!_&&B[e]&&(_=!0)}},end:function(n){var r,i,s,o,u;if(i=L?f.getElementRule(n):{}){if(A[n]&&!_){if(r=w.firstChild,r&&3===r.type)if(s=r.value.replace(O,""),s.length>0)r.value=s,r=r.next;else for(o=r.next,r.remove(),r=o;r&&3===r.type;)s=r.value,o=r.next,(0===s.length||H.test(s))&&(r.remove(),r=o),r=o;if(r=w.lastChild,r&&3===r.type)if(s=r.value.replace(D,""),s.length>0)r.value=s,r=r.prev;else for(o=r.prev,r.remove(),r=o;r&&3===r.type;)s=r.value,o=r.prev,(0===s.length||H.test(s))&&(r.remove(),r=o),r=o}if(_&&B[n]&&(_=!1),(i.removeEmpty||i.paddEmpty)&&w.isEmpty(F))if(i.paddEmpty)w.empty().append(new e("#text","3")).value=" ";else if(!w.attributes.map.name&&!w.attributes.map.id)return u=w.parent,w.empty().remove(),w=u,t;w=w.parent}}},f),b=w=new e(o.context||i.root_name,11),y.parse(n),L&&M.length&&(o.context?o.invalid=!0:l(M)),I&&("body"==b.name||o.isRootContent)&&u(),!o.invalid){for(k in d){for(C=h[k],E=d[k],T=E.length;T--;)E[T].parent||E.splice(T,1);for(S=0,x=C.length;x>S;S++)C[S](E,k,o)}for(S=0,x=p.length;x>S;S++)if(C=p[S],C.name in v){for(E=v[C.name],T=E.length;T--;)E[T].parent||E.splice(T,1);for(T=0,N=C.callbacks.length;N>T;T++)C.callbacks[T](E,C.name,o)}}return b},i.remove_trailing_brs&&c.addNodeFilter("br",function(t){var n,r=t.length,i,s=a({},f.getBlockElements()),o=f.getNonEmptyElements(),u,l,c,h,p,d;for(s.body=1,n=0;r>n;n++)if(i=t[n],u=i.parent,s[i.parent.name]&&i===u.lastChild){for(c=i.prev;c;){if(h=c.name,"span"!==h||"bookmark"!==c.attr("data-mce-type")){if("br"!==h)break;if("br"===h){i=null;break}}c=c.prev}i&&(i.remove(),u.isEmpty(o)&&(p=f.getElementRule(u.name),p&&(p.removeEmpty?u.remove():p.paddEmpty&&(u.empty().append(new e("#text",3)).value=" "))))}else{for(l=i;u.firstChild===l&&u.lastChild===l&&(l=u,!s[u.name]);)u=u.parent;l===u&&(d=new e("#text",3),d.value=" ",i.replace(d))}}),i.allow_html_in_named_anchor||c.addAttributeFilter("id,name",function(e){for(var t=e.length,n,r,i,s;t--;)if(s=e[t],"a"===s.name&&s.firstChild&&!s.attr("href")){i=s.parent,n=s.lastChild;do r=n.prev,i.insert(n,s),n=r;while(n)}})}}),r(T,[v,p],function(e,t){var n=t.makeMap;return function(t){var r=[],i,s,o,u,a;return t=t||{},i=t.indent,s=n(t.indent_before||""),o=n(t.indent_after||""),u=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"==t.element_format,{start:function(e,t,n){var f,l,c,h;if(i&&s[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n")),r.push("<",e),t)for(f=0,l=t.length;l>f;f++)c=t[f],r.push(" ",c.name,'="',u(c.value,!0),'"');r[r.length]=!n||a?">":" />",n&&i&&o[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n"))},end:function(e){var t;r.push("</",e,">"),i&&o[e]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(e,t){e.length>0&&(r[r.length]=t?e:u(e))},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("<!--",e,"-->")},pi:function(e,t){t?r.push("<?",e," ",t,"?>"):r.push("<?",e,"?>"),i&&r.push("\n")},doctype:function(e){r.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}}),r(N,[T,E],function(e,t){return function(n,r){var i=this,s=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,i.schema=r=r||new t,i.writer=s,i.serialize=function(e){function t(e){var n=i[e.type],u,a,f,l,c,h,p,d,v;if(n)n(e);else{if(u=e.name,a=e.shortEnded,f=e.attributes,o&&f&&f.length>1){for(h=[],h.map={},v=r.getElementRule(e.name),p=0,d=v.attributesOrder.length;d>p;p++)l=v.attributesOrder[p],l in f.map&&(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));for(p=0,d=f.length;d>p;p++)l=f[p].name,l in h.map||(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));f=h}if(s.start(e.name,f,a),!a){if(e=e.firstChild)do t(e);while(e=e.next);s.end(u)}}}var i,o;return o=n.validate,i={3:function(e){s.text(e.value,e.raw)},8:function(e){s.comment(e.value)},7:function(e){s.pi(e.name,e.value)},10:function(e){s.doctype(e.value)},4:function(e){s.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},s.reset(),1!=e.type||n.inner?i[11](e):t(e),s.getContent()}}}),r(C,[g,x,v,N,w,E,m,p],function(e,t,n,r,i,s,o,u){var a=u.each,f=u.trim,l=e.DOM;return function(e,i){var u,c,h;return i&&(u=i.dom,c=i.schema),u=u||l,c=c||new s(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,h=new t(e,c),h.addAttributeFilter("src,href,style",function(t,n){for(var r=t.length,i,s,o="data-mce-"+n,a=e.url_converter,f=e.url_converter_scope,l;r--;)i=t[r],s=i.attributes.map[o],s!==l?(i.attr(n,s.length>0?s:null),i.attr(o,null)):(s=i.attributes.map[n],"style"===n?s=u.serializeStyle(u.parseStyle(s),i.name):a&&(s=a.call(f,s,n,i.name)),i.attr(n,s.length>0?s:null))}),h.addAttributeFilter("class",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null)}),h.addAttributeFilter("data-mce-type",function(e,t,n){for(var r=e.length,i;r--;)i=e[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),h.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),h.addNodeFilter("noscript",function(e){for(var t=e.length,r;t--;)r=e[t].firstChild,r&&(r.value=n.decode(r.value))}),h.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r=e.length,i,s;r--;)i=e[r],s=i.firstChild?i.firstChild.value:"","script"===t?(i.attr("type",(i.attr("type")||"text/javascript").replace(/^mce\-/,"")),s.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(s)+"\n// ]]>")):s.length>0&&(i.firstChild.value="<!--\n"+n(s)+"\n-->")}),h.addNodeFilter("#comment",function(e){for(var t=e.length,n;t--;)n=e[t],0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,r;n--;)r=e[n],7===r.type?r.remove():1===r.type&&("input"!==t||"type"in r.attributes.map||r.attr("type","text"))}),e.fix_list_elements&&h.addNodeFilter("ul,ol",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.parent,("ul"===r.name||"ol"===r.name)&&n.prev&&"li"===n.prev.name&&n.prev.append(n)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:c,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(t,n){var i=this,s,l,p,d,v;return o.ie&&u.select("script,style,select,map").length>0?(v=t.innerHTML,t=t.cloneNode(!1),u.setHTML(t,v)):t=t.cloneNode(!0),s=t.ownerDocument.implementation,s.createHTMLDocument&&(l=s.createHTMLDocument(""),a("BODY"==t.nodeName?t.childNodes:[t],function(e){l.body.appendChild(l.importNode(e,!0))}),t="BODY"!=t.nodeName?l.body.firstChild:l.body,p=u.doc,u.doc=l),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,i.onPreProcess(n)),d=new r(e,c),n.content=d.serialize(h.parse(f(n.getInner?t.innerHTML:u.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||i.onPostProcess(n),p&&(u.doc=p),n.node=null,n.content},addRules:function(e){c.addValidElements(e)},setRules:function(e){c.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),r(k,[],function(){function e(e){function n(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;if(r=t.duplicate(),r.collapse(n),h=r.parentElement(),h.ownerDocument===e.dom.doc){for(;"false"===h.contentEditable;)h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};for(u=h.children,s=u.length-1;s>=i;)if(l=Math.floor((i+s)/2),a=u[l],r.moveToElementText(a),c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t),c>0)s=l-1;else{if(!(0>c))return{node:a};i=l+1}if(0>c)for(a?r.collapse(!1):(r.moveToElementText(h),r.collapse(!0),a=h,o=!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&h==r.parentElement();)f++;else for(r.collapse(!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&h==r.parentElement();)f++;return{node:a,position:c,offset:f,inside:o}}}function r(){function r(e){var r=n(o,e),i,s,a=0,f,l,c;if(i=r.node,s=r.offset,r.inside&&!i.hasChildNodes())return u[e?"setStart":"setEnd"](i,0),t;if(s===l)return u[e?"setStartBefore":"setEndAfter"](i),t;if(0>r.position){if(f=r.inside?i.firstChild:i.nextSibling,!f)return u[e?"setStartAfter":"setEndAfter"](i),t;if(!s)return 3==f.nodeType?u[e?"setStart":"setEnd"](f,0):u[e?"setStartBefore":"setEndBefore"](f),t;for(;f;){if(c=f.nodeValue,a+=c.length,a>=s){i=f,a-=s,a=c.length-a;break}f=f.nextSibling}}else{if(f=i.previousSibling,!f)return u[e?"setStartBefore":"setEndBefore"](i);if(!s)return 3==i.nodeType?u[e?"setStart":"setEnd"](f,i.nodeValue.length):u[e?"setStartAfter":"setEndAfter"](f),t;for(;f;){if(a+=f.nodeValue.length,a>=s){i=f,a-=s;break}f=f.previousSibling}}u[e?"setStart":"setEnd"](i,a)}var o=e.getRng(),u=s.createRng(),a,f,l,c,h;if(a=o.item?o.item(0):o.parentElement(),a.ownerDocument!=s.doc)return u;if(f=e.isCollapsed(),o.item)return u.setStart(a.parentNode,s.nodeIndex(a)),u.setEnd(u.startContainer,u.startOffset+1),u;try{r(!0),f||r()}catch(p){if(-2147024809!=p.number)throw p;h=i.getBookmark(2),l=o.duplicate(),l.collapse(!0),a=l.parentElement(),f||(l=o.duplicate(),l.collapse(!1),c=l.parentElement(),c.innerHTML=c.innerHTML),a.innerHTML=a.innerHTML,i.moveToBookmark(h),o=e.getRng(),r(!0),f||r()}return u}var i=this,s=e.dom,o=!1;this.getBookmark=function(r){function i(e){var t,n,r,i,o=[];for(t=e.parentNode,n=s.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,i=r.length;i--;)if(e===r[i]){o.push(i);break}e=t,t=t.parentNode}return o}function o(e){var r;return r=n(u,e),r?{position:r.position,offset:r.offset,indexes:i(r.node),inside:r.inside}:t}var u=e.getRng(),a={};return 2===r&&(u.item?a.start={ctrl:!0,indexes:i(u.item(0))}:(a.start=o(!0),e.isCollapsed()||(a.end=o()))),a},this.moveToBookmark=function(e){function t(e){var t,n,r,i;for(t=s.getRoot(),n=e.length-1;n>=0;n--)i=t.children,r=e[n],i.length-1>=r&&(t=i[r]);return t}function n(n){var s=e[n?"start":"end"],o,u,a,f;s&&(o=s.position>0,u=i.createTextRange(),u.moveToElementText(t(s.indexes)),f=s.offset,f!==a?(u.collapse(s.inside||o),u.moveStart("character",o?-f:f)):u.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",u),n&&r.collapse(!0))}var r,i=s.doc.body;e.start&&(e.start.ctrl?(r=i.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=i.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(n){function r(e){var t,n,r,u,h;r=s.create("a"),t=e?a:l,n=e?f:c,u=i.duplicate(),(t==p||t==p.documentElement)&&(t=d,n=0),3==t.nodeType?(t.parentNode.insertBefore(r,t),u.moveToElementText(r),u.moveStart("character",n),s.remove(r),i.setEndPoint(e?"StartToStart":"EndToEnd",u)):(h=t.childNodes,h.length?(n>=h.length?s.insertAfter(r,h[h.length-1]):t.insertBefore(r,h[n]),u.moveToElementText(r)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",r=t.firstChild,u.moveToElementText(r),u.collapse(o)),i.setEndPoint(e?"StartToStart":"EndToEnd",u),s.remove(r))}var i,u,a,f,l,c,h,p=e.dom.doc,d=p.body,v,m;if(a=n.startContainer,f=n.startOffset,l=n.endContainer,c=n.endOffset,i=d.createTextRange(),a==l&&1==a.nodeType){if(f==c&&!a.hasChildNodes()){if(a.canHaveHTML)return h=a.previousSibling,h&&!h.hasChildNodes()&&s.isBlock(h)?h.innerHTML="&#xFEFF;":h=null,a.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(a.lastChild),i.select(),s.doc.selection.clear(),a.innerHTML="",h&&(h.innerHTML=""),t;f=s.nodeIndex(a),a=a.parentNode}if(f==c-1)try{if(m=a.childNodes[f],u=d.createControlRange(),u.addElement(m),u.select(),v=e.getRng(),v.item&&m===v.item(0))return}catch(g){}}r(!0),r(),i.select()},this.getRangeAt=r}return e}),r(L,[m],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),r(A,[L,p,m],function(e,n,r){return function(i,s){function o(e){return s.settings.object_resizing===!1?!1:/TABLE|IMG|DIV/.test(e.nodeName)?"false"===e.getAttribute("data-mce-resize")?!1:!0:!1}function u(t){var n,r;n=t.screenX-N,r=t.screenY-C,D=n*T[2]+A,P=r*T[3]+O,D=5>D?5:D,P=5>P?5:P,(e.modifierPressed(t)||"IMG"==E.nodeName&&0!==T[2]*T[3])&&(D=Math.round(P/M),P=Math.round(D*M)),b.setStyles(S,{width:D,height:P}),0>T[2]&&D>=S.clientWidth&&b.setStyle(S,"left",k+(A-D)),0>T[3]&&P>=S.clientHeight&&b.setStyle(S,"top",L+(O-P)),_||(s.fire("ObjectResizeStart",{target:E,width:A,height:O}),_=!0)}function a(){function e(e,t){t&&(E.style[e]||!s.schema.isValid(E.nodeName.toLowerCase(),e)?b.setStyle(E,e,t):b.setAttrib(E,e,t))}_=!1,e("width",D),e("height",P),b.unbind(H,"mousemove",u),b.unbind(H,"mouseup",a),B!=H&&(b.unbind(B,"mousemove",u),b.unbind(B,"mouseup",a)),b.remove(S),j&&"TABLE"!=E.nodeName||f(E),s.fire("ObjectResized",{target:E,width:D,height:P}),s.nodeChanged()}function f(e,n,r){var i,f,c,h,p;i=b.getPos(e,s.getBody()),k=i.x,L=i.y,p=e.getBoundingClientRect(),f=p.width||p.right-p.left,c=p.height||p.bottom-p.top,E!=e&&(m(),E=e,D=P=0),h=s.fire("ObjectSelected",{target:e}),o(e)&&!h.isDefaultPrevented()?w(x,function(e,i){function o(t){_=!0,N=t.screenX,C=t.screenY,A=E.clientWidth,O=E.clientHeight,M=O/A,T=e
,S=E.cloneNode(!0),b.addClass(S,"mce-clonedresizable"),S.contentEditable=!1,S.unSelectabe=!0,b.setStyles(S,{left:k,top:L,margin:0}),S.removeAttribute("data-mce-selected"),s.getBody().appendChild(S),b.bind(H,"mousemove",u),b.bind(H,"mouseup",a),B!=H&&(b.bind(B,"mousemove",u),b.bind(B,"mouseup",a))}var l,h;return n?(i==n&&o(r),t):(l=b.get("mceResizeHandle"+i),l?b.show(l):(h=s.getBody(),l=b.add(h,"div",{id:"mceResizeHandle"+i,"data-mce-bogus":!0,"class":"mce-resizehandle",contentEditable:!1,unSelectabe:!0,style:"cursor:"+i+"-resize; margin:0; padding:0"}),b.bind(l,"mousedown",function(e){e.preventDefault(),o(e)})),b.setStyles(l,{left:f*e[0]+k-l.offsetWidth/2,top:c*e[1]+L-l.offsetHeight/2}),t)}):l(),E.setAttribute("data-mce-selected","1")}function l(){var e,t;E&&E.removeAttribute("data-mce-selected");for(e in x)t=b.get("mceResizeHandle"+e),t&&(b.unbind(t),b.remove(t))}function c(e){function n(e,t){do if(e===t)return!0;while(e=e.parentNode)}var r;return w(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),r="mousedown"==e.type?e.target:i.getNode(),r=b.getParent(r,j?"table":"table,img,hr"),r&&n(i.getStart(),r)&&n(i.getEnd(),r)&&(!j||r!=i.getStart()&&"IMG"!==i.getStart().nodeName)?(f(r),t):(l(),t)}function h(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function p(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function d(e){var t=e.srcElement,n,r,i,o,u,a,l;n=t.getBoundingClientRect(),a=e.clientX-n.left,l=e.clientY-n.top;for(r in x)if(i=x[r],o=t.offsetWidth*i[0],u=t.offsetHeight*i[1],8>Math.abs(o-a)&&8>Math.abs(u-l)){T=i;break}_=!0,s.getDoc().selection.empty(),f(t,r,e)}function v(e){var n=e.srcElement;if(n!=E){if(m(),0===n.id.indexOf("mceResizeHandle"))return e.returnValue=!1,t;("IMG"==n.nodeName||"TABLE"==n.nodeName)&&(l(),E=n,h(n,"resizestart",d))}}function m(){p(E,"resizestart",d)}function g(e){var t;if(j){t=H.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function y(){E=S=null,j&&(m(),p(s.getBody(),"controlselect",v))}var b=s.dom,w=n.each,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=s.getDoc(),B=document,j=r.ie;x={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var F=".mce-content-body";return s.contentStyles.push(F+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"background: #FFF;"+"width: 5px;"+"height: 5px;"+"z-index: 10000"+"}"+F+" .mce-resizehandle:hover {"+"background: #000"+"}"+F+" img[data-mce-selected], hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+F+" .mce-clonedresizable {"+"position: absolute;"+(r.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"),s.on("init",function(){if(j)s.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(l(),g(e.target))}),h(s.getBody(),"controlselect",v);else try{s.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}s.on("nodechange mousedown ResizeEditor",c),s.on("keydown keyup",function(e){E&&"TABLE"==E.nodeName&&c(e)})}),{controlSelect:g,destroy:y}}}),r(O,[h,k,A,m,p],function(e,n,r,i,s){function o(e,t,i,s){var o=this;o.dom=e,o.win=t,o.serializer=i,o.editor=s,o.controlSelection=new r(o,s),o.win.getSelection||(o.tridentSel=new n(o))}var u=s.each,a=s.grep,f=s.trim,l=i.ie,c=i.opera;return o.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)},getContent:function(e){var n=this,r=n.getRng(),i=n.dom.create("body"),s=n.getSel(),o,u,a;return e=e||{},o=u="",e.get=!0,e.format=e.format||"html",e.selection=!0,n.editor.fire("BeforeGetContent",e),"text"==e.format?n.isCollapsed()?"":r.text||(s.toString?""+s:""):(r.cloneContents?(a=r.cloneContents(),a&&i.appendChild(a)):r.item!==t||r.htmlText!==t?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=""+r,/^\s/.test(i.innerHTML)&&(o=" "),/\s+$/.test(i.innerHTML)&&(u=" "),e.getInner=!0,e.content=n.isCollapsed()?"":o+n.serializer.serialize(i,e)+u,n.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content,r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==s&&r.endContainer==s?s.body.innerHTML=e:(r.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=s.createDocumentFragment(),u=s.createElement("div"),o.appendChild(u),u.outerHTML=e,r.insertNode(o))),i=n.dom.get("__caret"),r=s.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else r.item&&(s.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(){var e=this,t=e.getRng(),n,r,i,s;if(t.duplicate||t.item){if(t.item)return t.item(0);for(i=t.duplicate(),i.collapse(1),n=i.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),r=s=t.parentElement();s=s.parentNode;)if(s==n){n=r;break}return n}return n=t.startContainer,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]),n&&3==n.nodeType?n.parentNode:n},getEnd:function(){var e=this,t=e.getRng(),n,r;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),n&&"BODY"==n.nodeName?n.lastChild||n:n):(n=t.endContainer,r=t.endOffset,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[r>0?r-1:r]),n&&3==n.nodeType?n.parentNode:n)},getBookmark:function(e,t){function n(e,t){var n=0;return u(o.select(e),function(e,r){e==t&&(n=r)}),n}function r(e){function t(t){var n,r,i,s=t?"start":"end";n=e[s+"Container"],r=e[s+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function i(){function e(e,n){var i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],u=[],a,f,l=0;if(3==i.nodeType){if(t)for(a=i.previousSibling;a&&3==a.nodeType;a=a.previousSibling)o+=a.nodeValue.length;u.push(o)}else f=i.childNodes,o>=f.length&&f.length&&(l=1,o=Math.max(0,f.length-1)),u.push(s.dom.nodeIndex(f[o],t)+l);for(;i&&i!=r;i=i.parentNode)u.push(s.dom.nodeIndex(i,t));return u}var n=s.getRng(!0),r=o.getRoot(),i={};return i.start=e(n,!0),s.isCollapsed()||(i.end=e(n)),i}var s=this,o=s.dom,a,f,l,c,h,p,d="&#xFEFF;",v;if(2==e)return p=s.getNode(),h=p.nodeName,"IMG"==h?{name:h,index:n(h,p)}:s.tridentSel?s.tridentSel.getBookmark(e):i();if(e)return{rng:s.getRng()};if(a=s.getRng(),l=o.uniqueId(),c=s.isCollapsed(),v="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return p=a.item(0),h=p.nodeName,{name:h,index:n(h,p)};f=a.duplicate();try{a.collapse(),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+v+'">'+d+"</span>"),c||(f.collapse(!1),a.moveToElementText(f.parentElement()),0===a.compareEndPoints("StartToEnd",f)&&f.move("character",-1),f.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+v+'">'+d+"</span>"))}catch(m){return null}}else{if(p=s.getNode(),h=p.nodeName,"IMG"==h)return{name:h,index:n(h,p)};f=r(a.cloneRange()),c||(f.collapse(!1),f.insertNode(o.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:v},d))),a=r(a),a.collapse(!0),a.insertNode(o.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:v},d))}return s.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(e){function t(t){var n=e[t?"start":"end"],r,i,s,u;if(n){for(s=n[0],i=f,r=n.length-1;r>=1;r--){if(u=i.childNodes,n[r]>u.length-1)return;i=u[n[r]]}3===i.nodeType&&(s=Math.min(n[0],i.nodeValue.length)),1===i.nodeType&&(s=Math.min(n[0],i.childNodes.length)),t?o.setStart(i,s):o.setEnd(i,s)}return!0}function n(t){var n=s.get(e.id+"_"+t),r,i,o,f,l=e.keep;if(n&&(r=n.parentNode,"start"==t?(l?(r=n.firstChild,i=1):i=s.nodeIndex(n),h=p=r,d=v=i):(l?(r=n.firstChild,i=1):i=s.nodeIndex(n),p=r,v=i),!l)){for(f=n.previousSibling,o=n.nextSibling,u(a(n.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});n=s.get(e.id+"_"+t);)s.remove(n,1);f&&o&&f.nodeType==o.nodeType&&3==f.nodeType&&!c&&(i=f.nodeValue.length,f.appendData(o.nodeValue),s.remove(o),"start"==t?(h=p=f,d=v=i):(p=f,v=i))}}function r(e){return!s.isBlock(e)||e.innerHTML||l||(e.innerHTML='<br data-mce-bogus="1" />'),e}var i=this,s=i.dom,o,f,h,p,d,v;if(e)if(e.start){if(o=s.createRng(),f=s.getRoot(),i.tridentSel)return i.tridentSel.moveToBookmark(e);t(!0)&&t()&&i.setRng(o)}else e.id?(n("start"),n("end"),h&&(o=s.createRng(),o.setStart(r(h),d),o.setEnd(r(p),v),i.setRng(o))):e.name?i.select(s.select(e.name)[e.index]):e.rng&&i.setRng(e.rng)},select:function(n,r){function i(n,r){var i=new e(n,n);do{if(3==n.nodeType&&0!==f(n.nodeValue).length)return r?u.setStart(n,0):u.setEnd(n,n.nodeValue.length),t;if("BR"==n.nodeName)return r?u.setStartBefore(n):u.setEndBefore(n),t}while(n=r?i.next():i.prev())}var s=this,o=s.dom,u=o.createRng(),a;if(n){if(!r&&s.controlSelection.controlSelect(n))return;a=o.nodeIndex(n),u.setStart(n.parentNode,a),u.setEnd(n.parentNode,a+1),r&&(i(n,1),i(n)),s.setRng(u)}return n},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t=this,n,r,i,s=t.win.document;if(e&&t.tridentSel)return t.tridentSel.getRangeAt(0);try{(n=t.getSel())&&(r=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(o){}return l&&r&&r.setStart&&s.selection.createRange().item&&(i=s.selection.createRange().item(0),r=s.createRange(),r.setStartBefore(i),r.setEndAfter(i)),r||(r=s.createRange?s.createRange():s.body.createTextRange()),r.setStart&&9===r.startContainer.nodeType&&r.collapsed&&(i=t.dom.getRoot(),r.setStart(i,0),r.setEnd(i,0)),t.selectedRange&&t.explicitRange&&(0===r.compareBoundaryPoints(r.START_TO_START,t.selectedRange)&&0===r.compareBoundaryPoints(r.END_TO_END,t.selectedRange)?r=t.explicitRange:(t.selectedRange=null,t.explicitRange=null)),r},setRng:function(e,n){var r=this,i;if(e.select)try{e.select()}catch(s){}else if(r.tridentSel){if(e.cloneRange)try{return r.tridentSel.addRange(e),t}catch(s){}}else if(i=r.getSel()){r.explicitRange=e;try{i.removeAllRanges()}catch(s){}i.addRange(e),n===!1&&i.extend&&(i.collapse(e.endContainer,e.endOffset),i.extend(e.startContainer,e.startOffset)),r.selectedRange=i.rangeCount>0?i.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),r,i=n.startContainer,s=n.endContainer,o=n.startOffset,u=n.endOffset;return n?n.setStart?(r=n.commonAncestorContainer,!n.collapsed&&(i==s&&2>u-o&&i.hasChildNodes()&&(r=i.childNodes[o]),3===i.nodeType&&3===s.nodeType&&(i=i.length===o?e(i.nextSibling,!0):i.parentNode,s=0===u?e(s.previousSibling,!1):s.parentNode,i&&i===s))?i:r&&3==r.nodeType?r.parentNode:r):n.item?n.item(0):n.parentElement():t.dom.getRoot()},getSelectedBlocks:function(t,n){var r=this,i=r.dom,s,o=[];if(t=i.getParent(t||r.getStart(),i.isBlock),n=i.getParent(n||r.getEnd(),i.isBlock),t&&o.push(t),t&&n&&t!=n){s=t;for(var u=new e(t,i.getRoot());(s=u.next())&&s!=n;)i.isBlock(s)&&o.push(s)}return n&&t!=n&&o.push(n),o},isForward:function(){var e=this.dom,t=this.getSel(),n,r;return t&&t.anchorNode&&t.focusNode?(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),r=e.createRng(),r.setStart(t.focusNode,t.focusOffset),r.collapse(!0),0>=n.compareBoundaryPoints(n.START_TO_START,r)):!0},normalize:function(){function n(n){function u(t,n){for(var r=new e(t,p.getParent(t.parentNode,p.isBlock)||d);t=r[n?"prev":"next"]();)if("BR"===t.nodeName)return!0}function a(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function f(n,r){var i,u;for(r=r||l,i=new e(r,p.getParent(r.parentNode,p.isBlock)||d);v=i[n?"prev":"next"]();){if(3===v.nodeType&&v.nodeValue.length>0)return l=v,c=n?v.nodeValue.length:0,s=!0,t;if(p.isBlock(v)||m[v.nodeName.toLowerCase()])return;u=v}o&&u&&(l=u,s=!0,c=0)}var l,c,h,p=r.dom,d=p.getRoot(),v,m,g;if(l=i[(n?"start":"end")+"Container"],c=i[(n?"start":"end")+"Offset"],m=p.schema.getNonEmptyElements(),9===l.nodeType&&(l=p.getRoot(),c=0),l===d){if(n&&(v=l.childNodes[c>0?c-1:0],v&&(g=v.nodeName.toLowerCase(),m[v.nodeName]||"TABLE"==v.nodeName)))return;if(l.hasChildNodes()&&(c=Math.min(!n&&c>0?c-1:c,l.childNodes.length-1),l=l.childNodes[c],c=0,l.hasChildNodes()&&!/TABLE/.test(l.nodeName))){v=l,h=new e(l,d);do{if(3===v.nodeType&&v.nodeValue.length>0){c=n?0:v.nodeValue.length,l=v,s=!0;break}if(m[v.nodeName.toLowerCase()]){c=p.nodeIndex(v),l=v.parentNode,"IMG"!=v.nodeName||n||c++,s=!0;break}}while(v=n?h.next():h.prev())}}o&&(3===l.nodeType&&0===c&&f(!0),1===l.nodeType&&(v=l.childNodes[c],!v||"BR"!==v.nodeName||a(v,"A")||u(v)||u(v,!0)||f(!0,l.childNodes[c]))),n&&!o&&3===l.nodeType&&c===l.nodeValue.length&&f(!1),s&&i["set"+(n?"Start":"End")](l,c)}var r=this,i,s,o;l||(i=r.getRng(),o=i.collapsed,n(!0),o||n(),s&&(o&&i.collapse(!0),r.setRng(i,r.isForward())))},selectorChanged:function(e,n){var r=this,i;return r.selectorChangedData||(r.selectorChangedData={},i={},r.editor.on("NodeChange",function(e){var n=e.element,s=r.dom,o=s.getParents(n,null,s.getRoot()),a={};u(r.selectorChangedData,function(e,n){u(o,function(r){return s.is(r,n)?(i[n]||(u(e,function(e){e(!0,{node:r,selector:n,parents:o})}),i[n]=e),a[n]=e,!1):t})}),u(i,function(e,t){a[t]||(delete i[t],u(e,function(e){e(!1,{node:n,selector:t,parents:o})}))})})),r.selectorChangedData[e]||(r.selectorChangedData[e]=[]),r.selectorChangedData[e].push(n),r},scrollIntoView:function(e){var t,n,r=this,i=r.dom;n=i.getViewPort(r.editor.getWin()),t=i.getPos(e).y,(n.y>t||t+25>n.y+n.h)&&r.editor.getWin().scrollTo(0,n.y>t?t:t-n.h+25)},destroy:function(){this.win=null,this.controlSelection.destroy()}},o}),r(M,[p],function(e){function n(e){this.walk=function(n,i){function s(e){var t;return t=e[0],3===t.nodeType&&t===f&&l>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===c&&3===t.nodeType&&e.splice(e.length-1,1),e}function o(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function u(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function a(e,t,n){var r=n?"nextSibling":"previousSibling";for(m=e,g=m.parentNode;m&&m!=t;m=g)g=m.parentNode,y=o(m==e?m:m[r],r),y.length&&(n||y.reverse(),i(s(y)))}var f=n.startContainer,l=n.startOffset,c=n.endContainer,h=n.endOffset,p,d,v,m,g,y,b;if(b=e.select("td.mce-item-selected,th.mce-item-selected"),b.length>0)return r(b,function(e){i([e])}),t;if(1==f.nodeType&&f.hasChildNodes()&&(f=f.childNodes[l]),1==c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[Math.min(h-1,c.childNodes.length-1)]),f==c)return i(s([f]));for(p=e.findCommonAncestor(f,c),m=f;m;m=m.parentNode){if(m===c)return a(f,p,!0);if(m===p)break}for(m=c;m;m=m.parentNode){if(m===f)return a(c,p);if(m===p)break}d=u(f,p)||f,v=u(c,p)||c,a(f,d,!0),y=o(d==f?d:d.nextSibling,"nextSibling",v==c?v.nextSibling:v),y.length&&i(s(y)),a(c,v)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset;return n==i&&3==n.nodeType?r>0&&n.nodeValue.length>r&&(i=t(n,r),n=i.previousSibling,s>r?(s-=r,n=i=t(i,s).previousSibling,s=i.nodeValue.length,r=0):s=0):(3==n.nodeType&&r>0&&n.nodeValue.length>r&&(n=t(n,r),r=0),3==i.nodeType&&s>0&&i.nodeValue.length>s&&(i=t(i,s).previousSibling,s=i.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:s}}}var r=e.each;return n.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},n}),r(_,[h,M,p],function(e,n,r){return function(i){function s(e){return e.nodeType&&(e=e.nodeName),!!i.schema.getTextBlockElements()[e.toLowerCase()]}function o(e,t){return F.getParents(e,t,F.getRoot())}function u(e){return 1===e.nodeType&&"_mce_caret"===e.id}function a(){c({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){et(n,function(t,n){F.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),et("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){c(e,{block:e,remove:"all"})}),c(i.settings.formats)}function f(){i.addShortcut("ctrl+b","bold_desc","Bold"),i.addShortcut("ctrl+i","italic_desc","Italic"),i.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)i.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);i.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),i.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),i.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function l(e){return e?j[e]:j}function c(e,t){e&&("string"!=typeof e?et(e,function(e,t){c(t,e)}):(t=t.length?t:[t],et(t,function(e){e.deep===Q&&(e.deep=!e.selector),e.split===Q&&(e.split=!e.selector||e.inline),e.remove===Q&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),j[e]=t))}function h(e){var t;return i.dom.getParent(e,function(e){return t=i.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function p(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=h(e.parentNode),i.dom.getStyle(e,"color")&&t?i.dom.setStyle(e,"text-decoration",t):i.dom.getStyle(e,"textdecoration")===t&&i.dom.setStyle(e,"text-decoration",null))}function d(n,r,o){function a(e,t){t=t||m,e&&(t.onformat&&t.onformat(e,t,r,o),et(t.styles,function(t,n){F.setStyle(e,n,N(t,r))}),et(t.attributes,function(t,n){F.setAttrib(e,n,N(t,r))}),et(t.classes,function(t){t=N(t,r),F.hasClass(e,t)||F.addClass(e,t)}))}function f(){function t(t,n){var r=new e(n);for(o=r.current();o;o=r.prev())if(o.childNodes.length>1||o==t||"BR"==o.tagName)return o}var n=i.selection.getRng(),r=n.startContainer,s=n.endContainer;if(r!=s&&0===n.endOffset){var u=t(r,s),a=3==u.nodeType?u.length:u.childNodes.length;n.setEnd(u,a)}return n}function c(e,n,r,i,s){var o=[],u=-1,a,f=-1,l=-1,c;return et(e.childNodes,function(e,n){return"UL"===e.nodeName||"OL"===e.nodeName?(u=n,a=e,!1):t}),et(e.childNodes,function(e,t){"SPAN"===e.nodeName&&"bookmark"==F.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?f=t:e.id==n.id+"_end"&&(l=t))}),0>=u||u>f&&l>u?(et(tt(e.childNodes),s),0):(c=F.clone(r,$),et(tt(e.childNodes),function(e,t){(u>f&&u>t||f>u&&t>u)&&(o.push(e),e.parentNode.removeChild(e))}),u>f?e.insertBefore(c,a):f>u&&e.insertBefore(c,a.nextSibling),i.push(c),et(o,function(e){c.appendChild(e)}),c)}function h(e,i,o){var f=[],l,h,p=!0;l=m.inline||m.block,h=F.create(l),a(h),q.walk(e,function(e){function d(e){var b,E,S,T,N;return N=p,b=e.nodeName.toLowerCase(),E=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&G(e)&&(N=p,p="true"===G(e),T=!0),x(b,"br")?(y=0,m.block&&F.remove(e),t):m.wrapper&&g(e,n,r)?(y=0,t):p&&!T&&m.block&&!m.wrapper&&s(b)&&R(E,l)?(e=F.rename(e,l),a(e),f.push(e),y=0,t):m.selector&&(et(v,function(t){"collapsed"in t&&t.collapsed!==w||F.is(e,t.selector)&&!u(e)&&(a(e,t),S=!0)}),!m.inline||S)?(y=0,t):(!p||T||!R(l,b)||!R(E,l)||!o&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||u(e)||m.inline&&U(e)?"li"==b&&i?y=c(e,i,h,f,d):(y=0,et(tt(e.childNodes),d),T&&(p=N),y=0):(y||(y=F.clone(h,$),e.parentNode.insertBefore(y,e),f.push(y)),y.appendChild(e)),t)}var y;et(e,d)}),m.wrap_links===!1&&et(f,function(e){function t(e){var n,r,i;if("A"===e.nodeName){for(r=F.clone(h,$),f.push(r),i=tt(e.childNodes),n=0;i.length>n;n++)r.appendChild(i[n]);e.appendChild(r)}et(tt(e.childNodes),t)}t(e)}),et(f,function(e){function i(e){var t=0;return et(e.childNodes,function(e){C(e)||_(e)||t++}),t}function s(e){var n,r;return et(e.childNodes,function(e){return 1!=e.nodeType||_(e)||u(e)?t:(n=e,$)}),n&&S(n,m)&&(r=F.clone(n,$),a(r),F.replace(r,e,J),F.remove(n,1)),r||e}var o;if(o=i(e),(f.length>1||!U(e))&&0===o)return F.remove(e,1),t;if(m.inline||m.wrapper){if(m.exact||1!==o||(e=s(e)),et(v,function(t){et(F.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if("A"===n.nodeName)return;while(n=n.parentNode)}A(t,r,e,t.exact?e:null)})}),g(e.parentNode,n,r))return F.remove(e,1),e=0,J;m.merge_with_parents&&F.getParent(e.parentNode,function(i){return g(i,n,r)?(F.remove(e,1),e=0,J):t}),e&&m.merge_siblings!==!1&&(e=D(M(e),e),e=D(e,M(e,J)))}})}var v=l(n),m=v[0],y,b,w=!o&&I.isCollapsed();if(m)if(o)o.nodeType?(b=F.createRng(),b.setStartBefore(o),b.setEndAfter(o),h(L(b,v),null,!0)):h(o,null,!0);else if(w&&m.inline&&!F.select("td.mce-item-selected,th.mce-item-selected").length)H("apply",n,r);else{var E=i.selection.getNode();z||!v[0].defaultBlock||F.getParent(E,F.isBlock)||d(v[0].defaultBlock),i.selection.setRng(f()),y=I.getBookmark(),h(L(I.getRng(J),v),y),m.styles&&(m.styles.color||m.styles.textDecoration)&&(nt(E,p,"childNodes"),p(E)),I.moveToBookmark(y),B(I.getRng(J)),i.nodeChanged()}}function v(e,n,r){function s(e){var t,r,i,o,u;if(1===e.nodeType&&G(e)&&(o=w,w="true"===G(e),u=!0),t=tt(e.childNodes),w&&!u)for(r=0,i=d.length;i>r&&!A(d[r],n,e,e);r++);if(v.deep&&t.length){for(r=0,i=t.length;i>r;r++)s(t[r]);u&&(w=o)}}function u(t){var r;return et(o(t.parentNode).reverse(),function(t){var i;r||"_start"==t.id||"_end"==t.id||(i=g(t,e,n),i&&i.split!==!1&&(r=t))}),r}function a(e,t,r,i){var s,o,u,a,f,l;if(e){for(l=e.parentNode,s=t.parentNode;s&&s!=l;s=s.parentNode){for(o=F.clone(s,$),f=0;d.length>f;f++)if(A(d[f],n,o,o)){o=0;break}o&&(u&&o.appendChild(u),a||(a=o),u=o)}!i||v.mixed&&U(e)||(t=F.split(e,t)),u&&(r.parentNode.insertBefore(u,r),a.appendChild(r))}return t}function f(e){return a(u(e),e,e,!0)}function c(e){var t=F.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return _(n)&&(n=n[e?"firstChild":"lastChild"]),F.remove(t,!0),n}function p(e){var t,n;e=L(e,d,J),v.split&&(t=P(e,J),n=P(e),t!=n?(/^(TR|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TD"==t.nodeName?t.firstChild||t:t.firstChild.firstChild||t),t=k(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=k(n,"span",{id:"_end","data-mce-type":"bookmark"}),f(t),f(n),t=c(J),n=c()):t=n=f(t),e.startContainer=t.parentNode,e.startOffset=W(t),e.endContainer=n.parentNode,e.endOffset=W(n)+1),q.walk(e,function(e){et(e,function(e){s(e),1===e.nodeType&&"underline"===i.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===h(e.parentNode)&&A({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var d=l(e),v=d[0],m,b,w=!0;return r?(r.nodeType?(b=F.createRng(),b.setStartBefore(r),b.setEndAfter(r),p(b)):p(r),t):(I.isCollapsed()&&v.inline&&!F.select("td.mce-item-selected,th.mce-item-selected").length?H("remove",e,n):(m=I.getBookmark(),p(I.getRng(J)),I.moveToBookmark(m),v.inline&&y(e,n,I.getStart())&&B(I.getRng(!0)),i.nodeChanged()),t)}function m(e,t,n){var r=l(e);!y(e,t,n)||"toggle"in r[0]&&!r[0].toggle?d(e,t,n):v(e,t,n)}function g(e,t,n,r){function i(e,t,i){var s,o,u=t[i],a;if(t.onmatch)return t.onmatch(e,t,i);if(u)if(u.length===Q){for(s in u)if(u.hasOwnProperty(s)){if(o="attributes"===i?F.getAttrib(e,s):T(e,s),r&&!o&&!t.exact)return;if((!r||t.exact)&&!x(o,N(u[s],n)))return}}else for(a=0;u.length>a;a++)if("attributes"===i?F.getAttrib(e,u[a]):T(e,u[a]))return t;return t}var s=l(t),o,u,a;if(s&&e)for(u=0;s.length>u;u++)if(o=s[u],S(e,o)&&i(e,o,"attributes")&&i(e,o,"styles")){if(a=o.classes)for(u=0;a.length>u;u++)if(!F.hasClass(e,a[u]))return;return o}}function y(e,t,n){function r(n){return n=F.getParent(n,function(n){return!!g(n,e,t,!0)}),g(n,e,t)}var i;return n?r(n):(n=I.getNode(),r(n)?J:(i=I.getStart(),i!=n&&r(i)?J:$))}function b(e,t){var n,r=[],i={};return n=I.getStart(),F.getParent(n,function(n){var s,o;for(s=0;e.length>s;s++)o=e[s],!i[o]&&g(n,o,t)&&(i[o]=!0,r.push(o))},F.getRoot()),r}function w(e){var t=l(e),n,r,i,s,u;if(t)for(n=I.getStart(),r=o(n),s=t.length-1;s>=0;s--){if(u=t[s].selector,!u)return J;for(i=r.length-1;i>=0;i--)if(F.is(r[i],u))return J}return $}function E(e,n,r){var s;return K||(K={},s={},i.on("NodeChange",function(e){var n=o(e.element),r={};et(K,function(e,i){et(n,function(o){return g(o,i,{},e.similar)?(s[i]||(et(e,function(e){e(!0,{node:o,format:i,parents:n})}),s[i]=e),r[i]=e,!1):t})}),et(s,function(t,i){r[i]||(delete s[i],et(t,function(t){t(!1,{node:e.element,format:i,parents:n})}))})})),et(e.split(","),function(e){K[e]||(K[e]=[],K[e].similar=r),K[e].push(n)}),this}function S(e,n){return x(e,n.inline)?J:x(e,n.block)?J:n.selector?1==e.nodeType&&F.is(e,n.selector):t}function x(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function T(e,t){var n=F.getStyle(e,t);return("color"==t||"backgroundColor"==t)&&(n=F.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function N(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function C(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function k(e,t,n){var r=F.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function L(n,r,u){function a(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,i,s,o,u;if(n=i=e?g:b,o=e?"previousSibling":"nextSibling",u=F.getRoot(),3==n.nodeType&&!C(n)&&(e?y>0:n.nodeValue.length>w))return n;for(;;){if(!r[0].block_expand&&U(i))return i;for(s=i[o];s;s=s[o])if(!_(s)&&!C(s)&&!t(s))return i;if(i.parentNode==u){n=i;break}i=i.parentNode}return n}function f(e,t){for(t===Q&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function l(e){for(var t=e;t;){if(1===t.nodeType&&G(t))return"false"===G(t)?t:e;t=t.parentNode}return e}function c(n,r,s){function o(e,n){var r,i,o=e.nodeValue;return n===t&&(n=s?o.length:0),s?(r=o.lastIndexOf(" ",n),i=o.lastIndexOf(" ",n),r=r>i?r:i,-1===r||u||r++):(r=o.indexOf(" ",n),i=o.indexOf(" ",n),r=-1!==r&&(-1===i||i>r)?r:i),r}var a,f,l,c;if(3===n.nodeType){if(l=o(n,r),-1!==l)return{container:n,offset:l};c=n}for(a=new e(n,F.getParent(n,U)||i.getBody());f=a[s?"prev":"next"]();)if(3===f.nodeType){if(c=f,l=o(f),-1!==l)return{container:f,offset:l}}else if(U(f))break;return c?(r=s?0:c.length,{container:c,offset:r}):t}function h(e,t){var i,s,u,a;for(3==e.nodeType&&0===e.nodeValue.length&&e[t]&&(e=e[t]),i=o(e),s=0;i.length>s;s++)for(u=0;r.length>u;u++)if(a=r[u],!("collapsed"in a&&a.collapsed!==n.collapsed)&&F.is(i[s],a.selector))return i[s];return e}function p(e,t){var n;if(r[0].wrapper||(n=F.getParent(e,r[0].block)),n||(n=F.getParent(3==e.nodeType?e.parentNode:e,s)),n&&r[0].wrapper&&(n=o(n,"ul,ol").reverse()[0]||n),!n)for(n=e;n[t]&&!U(n[t])&&(n=n[t],!x(n,"br")););return n||e}var d,v,m,g=n.startContainer,y=n.startOffset,b=n.endContainer,w=n.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(d=g.childNodes.length-1,g=g.childNodes[y>d?d:y],3==g.nodeType&&(y=0)),1==b.nodeType&&b.hasChildNodes()&&(d=b.childNodes.length-1,b=b.childNodes[w>d?d:w-1],3==b.nodeType&&(w=b.nodeValue.length)),g=l(g),b=l(b),(_(g.parentNode)||_(g))&&(g=_(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(y=0)),(_(b.parentNode)||_(b))&&(b=_(b)?b:b.parentNode,b=b.previousSibling||b,3==b.nodeType&&(w=b.length)),r[0].inline&&(n.collapsed&&(m=c(g,y,!0),m&&(g=m.container,y=m.offset),m=c(b,w),m&&(b=m.container,w=m.offset)),v=f(b,w),v.node)){for(;v.node&&0===v.offset&&v.node.previousSibling;)v=f(v.node.previousSibling);v.node&&v.offset>0&&3===v.node.nodeType&&" "===v.node.nodeValue.charAt(v.offset-1)&&v.offset>1&&(b=v.node,b.splitText(v.offset-1))}return(r[0].inline||r[0].block_expand)&&(r[0].inline&&3==g.nodeType&&0!==y||(g=a(!0)),r[0].inline&&3==b.nodeType&&w!==b.nodeValue.length||(b=a())),r[0].selector&&r[0].expand!==$&&!r[0].inline&&(g=h(g,"previousSibling"),b=h(b,"nextSibling")),(r[0].block||r[0].selector)&&(g=p(g,"previousSibling"),b=p(b,"nextSibling"),r[0].block&&(U(g)||(g=a(!0)),U(b)||(b=a()))),1==g.nodeType&&(y=W(g),g=g.parentNode),1==b.nodeType&&(w=W(b)+1,b=b.parentNode),{startContainer:g,startOffset:y,endContainer:b,endOffset:w}}function A(e,n,r,i){var s,o,u;if(!S(r,e))return $;if("all"!=e.remove)for(et(e.styles,function(e,t){e=N(e,n),"number"==typeof t&&(t=e,i=0),(!i||x(T(i,t),e))&&F.setStyle(r,t,""),u=1}),u&&""===F.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),et(e.attributes,function(e,s){var o;if(e=N(e,n),"number"==typeof s&&(s=e,i=0),!i||x(F.getAttrib(i,s),e)){if("class"==s&&(e=F.getAttrib(r,s),e&&(o="",et(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return F.setAttrib(r,s,o),t;"class"==s&&r.removeAttribute("className"),V.test(s)&&r.removeAttribute("data-mce-"+s),r.removeAttribute(s)}}),et(e.classes,function(e){e=N(e,n),(!i||F.hasClass(i,e))&&F.removeClass(r,e)}),o=F.getAttribs(r),s=0;o.length>s;s++)if(0!==o[s].nodeName.indexOf("_"))return $;return"none"!=e.remove?(O(r,e),J):t}function O(e,t){function n(e,t,n){return e=M(e,t,n),!e||"BR"==e.nodeName||U(e)}var r=e.parentNode,i;t.block&&(z?r==F.getRoot()&&(t.list_block&&x(e,t.list_block)||et(tt(e.childNodes),function(e){R(z,e.nodeName.toLowerCase())?i?i.appendChild(e):i=k(e,z):i=0})):U(e)&&!U(r)&&(n(e,$)||n(e.firstChild,J,1)||e.insertBefore(F.create("br"),e.firstChild),n(e,J)||n(e.lastChild,$,1)||e.appendChild(F.create("br")))),t.selector&&t.inline&&!x(t.inline,e)||F.remove(e,1)}function M(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!C(e))return e}function _(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function D(e,t){function n(e,t){function n(e){var t={};return et(F.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&(t[r]=F.getAttrib(e,r))}),t}function r(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],n===Q)return $;if(e[r]!=n)return $;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return $;return J}return e.nodeName!=t.nodeName?$:r(n(e),n(t))?r(F.parseStyle(F.getAttrib(e,"style")),F.parseStyle(F.getAttrib(t,"style")))?J:$:$}function r(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!_(i))return i}return e}var i,s;if(e&&t&&(e=r(e,"previousSibling"),t=r(t,"nextSibling")
,n(e,t))){for(i=e.nextSibling;i&&i!=t;)s=i,i=i.nextSibling,e.appendChild(s);return F.remove(t),et(tt(t.childNodes),function(t){e.appendChild(t)}),e}return t}function P(t,n){var r,s,o;return r=t[n?"startContainer":"endContainer"],s=t[n?"startOffset":"endOffset"],1==r.nodeType&&(o=r.childNodes.length-1,!n&&s&&s--,r=r.childNodes[s>o?o:s]),3===r.nodeType&&n&&s>=r.nodeValue.length&&(r=(new e(r,i.getBody())).next()||r),3!==r.nodeType||n||0!==s||(r=(new e(r,i.getBody())).prev()||r),r}function H(t,n,r){function s(e){var t=F.create("span",{id:m,"data-mce-bogus":!0,style:y?"color:red":""});return e&&t.appendChild(i.getDoc().createTextNode(X)),t}function o(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==X||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function u(e){for(;e;){if(e.id===m)return e;e=e.parentNode}}function a(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function f(e,t){var n,r;if(e)r=I.getRng(!0),o(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),F.remove(e)):(n=a(e),n.nodeValue.charAt(0)===X&&(n=n.deleteData(0,1)),F.remove(e,1)),I.setRng(r);else if(e=u(I.getStart()),!e)for(;e=F.get(m);)f(e,!1)}function c(){var e,t,i,o,f,c,h;e=I.getRng(!0),o=e.startOffset,c=e.startContainer,h=c.nodeValue,t=u(I.getStart()),t&&(i=a(t)),h&&o>0&&h.length>o&&/\w/.test(h.charAt(o))&&/\w/.test(h.charAt(o-1))?(f=I.getBookmark(),e.collapse(!0),e=L(e,l(n)),e=q.split(e),d(n,r,e),I.moveToBookmark(f)):(t&&i.nodeValue===X?d(n,r,t):(t=s(!0),i=t.firstChild,e.insertNode(t),o=1,d(n,r,t)),I.setCursorLocation(i,o))}function h(){var e=I.getRng(!0),t,i,o,u,a,f,c=[],h,p;for(t=e.startContainer,i=e.startOffset,a=t,3==t.nodeType&&((i!=t.nodeValue.length||t.nodeValue===X)&&(u=!0),a=a.parentNode);a;){if(g(a,n,r)){f=a;break}a.nextSibling&&(u=!0),c.push(a),a=a.parentNode}if(f)if(u)o=I.getBookmark(),e.collapse(!0),e=L(e,l(n),!0),e=q.split(e),v(n,r,e),I.moveToBookmark(o);else{for(p=s(),a=p,h=c.length-1;h>=0;h--)a.appendChild(F.clone(c[h],!1)),a=a.firstChild;a.appendChild(F.doc.createTextNode(X)),a=a.firstChild,F.insertAfter(p,f),I.setCursorLocation(a,1)}}function p(){var e;e=u(I.getStart()),e&&!F.isEmpty(e)&&nt(e,function(e){1!=e.nodeType||e.id===m||F.isEmpty(e)||F.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var m="_mce_caret",y=i.settings.caret_debug;i._hasCaretEvents||(Z=function(){var e=[],t;if(o(u(I.getStart()),e))for(t=e.length;t--;)F.setAttrib(e[t],"data-mce-bogus","1")},Y=function(e){var t=e.keyCode;f(),(8==t||37==t||39==t)&&f(u(I.getStart())),p()},i.on("SetContent",function(e){e.selection&&p()}),i._hasCaretEvents=!0),"apply"==t?c():h()}function B(n){var r=n.startContainer,i=n.startOffset,s,o,u,a,f;if(3==r.nodeType&&i>=r.nodeValue.length&&(i=W(r),r=r.parentNode,s=!0),1==r.nodeType)for(a=r.childNodes,r=a[Math.min(i,a.length-1)],o=new e(r,F.getParent(r,F.isBlock)),(i>a.length-1||s)&&o.next(),u=o.current();u;u=o.next())if(3==u.nodeType&&!C(u))return f=F.create("a",null,X),u.parentNode.insertBefore(f,u),n.setStart(u,0),I.setRng(n),F.remove(f),t}var j={},F=i.dom,I=i.selection,q=new n(F),R=i.schema.isValidChild,U=F.isBlock,z=i.settings.forced_root_block,W=F.nodeIndex,X="﻿",V=/^(src|href|style)$/,$=!1,J=!0,K,Q,G=F.getContentEditable,Y,Z,et=r.each,tt=r.grep,nt=r.walk,rt=r.extend;rt(this,{get:l,register:c,apply:d,remove:v,toggle:m,match:y,matchAll:b,matchNode:g,canApply:w,formatChanged:E}),a(),f(),i.on("BeforeGetContent",function(){Z&&Z()}),i.on("mouseup keydown",function(e){Y&&Y(e)})}}),r(D,[m,p],function(e,n){var r=n.trim,i;return i=RegExp(["<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>","<div[^>]+data-mce-bogus[^>]+><\\/div>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(n){function s(){return r(n.getContent({format:"raw",no_events:1}).replace(i,""))}function o(){u.typing=!1,u.add()}var u,a=0,f=[],l;return n.on("init",function(){u.add()}),n.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&u.beforeChange()}),n.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&u.add()}),n.on("ObjectResizeStart",function(){u.beforeChange()}),n.on("SaveContent ObjectResized",o),n.dom.bind(n.dom.getRoot(),"dragend",o),n.dom.bind(n.getBody(),"focusout",function(){!n.removed&&u.typing&&o()}),n.on("KeyUp",function(t){var r=t.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||t.ctrlKey)&&(o(),n.nodeChanged()),(46==r||8==r||e.isMac&&(91==r||93==r))&&n.nodeChanged()}),n.on("KeyDown",function(e){var n=e.keyCode;return n>=33&&36>=n||n>=37&&40>=n||45==n?(u.typing&&o(),t):((16>n||n>20)&&224!=n&&91!=n&&!u.typing&&(u.beforeChange(),u.typing=!0,u.add()),t)}),n.on("MouseDown",function(){u.typing&&o()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),n.on("AddUndo Undo Redo ClearUndos MouseUp",function(e){e.isDefaultPrevented()||n.nodeChanged()}),u={data:f,typing:!1,beforeChange:function(){l=n.selection.getBookmark(2,!0)},add:function(e){var t,r=n.settings,i;if(e=e||{},e.content=s(),n.fire("BeforeAddUndo",{level:e}).isDefaultPrevented())return null;if(i=f[a],i&&i.content==e.content)return null;if(f[a]&&(f[a].beforeBookmark=l),r.custom_undo_redo_levels&&f.length>r.custom_undo_redo_levels){for(t=0;f.length-1>t;t++)f[t]=f[t+1];f.length--,a=f.length}return e.bookmark=n.selection.getBookmark(2,!0),f.length-1>a&&(f.length=a+1),f.push(e),a=f.length-1,n.fire("AddUndo",{level:e,lastLevel:i}),n.isNotDirty=0,e},undo:function(){var e;return u.typing&&(u.add(),u.typing=!1),a>0&&(e=f[--a],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),n.fire("undo",{level:e})),e},redo:function(){var e;return f.length-1>a&&(e=f[++a],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),n.fire("redo",{level:e})),e},clear:function(){f=[],a=0,u.typing=!1,n.fire("ClearUndos")},hasUndo:function(){return a>0||u.typing&&f[0]&&s()!=f[0].content},hasRedo:function(){return f.length-1>a&&!this.typing},transact:function(e){u.beforeChange(),e(),u.add()}}}}),r(P,[h,m],function(e,n){var r=n.ie;return function(n){function i(i){function c(e){return e&&s.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==s.getContentEditable(e)}function h(e){var t;s.isBlock(e)&&(t=o.getRng(),e.appendChild(s.create("span",null," ")),o.select(e),e.lastChild.outerHTML="",o.setRng(t))}function p(e){for(var t=e,n=[],r;t=t.firstChild;){if(s.isBlock(t))return;1!=t.nodeType||l[t.nodeName.toLowerCase()]||n.push(t)}for(r=n.length;r--;)t=n[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?s.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&s.remove(t)}function d(t){var n,r,i,u=t,a;if(i=s.createRng(),t.hasChildNodes()){for(n=new e(t,t);r=n.current();){if(3==r.nodeType){i.setStart(r,0),i.setEnd(r,0);break}if(l[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}u=r,r=n.next()}r||(i.setStart(u,0),i.setEnd(u,0))}else"BR"==t.nodeName?t.nextSibling&&s.isBlock(t.nextSibling)?((!O||9>O)&&(a=s.create("br"),t.parentNode.insertBefore(a,t)),i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));o.setRng(i),s.remove(a),o.scrollIntoView(t)}function v(e){var t=k,n,i,o;if(n=e||"TABLE"==H?s.create(e||j):A.cloneNode(!1),o=n,u.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(t.nodeName)){if("_mce_caret"==t.id)continue;i=t.cloneNode(!1),s.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(o=i,n.appendChild(i))}while(t=t.parentNode);return r||(o.innerHTML='<br data-mce-bogus="1">'),n}function m(t){var n,r,i;if(3==k.nodeType&&(t?L>0:k.nodeValue.length>L))return!1;if(k.parentNode==A&&F&&!t)return!0;if(t&&1==k.nodeType&&k==A.firstChild)return!0;if("TABLE"===k.nodeName||k.previousSibling&&"TABLE"==k.previousSibling.nodeName)return F&&!t||!F&&t;for(n=new e(k,A),3==k.nodeType&&(t&&0===L?n.prev():t||L!=k.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),l[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function g(e,t){var r,i,o,u,a,l,h=j||"P";if(i=s.getParent(e,s.isBlock),l=n.getBody().nodeName.toLowerCase(),!i||!c(i)){if(i=i||C,!i.hasChildNodes())return r=s.create(h),i.appendChild(r),T.setStart(r,0),T.setEnd(r,0),r;for(u=e;u.parentNode!=i;)u=u.parentNode;for(;u&&!s.isBlock(u);)o=u,u=u.previousSibling;if(o&&f.isValidChild(l,h.toLowerCase())){for(r=s.create(h),o.parentNode.insertBefore(r,o),u=o;u&&!s.isBlock(u);)a=u.nextSibling,r.appendChild(u),u=a;T.setStart(e,t),T.setEnd(e,t)}}return e}function y(){function e(e){for(var t=P[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===A}function t(){var e=P.parentNode;return"LI"==e.nodeName?e:P}var n=P.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(j="LI"),_=j?v(j):s.create("BR"),e(!0)&&e()?"LI"==n?s.insertAfter(_,t()):s.replace(_,P):e(!0)?"LI"==n?(s.insertAfter(_,t()),_.appendChild(s.doc.createTextNode(" ")),_.appendChild(P)):P.parentNode.insertBefore(_,P):e()?(s.insertAfter(_,t()),h(_)):(P=t(),N=T.cloneRange(),N.setStartAfter(A),N.setEndAfter(P),D=N.extractContents(),s.insertAfter(D,P),s.insertAfter(_,P)),s.remove(A),d(_),a.add()}function b(){for(var t=new e(k,A),n;n=t.next();)if(l[n.nodeName.toLowerCase()]||n.length>0)return!0}function w(){var e,t,n;k&&3==k.nodeType&&L>=k.nodeValue.length&&(r||b()||(e=s.create("br"),T.insertNode(e),T.setStartAfter(e),T.setEndAfter(e),t=!0)),e=s.create("br"),T.insertNode(e),r&&"PRE"==H&&(!O||8>O)&&e.parentNode.insertBefore(s.doc.createTextNode("\r"),e),n=s.create("span",{},"&nbsp;"),e.parentNode.insertBefore(n,e),o.scrollIntoView(n),s.remove(n),t?(T.setStartBefore(e),T.setEndBefore(e)):(T.setStartAfter(e),T.setEndAfter(e)),o.setRng(T),a.add()}function E(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function S(e){var t=s.getRoot(),n,r;for(n=e;n!==t&&"false"!==s.getContentEditable(n);)"true"===s.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==t?r:t}function x(e){var t;r||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(s.getStyle(t,"float",!0)))&&s.add(e,"br"))}var T=o.getRng(!0),N,C,k,L,A,O,M,_,D,P,H,B,j,F;if(!T.collapsed)return n.execCommand("Delete"),t;if(!i.isDefaultPrevented()&&(k=T.startContainer,L=T.startOffset,j=(u.force_p_newlines?"p":"")||u.forced_root_block,j=j?j.toUpperCase():"",O=s.doc.documentMode,M=i.shiftKey,1==k.nodeType&&k.hasChildNodes()&&(F=L>k.childNodes.length-1,k=k.childNodes[Math.min(L,k.childNodes.length-1)]||k,L=F&&3==k.nodeType?k.nodeValue.length:0),C=S(k))){if(a.beforeChange(),!s.isBlock(C)&&C!=s.getRoot())return(!j||M)&&w(),t;if((j&&!M||!j&&M)&&(k=g(k,L)),A=s.getParent(k,s.isBlock),P=A?s.getParent(A.parentNode,s.isBlock):null,H=A?A.nodeName.toUpperCase():"",B=P?P.nodeName.toUpperCase():"","LI"!=B||i.ctrlKey||(A=P,H=B),"LI"==H){if(!j&&M)return w(),t;if(s.isEmpty(A))return y(),t}if("PRE"==H&&u.br_in_pre!==!1){if(!M)return w(),t}else if(!j&&!M&&"LI"!=H||j&&M)return w(),t;j&&A===n.getBody()||(j=j||"P",m()?(_=/^(H[1-6]|PRE|FIGURE)$/.test(H)&&"HGROUP"!=B?v(j):v(),u.end_container_on_empty_block&&c(P)&&s.isEmpty(A)?_=s.split(P,A):s.insertAfter(_,A),d(_)):m(!0)?(_=A.parentNode.insertBefore(v(),A),h(_)):(N=T.cloneRange(),N.setEndAfter(A),D=N.extractContents(),E(D),_=D.firstChild,s.insertAfter(D,A),p(_),x(A),d(_)),s.setAttrib(_,"id",""),a.add())}}var s=n.dom,o=n.selection,u=n.settings,a=n.undoManager,f=n.schema,l=f.getNonEmptyElements();n.on("keydown",function(e){13==e.keyCode&&i(e)!==!1&&e.preventDefault()})}}),r(H,[],function(){return function(e){function t(){var t=i.getStart(),u=e.getBody(),a,f,l,c,h,p,d,v=-16777215,m,g,y,b,w;if(w=n.forced_root_block,t&&1===t.nodeType&&w){for(;t&&t!=u;){if(o[t.nodeName])return;t=t.parentNode}if(a=i.getRng(),a.setStart){f=a.startContainer,l=a.startOffset,c=a.endContainer,h=a.endOffset;try{g=e.getDoc().activeElement===u}catch(E){}}else a.item&&(t=a.item(0),a=e.getDoc().body.createTextRange(),a.moveToElementText(t)),g=a.parentElement().ownerDocument===e.getDoc(),y=a.duplicate(),y.collapse(!0),l=-1*y.move("character",v),y.collapsed||(y=a.duplicate(),y.collapse(!1),h=-1*y.move("character",v)-l);for(t=u.firstChild,b=u.nodeName.toLowerCase();t;)if((3===t.nodeType||1==t.nodeType&&!o[t.nodeName])&&s.isValidChild(b,w.toLowerCase())){if(3===t.nodeType&&0===t.nodeValue.length){d=t,t=t.nextSibling,r.remove(d);continue}p||(p=r.create(w),t.parentNode.insertBefore(p,t),m=!0),d=t,t=t.nextSibling,p.appendChild(d)}else p=null,t=t.nextSibling;if(m&&g){if(a.setStart)a.setStart(f,l),a.setEnd(c,h),i.setRng(a);else try{a=e.getDoc().body.createTextRange(),a.moveToElementText(u),a.collapse(!0),a.moveStart("character",l),h>0&&a.moveEnd("character",h),a.select()}catch(E){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,s=e.schema,o=s.getBlockElements();n.forced_root_block&&e.on("KeyUp NodeChange",t)}}),r(B,[N,m,p],function(e,n,r){var i=r.each,s=r.extend,o=r.map,u=r.inArray,a=r.explode,f=n.gecko,l=n.ie,c=!0,h=!1;return function(n){function r(e,t,n){var r;return e=e.toLowerCase(),(r=x.exec[e])?(r(e,t,n),c):h}function p(e){var t;return e=e.toLowerCase(),(t=x.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=x.value[e])?t(e):h}function v(e,t){t=t||"exec",i(e,function(e,n){i(n.toLowerCase().split(","),function(n){x[t][n]=e})})}function m(e,r,i){return r===t&&(r=h),i===t&&(i=null),n.getDoc().execCommand(e,r,i)}function g(e){return N.match(e)}function y(e,r){N.toggle(e,r?{value:r}:t),n.nodeChanged()}function b(e){C=S.getBookmark(e)}function w(){S.moveToBookmark(C)}var E=n.dom,S=n.selection,x={state:{},exec:{},value:{}},T=n.settings,N=n.formatter,C;s(this,{execCommand:r,queryCommandState:p,queryCommandValue:d,addCommands:v}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(e){var t=n.getDoc(),r;try{m(e)}catch(i){r=c}(r||!t.queryCommandSupported(e))&&(f?n.windowManager.confirm(n.getLang("clipboard_msg"),function(e){e&&window.open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):n.windowManager.alert("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."))},unlink:function(e){S.isCollapsed()&&S.select(S.getNode()),m(e),S.collapse(h)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),i("left,center,right,justify".split(","),function(e){t!=e&&N.remove("align"+e)}),y("align"+t),r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;m(e),t=E.getParent(S.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),E.split(n,t),w()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=a(T.font_size_style_values),r=a(T.font_size_classes),n=r?r[n-1]||n:i[n-1]||n),y(e,n)},RemoveFormat:function(e){N.remove(e)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var e=S.getBookmark();n.setContent(n.getContent({cleanup:c}),{cleanup:c}),S.moveToBookmark(e)},mceRemoveNode:function(e,t,r){var i=r||S.getNode();i!=n.getBody()&&(b(),n.dom.remove(i,c),w())},mceSelectNodeDepth:function(e,r,i){var s=0;E.getParent(S.getNode(),function(e){return 1==e.nodeType&&s++==i?(S.select(e),h):t},n.getBody())},mceSelectNode:function(e,t,n){S.select(n)},mceInsertContent:function(t,r,i){function s(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=S.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r.length>i?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}var o,u,a,f,c,h,p,d,v,m,g,y,b,w;if(/^ | $/.test(i)&&(i=s(i)),o=n.parser,u=new e({},n.schema),b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',h={content:i,format:"html",selection:!0},n.fire("BeforeSetContent",h),i=h.content,-1==i.indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,b),S.isCollapsed()||n.getDoc().execCommand("Delete",!1,null),a=S.getNode(),h={context:a.nodeName.toLowerCase()},c=o.parse(i,h),g=c.lastChild,"mce_marker"==g.attr("id"))for(p=g,g=g.prev;g;g=g.walk(!0))if(3==g.type||!E.isBlock(g.name)){g.parent.insert(p,g,"br"===g.name);break}if(h.invalid){for(S.setContent(b),a=S.getNode(),f=n.getBody(),9==a.nodeType?a=g=f:g=a;g!==f;)a=g,g=g.parentNode;i=a==f?f.innerHTML:E.getOuterHTML(a),i=u.serialize(o.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return u.serialize(c)}))),a==f?E.setHTML(f,i):E.setOuterHTML(a,i)}else i=u.serialize(c),g=a.firstChild,y=a.lastChild,!g||g===y&&"BR"===g.nodeName?E.setHTML(a,i):S.setContent(i);p=E.get("mce_marker"),d=E.getRect(p),v=E.getViewPort(n.getWin()),(d.y+d.h>v.y+v.h||d.y<v.y||d.x>v.x+v.w||d.x<v.x)&&(w=l?n.getDoc().documentElement:n.getBody(),w.scrollLeft=d.x,w.scrollTop=d.y-v.h+25),m=E.createRng(),g=p.previousSibling,g&&3==g.nodeType?(m.setStart(g,g.nodeValue.length),l||(y=p.nextSibling,y&&3==y.nodeType&&(g.appendData(y.data),y.parentNode.removeChild(y)))):(m.setStartBefore(p),m.setEndBefore(p)),E.remove(p),S.setRng(m),n.fire("SetContent",h),n.addVisual()},mceInsertRawHTML:function(e,t,r){S.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return r}))},mceToggleFormat:function(e,t,n){y(n)},mceSetContent:function(e,t,r){n.setContent(r)},"Indent,Outdent":function(e){var t,n,r;t=T.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),p("InsertUnorderedList")||p("InsertOrderedList")?m(e):(T.forced_root_block||E.getParent(S.getNode(),E.isBlock)||N.apply("div"),i(S.getSelectedBlocks(),function(i){var s;"LI"!=i.nodeName&&(s="rtl"==E.getStyle(i,"direction",!0)?"paddingRight":"paddingLeft","outdent"==e?(r=Math.max(0,parseInt(i.style[s]||0,10)-t),E.setStyle(i,s,r?r+n:"")):(r=parseInt(i.style[s]||0,10)+t+n,E.setStyle(i,s,r)))}))},mceRepaint:function(){if(f)try{b(c),S.getSel()&&S.getSel().selectAllChildren(n.getBody()),S.collapse(c),w()}catch(e){}},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(e,t,r){n.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,S.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=E.getParent(S.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||N.remove("link"),n.href&&N.apply("link",n,r)},selectAll:function(){var e=E.getRoot(),t=E.createRng();S.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),S.setRng(t)):m("SelectAll")},mceNewDocument:function(){n.setContent("")}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=S.isCollapsed()?[E.getParent(S.getNode(),E.isBlock)]:S.getSelectedBlocks(),r=o(n,function(e){return!!N.matchNode(e,t)});return-1!==u(r,c)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return g(e)},mceBlockQuote:function(){return g("blockquote")},Outdent:function(){var e;if(T.inline_styles){if((e=E.getParent(S.getStart(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return c;if((e=E.getParent(S.getEnd(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return c}return p("InsertUnorderedList")||p("InsertOrderedList")||!T.inline_styles&&!!E.getParent(S.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=E.getParent(S.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),v({"FontSize,FontName":function(e){var t=0,n;return(n=E.getParent(S.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),v({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),r(j,[p],function(e){function n(e,s){var o=this,u,a;return e=i(e),s=o.settings=s||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?(o.source=e,t):(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(s.base_uri?s.base_uri.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(a=s.base_uri?s.base_uri.path:(new n(location.href)).directory,e=(s.base_uri&&s.base_uri.protocol||"http")+"://mce_host"+o.toAbsPath(a,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),r(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),o[t]=r}),u=s.base_uri,u&&(o.protocol||(o.protocol=u.protocol),o.userInfo||(o.userInfo=u.userInfo),o.port||"mce_host"!==o.host||(o.port=u.port),o.host&&"mce_host"!==o.host||(o.host=u.host),o.source=""),t)}var r=e.each,i=e.trim;return n.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,r;if("./"===e)return e;if(e=new n(e,{base_uri:t}),"mce_host"!=e.host&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol)return e.getURI();var i=t.getURI(),s=e.getURI();return i==s||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==s?i:(r=t.toRelPath(t.path,e.path),e.query&&(r+="?"+e.query),e.anchor&&(r+="#"+e.anchor),r)},toAbsolute:function(e,t){return e=new n(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,r=0,i="",s,o;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(s=0,o=e.length;o>s;s++)if(s>=n.length||e[s]!=n[s]){r=s+1;break}if(e.length<n.length)for(s=0,o=n.length;o>s;s++)if(s>=e.length||e[s]!=n[s]){r=s+1;break}if(1===r)return t;for(s=0,o=e.length-(r-1);o>s;s++)i+="../";for(s=r-1,o=n.length;o>s;s++)i+=s!=r-1?"/"+n[s]:n[s];return i},toAbsPath:function(e,t){var n,i=0,s=[],o,u;for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),r(e,function(e){e&&s.push(e)}),e=s,n=t.length-1,s=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?i>0?i--:s.push(t[n]):i++);return n=e.length-i,u=0>=n?s.reverse().join("/"):e.slice(0,n).join("/")+"/"+s.reverse().join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},n}),r(F,[p],function(e){function t(){}var n=e.each,r=e.extend,i,s;return t.extend=i=function(e){function t(){var e,t,n,r;if(!s&&(r=this,r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function o(){return this}function u(e,t){return function(){var n=this,r=n._super,i;return n._super=f[e],i=t.apply(n,arguments),n._super=r,i}}var a=this,f=a.prototype,l,c,h;s=!0,l=new a,s=!1,e.Mixins&&(n(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&n(e.Methods.split(","),function(t){e[t]=o}),e.Properties&&n(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;return e!==r?(t[n]=e,t):t[n]}}),e.Statics&&n(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=r({},f.Defaults,e.Defaults));for(c in e)h=e[c],l[c]="function"==typeof h&&f[c]?u(c,h):h;return t.prototype=l,t.constructor=t,t.extend=i,t},t}),r(I,[F,p],function(e,n){function r(e){for(var t=[],n=e.length,r;n--;)r=e[n],r.__checked||(t.push(r),r.__checked=1);for(n=t.length;n--;)delete t[n].__checked;return t}var i=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,s=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,u,a=e.extend({init:function(e){function n(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):t}function r(e){return e?function(t){return t._name===e}:t}function u(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):t}function a(e,n,r){return e?function(t){var i=t[e]?t[e]():"";return n?"="===n?i===r:"*="===n?i.indexOf(r)>=0:"~="===n?(" "+i+" ").indexOf(" "+r+" ")>=0:"!="===n?i!=r:"^="===n?0===i.indexOf(r):"$="===n?i.substr(i.length-r.length)===r:!1:!!r}:t}function f(e){var n;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(n=c(e[1],[]),function(e){return!h(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?0===n%2:"odd"===e?1===n%2:t[e]?t[e]():!1})):t}function l(e,t,s){function l(e){e&&t.push(e)}var c;return c=i.exec(e.replace(o,"")),l(n(c[1])),l(r(c[2])),l(u(c[3])),l(a(c[4],c[5],c[6])),l(f(c[7])),t.psuedo=!!c[7],t.direct=s,t}function c(e,t){var n=[],r,i,o;do if(s.exec(""),i=s.exec(e),i&&(e=i[3],n.push(i[1]),i[2])){r=i[3];break}while(i);for(r&&c(r,t),e=[],o=0;n.length>o;o++)">"!=n[o]&&e.push(l(n[o],[],">"===n[o-1]));return t.push(e),t}var h=this.match;this._selectors=c(e,[])},match:function(e,t){var r,i,s,o,u,a,f,l,c,h,p,d,v;for(t=t||this._selectors,r=0,i=t.length;i>r;r++){for(u=t[r],o=u.length,v=e,d=0,s=o-1;s>=0;s--)for(l=u[s];v;){for(l.psuedo&&(p=v.parent().items(),c=n.inArray(v,p),h=p.length),a=0,f=l.length;f>a;a++)if(!l[a](v,c,h)){a=f+1;break}if(a===f){d++;break}if(s===o-1)break;v=v.parent()}if(d===o)return!0}return!1},find:function(e){function t(e,r,i){var s,o,u,a,f,l=r[i];for(s=0,o=e.length;o>s;s++){for(f=e[s],u=0,a=l.length;a>u;u++)if(!l[u](f,s,o)){u=a+1;break}if(u===a)i==r.length-1?n.push(f):f.items&&t(f.items(),r,i+1);else if(l.direct)return;f.items&&t(f.items(),r,i)}}var n=[],i,s,o=this._selectors;if(e.items){for(i=0,s=o.length;s>i;i++)t(e.items(),o[i],0);s>1&&(n=r(n))}return u||(u=a.Collection),new u(n)}});return a}),r(q,[p,I,F],function(e,n,r){var i,s,o=Array.prototype.push,u=Array.prototype.slice;return s={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?o.apply(n,t):t instanceof i?n.add(t.toArray()):o.call(n,t),n},set:function(e){var t=this,n=t.length,r;for(t.length=0,t.add(e),r=t.length;n>r;r++)delete t[r];return t},filter:function(e){var t=this,r,s,o=[],u,a;for("string"==typeof e?(e=new n(e),a=function(t){return e.match(t)}):a=e,r=0,s=t.length;s>r;r++)u=t[r],a(u)&&o.push(u);return new i(o)},slice:function(){return new i(u.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,n){var r=this,i,s;return n!==i?(r.each(function(t){t[e]&&t[e](n)}),r):(s=r[0],s&&s[e]?s[e]():t)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){s[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name width height disabled active selected checked visible parent value data".split(" "),function(e){s[e]=function(t){return this.prop(e,t)}}),i=r.extend(s),n.Collection=i,i}),r(R,[p,g],function(e,t){return{id:function(){return t.DOM.uniqueId()},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){return t.DOM.getSize(e)},getPos:function(e,n){return t.DOM.getPos(e,n)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)}}}),r(U,[F,p,q,R],function(e,n,r,i){var s=n.makeMap("focusin focusout scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave wheel keydown keypress keyup contextmenu"," "),o={},u="onmousewheel"in document,a=!1,f=e.extend({Statics:{controlIdLookup:{}},classPrefix:"mce-",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t;e&&!(t=f.controlIdLookup[e.id]);)e=e.parentNode;return t},init:function(e){var r=this,s,o;if(r.settings=e=n.extend({},r.Defaults,e),r._id=i.id(),r._text=r._name="",r._width=r._height=0,r._aria={role:e.role},s=e.classes)for(s=s.split(" "),s.map={},o=s.length;o--;)s.map[s[o]]=!0;r._classes=s||[],r.visible(!0),n.each("title text width height name classes visible disabled active value".split(" "),function(t){var n=e[t],i;n!==i?r[t](n):r["_"+t]===i&&(r["_"+t]=!1)}),r.on("click",function(){return r.disabled()?!1:t}),e.classes&&n.each(e.classes.split(" "),function(e){r.addClass(e)}),r.settings=e,r._borderBox=r.parseBox(e.border),r._paddingBox=r.parseBox(e.padding),r._marginBox=r.parseBox(e.margin),e.hidden&&r.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml,refresh",parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseInt(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e=this,n=e.settings,r,i,s=e.getEl(),o,u,a,f,l,c,h;r=e._borderBox=e._borderBox||e.measureBox(s,"border"),e._paddingBox=e._paddingBox||e.measureBox(s,"padding"),e._marginBox=e._marginBox||e.measureBox(s,"margin"),c=n.minWidth,h=n.minHeight,a=c||s.offsetWidth,f=h||s.offsetHeight,o=n.width,u=n.height,l=n.autoResize,l=l!==t?l:!o&&!u,o=o||a,u=u||f;var p=r.left+r.right,d=r.top+r.bottom,v=n.maxWidth||65535,m=n.maxHeight||65535;return e._layoutRect=i={x:n.x||0,y:n.y||0,w:o,h:u,deltaW:p,deltaH:d,contentW:o-p,contentH:u-d,innerW:o-p,innerH:u-d,startMinWidth:c||0,startMinHeight:h||0,minW:Math.min(a,v),minH:Math.min(f,m),maxW:v,maxH:m,autoResize:l,scrollW:0},e._lastLayoutRect={},i},layoutRect:function(e){var t=this,n=t._layoutRect,r,i,s,o,u,a;return n||(n=t.initLayoutRect()),e?(s=n.deltaW,o=n.deltaH,e.x!==u&&(n.x=e.x),e.y!==u&&(n.y=e.y),e.minW!==u&&(n.minW=e.minW),e.minH!==u&&(n.minH=e.minH),i=e.w,i!==u&&(i=n.minW>i?n.minW:i,i=i>n.maxW?n.maxW:i,n.w=i,n.innerW=i-s),i=e.h,i!==u&&(i=n.minH>i?n.minH:i,i=i>n.maxH?n.maxH:i,n.h=i,n.innerH=i-o),i=e.innerW,i!==u&&(i=n.minW-s>i?n.minW-s:i,i=i>n.maxW-s?n.maxW-s:i,n.innerW=i,n.w=i+s),i=e.innerH,i!==u&&(i=n.minH-o>i?n.minH-o:i,i=i>n.maxH-o?n.maxH-o:i,n.innerH=i,n.h=i+o),e.contentW!==u&&(n.contentW=e.contentW),e.contentH!==u&&(n.contentH=e.contentH),r=t._lastLayoutRect,(r.x!==n.x||r.y!==n.y||r.w!==n.w||r.h!==n.h)&&(a=f.repaintControls,a&&a.map&&!a.map[t._id]&&(a.push(t),a.map[t._id]=!0),r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h),t):n},repaint:function(){var e=this,t,n,r,i,s=0,o=0,u;t=e.getEl().style,r=e._layoutRect,u=e._lastRepaintRect||{},i=e._borderBox,s=i.left+i.right,o=i.top+i.bottom,r.x!==u.x&&(t.left=r.x+"px",u.x=r.x),r.y!==u.y&&(t.top=r.y+"px",u.y=r.y),r.w!==u.w&&(t.width=r.w-s+"px",u.w=r.w),r.h!==u.h&&(t.height=r.h-o+"px",u.h=r.h),e._hasBody&&r.innerW!==u.innerW&&(n=e.getEl("body").style,n.width=r.innerW+"px",u.innerW=r.innerW),e._hasBody&&r.innerH!==u.innerH&&(n=n||e.getEl("body").style,n.height=r.innerH+"px",u.innerH=r.innerH),e._lastRepaintRect=u,e.fire("repaint",{},!1)},on:function(e,n
){function r(e){var n,r;return function(s){return n||i.parents().each(function(i){var s=i.settings.callbacks;return s&&(n=s[e])?(r=i,!1):t}),n.call(r,s)}}var i=this,o,u,a,f;if(n)for("string"==typeof n&&(n=r(n)),a=e.toLowerCase().split(" "),f=a.length;f--;)e=a[f],o=i._bindings,o||(o=i._bindings={}),u=o[e],u||(u=o[e]=[]),u.push(n),s[e]&&(i._nativeEvents?i._nativeEvents[e]=!0:i._nativeEvents={name:!0},i._rendered&&i.bindPendingEvents());return i},off:function(e,t){var n=this,r,i=n._bindings,s,o,u,a;if(i)if(e)for(u=e.toLowerCase().split(" "),r=u.length;r--;){if(e=u[r],s=i[e],!e){for(o in i)i[o].length=0;return n}if(s)if(t)for(a=s.length;a--;)s[a]===t&&s.splice(a,1);else s.length=0}else n._bindings=[];return n},fire:function(e,t,n){function r(){return!1}function i(){return!0}var s=this,o,u,a,f;if(e=e.toLowerCase(),t=t||{},t.type||(t.type=e),t.control||(t.control=s),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=i},t.stopPropagation=function(){t.isPropagationStopped=i},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=i},t.isDefaultPrevented=r,t.isPropagationStopped=r,t.isImmediatePropagationStopped=r),s._bindings&&(a=s._bindings[e]))for(o=0,u=a.length;u>o&&(t.isImmediatePropagationStopped()||a[o].call(s,t)!==!1);o++);if(n!==!1)for(f=s.parent();f&&!t.isPropagationStopped();)f.fire(e,t,!1),f=f.parent();return t},parents:function(e){var t=this,n=new r;for(t=t.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n=this,r,i;return e=this.classPrefix+e,r=n._classes[t||"control"],r||(r=[],r.map={},n._classes[t||"control"]=r),r.map[e]||(r.map[e]=e,r.push(e),n._rendered&&(i=n.getEl(t),i&&(i.className=r.join(" ")))),n},removeClass:function(e,t){var n=this,r,i,s;if(e=this.classPrefix+e,r=n._classes[t||"control"],r&&r.map[e])for(delete r.map[e],i=r.length;i--;)r[i]===e&&r.splice(i,1);return n._rendered&&(s=n.getEl(t),s&&(s.className=r.join(" "))),n},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},getEl:function(e,t){var n,r=e?this._id+"-"+e:this._id;return n=o[r]=(t===!0?null:o[r])||i.get(r)},visible:function(e){var n=this,r;return e!==t?(n._visible!==e&&(n._rendered&&(n.getEl().style.display=e?"":"none"),n._visible=e,r=n.parent(),r&&(r._lastRect=null),n.fire(e?"show":"hide")),n):n._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}},blur:function(){this.getEl().blur()},aria:function(e,n){var r=this,i=r.getEl();return n===t?r._aria[e]:(r._aria[e]=n,r._rendered&&("label"==e&&i.setAttribute("aria-labeledby",r._id),i.setAttribute("role"==e?e:"aria-"+e,n)),r)},encode:function(e,t){return t!==!1&&f.translate&&(e=f.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),r;if(e.items)for(var s=e.items().toArray(),o=s.length;o--;)s[o].remove();return n&&n.items&&(r=[],n.items().each(function(t){t!==e&&r.push(t)}),n.items().set(r),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&i.off(t),delete f.controlIdLookup[e._id],t.parentNode&&t.parentNode.removeChild(t),e},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(i.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(i.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e=this,t=e.settings,n,r,s,o,u;for(o in t)0===o.indexOf("on")&&e.on(o.substr(2),t[o]);if(e._eventsRoot){for(s=e.parent();!u&&s;s=s.parent())u=s._eventsRoot;if(u)for(o in u._nativeEvents)e._nativeEvents[o]=!0}e.bindPendingEvents(),t.style&&(n=e.getEl(),n&&(n.setAttribute("style",t.style),n.style.cssText=t.style)),e._visible||i.css(e.getEl(),"display","none"),e.settings.border&&(r=e.borderBox(),i.css(e.getEl(),{"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left})),f.controlIdLookup[e._id]=e;for(var a in e._aria)e.aria(a,e._aria[a]);e.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,i,s,o,u,a,f,l=t(n,r);i=l.x,s=l.y,o=n.offsetWidth,u=n.offsetHeight,a=r.clientWidth,f=r.clientHeight,"end"==e?(i-=a-o,s-=f-u):"center"==e&&(i-=a/2-o/2,s-=f/2-u/2),r.scrollLeft=i,r.scrollTop=s},bindPendingEvents:function(){function e(e){var t=s.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=c._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),c._lastHoverCtrl=null)}function n(e){var t=s.getParentCtrl(e.target),n=c._lastHoverCtrl,r=0,i,o,u;if(t!==n){if(c._lastHoverCtrl=t,o=t.parents().toArray().reverse(),o.push(t),n){for(u=n.parents().toArray().reverse(),u.push(n),r=0;u.length>r&&o[r]===u[r];r++);for(i=u.length-1;i>=r;i--)n=u[i],n.fire("mouseleave",{target:n.getEl()})}for(i=r;o.length>i;i++)t=o[i],t.fire("mouseenter",{target:t.getEl()})}}function r(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=s.fire("wheel",e)}var s=this,o,f,l,c,h,p;if(s._rendered=!0,h=s._nativeEvents){for(l=s.parents().toArray(),l.unshift(s),o=0,f=l.length;!c&&f>o;o++)c=l[o]._eventsRoot;for(c||(c=l[l.length-1]||s),s._eventsRoot=c,f=o,o=0;f>o;o++)l[o]._eventsRoot=c;for(p in h){if(!h)return!1;"wheel"!==p||a?("mouseenter"===p||"mouseleave"===p?c._hasMouseEnter||(i.on(c.getEl(),"mouseleave",t),i.on(c.getEl(),"mouseover",n),c._hasMouseEnter=1):c[p]||(i.on(c.getEl(),p,e),c[p]=!0),h[p]=!1):u?i.on(s.getEl(),"mousewheel",r):i.on(s.getEl(),"DOMMouseScroll",r)}}},reflow:function(){return this.repaint(),this}});return f}),r(z,[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,r){var i,s,o;if(!t){o=tinymce.ui;for(s in o)e[s.toLowerCase()]=o[s];t=!0}if("string"==typeof n?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=e[n],!i)throw Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),r(W,[U,q,I,z,p,R],function(e,n,r,i,s,o){var u={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var t=this;t._super(e),e=t.settings,t._items=new n,t.addClass("container"),t.addClass("container-body","body"),e.containerCls&&t.addClass(e.containerCls),t._layout=i.create((e.layout||t.layout)+"layout"),t.settings.items&&t.add(t.settings.items),t._hasBody=!0},items:function(){return this._items},find:function(e){return e=u[e]=u[e]||new r(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(){var e=this;return e.keyNav?e.keyNav.focusFirst():e._super(),e},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,r,o=[];return s.isArray(t)||(t=[t]),s.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),r=s.extend({},n.settings.defaults,t),t.type=r.type=r.type||t.type||n.settings.defaultType||(r.defaults?r.defaults.type:null),t=i.create(r)),o.push(t))}),o},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=o.createFragment(t.renderHtml()),r.hasChildNodes()&&r.childNodes.length-1>=n?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,i,s,o;return e=r.create(e),i=r.items(),n||(t+=1),t>=0&&i.length>t&&(s=i.slice(0,t).toArray(),o=i.slice(t).toArray(),i.set(s.concat(e,o))),r.renderNew()},preRender:function(){},renderHtml:function(){var e=this,t=e._layout;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" role="'+this.settings.role+'">'+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e._rendered=!0,e.settings.style&&o.css(e.getEl(),e.settings.style),e.settings.border&&(t=e.borderBox(),o.css(e.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,n=e._layoutRect,r=e._lastRect;return r&&r.w==n.w&&r.h==n.h?t:(e._layout.recalc(e),n=e.layoutRect(),e._lastRect={x:n.x,y:n.y,w:n.w,h:n.h},!0)},reflow:function(){var t,n;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},n=this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(X,[R],function(e){function n(){var e=document,t,n,r,i,s,o,u,a,f=Math.max;return t=e.documentElement,n=e.body,r=f(t.scrollWidth,n.scrollWidth),i=f(t.clientWidth,n.clientWidth),s=f(t.offsetWidth,n.offsetWidth),o=f(t.scrollHeight,n.scrollHeight),u=f(t.clientHeight,n.clientHeight),a=f(t.offsetHeight,n.offsetHeight),{width:s>r?i:r,height:a>o?u:o}}return function(r,i){function s(){return u.getElementById(i.handle||r)}var o,u=document,a,f,l,c,h,p;i=i||{},f=function(t){var r=n(),f,d;t.preventDefault(),a=t.button,f=s(),h=t.screenX,p=t.screenY,d=window.getComputedStyle?window.getComputedStyle(f,null).getPropertyValue("cursor"):f.runtimeStyle.cursor,o=u.createElement("div"),e.css(o,{position:"absolute",top:0,left:0,width:r.width,height:r.height,zIndex:65535,opacity:1e-4,background:"red",cursor:d}),u.body.appendChild(o),e.on(u,"mousemove",c),e.on(u,"mouseup",l),i.start(t)},c=function(e){return e.button!==a?l(e):(e.deltaX=e.screenX-h,e.deltaY=e.screenY-p,e.preventDefault(),i.drag(e),t)},l=function(t){e.off(u,"mousemove",c),e.off(u,"mouseup",l),o.parentNode.removeChild(o),i.stop&&i.stop(t)},this.destroy=function(){e.off(s())},e.on(s(),"mousedown",f)}}),r(V,[R,X],function(e,n){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function r(){function n(n,u,a,f,l,c){var h,p,d,v,m,g,y,b,w;if(p=s.getEl("scroll"+n)){if(b=u.toLowerCase(),w=a.toLowerCase(),s.getEl("absend")&&e.css(s.getEl("absend"),b,s.layoutRect()[f]-1),!l)return e.css(p,"display","none"),t;e.css(p,"display","block"),h=s.getEl("body"),d=s.getEl("scroll"+n+"t"),v=h["client"+a]-2*o,v-=r&&i?p["client"+c]:0,m=h["scroll"+a],g=v/m,y={},y[b]=h["offset"+u]+o,y[w]=v,e.css(p,y),y={},y[b]=h["scroll"+u]*g,y[w]=v*g,e.css(d,y)}}var r,i,u;u=s.getEl("body"),r=u.scrollWidth>u.clientWidth,i=u.scrollHeight>u.clientHeight,n("h","Left","Width","contentW",r,"Height"),n("v","Top","Height","contentH",i,"Width")}function i(){function t(t,r,i,u,a){var f,l=s._id+"-scroll"+t,c=s.classPrefix;s.getEl().appendChild(e.createFragment('<div id="'+l+'" class="'+c+"scrollbar "+c+"scrollbar-"+t+'">'+'<div id="'+l+'t" class="'+c+'scrollbar-thumb"></div>'+"</div>")),s.draghelper=new n(l+"t",{start:function(){f=s.getEl("body")["scroll"+r],e.addClass(e.get(l),c+"active")},drag:function(e){var n,l,c,h,p=s.layoutRect();l=p.contentW>p.innerW,c=p.contentH>p.innerH,h=s.getEl("body")["client"+i]-2*o,h-=l&&c?s.getEl("scroll"+t)["client"+a]:0,n=h/s.getEl("body")["scroll"+i],s.getEl("body")["scroll"+r]=f+e["delta"+u]/n},stop:function(){e.removeClass(e.get(l),c+"active")}})}s.addClass("scroll"),t("v","Top","Height","Y","Width"),t("h","Left","Width","X","Height")}var s=this,o=2;s.settings.autoScroll&&(s._hasScroll||(s._hasScroll=!0,i(),s.on("wheel",function(e){var t=s.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,r()}),e.on(s.getEl("body"),"scroll",r)),r())}}}),r($,[W,V],function(e,n){var r=e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[n],fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,n={};return e.find("*").each(function(e){var r=e.name(),i=e.value();r&&i!==t&&(n[r]=i)}),n},renderHtml:function(){var e=this,n=e._layout,r=e.settings.html;return e.preRender(),n.preRender(e),r===t?r='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+n.renderHtml(e)+"</div>":("function"==typeof r&&(r=r.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e._preBodyHtml||"")+r+"</div>"}});return r}),r(J,[R],function(e){return{moveRel:function(t,n){var r=this,i,s,o,u,a,f,l,c;return s=e.getPos(t),o=s.x,u=s.y,i=r.getEl(),a=i.offsetWidth,f=i.offsetHeight,l=t.offsetWidth,c=t.offsetHeight,n=(n||"").split(""),"b"===n[0]&&(u+=c),"r"===n[1]&&(o+=l),"c"===n[0]&&(u+=Math.round(c/2)),"c"===n[1]&&(o+=Math.round(l/2)),"b"===n[3]&&(u-=f),"r"===n[4]&&(o-=a),"c"===n[3]&&(u-=Math.round(f/2)),"c"===n[4]&&(o-=Math.round(a/2)),r.moveTo(o,u),r},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(e,t){var n=this;return n._rendered?n.layoutRect({x:e,y:t}).repaint():(n.settings.x=e,n.settings.y=t),n.fire("move",{x:e,y:t}),n}}}),r(K,[R],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(Q,[$,J,K,R],function(e,t,n,r){function i(e){var t;for(t=u.length;t--;)u[t]===e&&u.splice(t,1)}var s,o,u=[],a=[],f,l=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t=l.zIndex||65535,n;if(a.length)for(e=0;a.length>e;e++)a[e].modal&&(t++,n=a[e]),a[e].getEl().style.zIndex=t,a[e].zIndex=t,t++;var i=document.getElementById(c.classPrefix+"modal-block");n?r.css(i,"z-index",n.zIndex-1):i&&(i.parentNode.removeChild(i),f=!1),l.currentZIndex=t}function n(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function i(e){var t=document.body.scrollTop||window.pageYOffset||document.documentElement.scrollTop;e.settings.autofix&&(t>(e._absY||e.layoutRect().y)?(e._absY=e._absY||e.layoutRect().y,e.getEl().style.position="fixed",e.layoutRect({y:0}).repaint()):(e.getEl().style.position="absolute",e.layoutRect({y:e._absY}).repaint()))}var c=this;c._super(e),c._eventsRoot=c,c.addClass("floatpanel"),e.autohide&&(s||(s=function(e){var t,r=c.getParentCtrl(e.target);for(t=u.length;t--;){var i=u[t];if(i.settings.autohide){if(r&&(n(r,i)||i.parent()===r))continue;i.hide()}}},r.on(document,"click",s)),u.push(c)),e.autofix&&(o||(o=function(){var e;for(e=u.length;e--;)i(u[e])},r.on(window,"scroll",o)),c.on("move",function(){i(this)})),c.on("postrender show",function(e){if(e.control==c){var n,i=c.classPrefix;c.modal&&!f&&(n=r.createFragment('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>'),n=n.firstChild,c.getContainerElm().appendChild(n),setTimeout(function(){r.addClass(n,i+"in"),r.addClass(c.getEl(),i+"in")},0),f=!0),a.push(c),t()}}),c.on("close hide",function(e){if(e.control==c){for(var n=a.length;n--;)a[n]===c&&a.splice(n,1);t()}}),e.popover&&(c._preBodyHtml='<div class="'+c.classPrefix+'arrow"></div>',c.addClass("popover").addClass("bottom").addClass("start"))},show:function(){var e=this,t,n=e._super();for(t=u.length;t--&&u[t]!==e;);return-1===t&&u.push(e),n},hide:function(){return i(this),this._super()},hideAll:function(){l.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){i(this),this._super()}});return l.hideAll=function(){for(var e=u.length;e--;){var t=u[e];t.settings.autohide&&(t.fire("cancel",{},!1),t.hide(),u.splice(e,1))}},l}),r(G,[R],function(e){return function(n){function r(){if(!v)if(v=[],h.find)h.find("*").each(function(e){e.canFocus&&v.push(e.getEl())});else for(var e=h.getEl().getElementsByTagName("*"),t=0;e.length>t;t++)e[t].id&&e[t]&&v.push(e[t])}function i(){return document.getElementById(m)}function s(e){return e=e||i(),e&&e.getAttribute("role")}function o(e){for(var t,n=e||i();n=n.parentNode;)if(t=s(n))return t}function u(e){var n=document.getElementById(m);return n?n.getAttribute("aria-"+e):t}function a(){var t=i();if(!t||"TEXTAREA"!=t.nodeName&&"text"!=t.type)return n.onAction?n.onAction(m):e.fire(i(),"click",{keyboard:!0}),!0}function f(){var e;n.onCancel?((e=i())&&e.blur(),n.onCancel()):n.root.fire("cancel")}function l(e){var t=-1,i,s;for(r(),s=v.length;s--;)if(v[s].id===m){t=s;break}t+=e,0>t?t=v.length-1:t>=v.length&&(t=0),i=v[t],i.focus(),m=i.id,n.actOnFocus&&a()}function c(){var e,i;for(i=s(n.root.getEl()),r(),e=v.length;e--;)if("toolbar"==i&&v[e].id===m)return v[e].focus(),t;v[0].focus()}var h=n.root,p=n.enableUpDown!==!1,d=n.enableLeftRight!==!1,v=n.items,m;return h.on("keydown",function(e){var t=37,r=39,i=38,c=40,h=27,v=14,m=13,g=32,y=9,b;switch(e.keyCode){case t:d&&(n.leftAction?n.leftAction():l(-1),b=!0);break;case r:d&&("menuitem"==s()&&"menu"==o()?u("haspopup")&&a():l(1),b=!0);break;case i:p&&(l(-1),b=!0);break;case c:p&&("menuitem"==s()&&"menubar"==o()?a():"button"==s()&&u("haspopup")?a():l(1),b=!0);break;case y:b=!0,e.shiftKey?l(-1):l(1);break;case h:b=!0,f();break;case v:case m:case g:b=a()}b&&(e.stopPropagation(),e.preventDefault())}),h.on("focusin",function(e){r(),m=e.target.id}),{moveFocus:l,focusFirst:c,cancel:f}}}),r(Y,[Q,$,R,G,X],function(e,n,r,i,s){var o=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.addClass("window"),e.buttons&&(t.statusbar=new n({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.addClass("foot"),t.statusbar.parent(t)),t.on("click",function(e){-1!=e.target.className.indexOf(t.classPrefix+"close")&&t.close()}),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,n,i,s;e._fullscreen&&(e.layoutRect(r.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),n=e.layoutRect(),e.settings.title&&!e._fullscreen&&(i=n.headerW,i>n.w&&(e.layoutRect({w:i}),s=!0)),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),i=t.layoutRect().minW+n.deltaW,i>n.w&&(e.layoutRect({w:i}),s=!0)),s&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),n=0,i;e.settings.title&&!e._fullscreen&&(i=e.getEl("head"),t.headerW=i.offsetWidth,t.headerH=i.offsetHeight,n+=t.headerH),e.statusbar&&(n+=e.statusbar.layoutRect().h),t.deltaH+=n,t.minH+=n,t.h+=n;var s=r.getWindowSize();return t.x=Math.max(0,s.w/2-t.w/2),t.y=Math.max(0,s.h/2-t.h/2),t},renderHtml:function(){var e=this,n=e._layout,r=e._id,i=e.classPrefix,s=e.settings,o="",u="",a=s.html;return e.preRender(),n.preRender(e),s.title&&(o='<div id="'+r+'-head" class="'+i+'window-head">'+'<div class="'+i+'title">'+e.encode(s.title)+"</div>"+'<button type="button" class="'+i+'close" aria-hidden="true">&times;</button>'+'<div id="'+r+'-dragh" class="'+i+'dragh"></div>'+"</div>"),s.url&&(a='<iframe src="'+s.url+'" tabindex="-1"></iframe>'),a===t&&(a=n.renderHtml(e)),e.statusbar&&(u=e.statusbar.renderHtml()),'<div id="'+r+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+o+'<div id="'+r+'-body" class="'+e.classes("body")+'">'+a+"</div>"+u+"</div>"},fullscreen:function(e){var t=this,n=document.documentElement,i,s=t.classPrefix,o;if(e!=t._fullscreen)if(r.on(window,"resize",function(){var e;if(t._fullscreen)if(i)t._timer||(t._timer=setTimeout(function(){var e=r.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50));else{e=(new Date).getTime();var n=r.getWindowSize();t.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(i=!0)}}),o=t.layoutRect(),t._fullscreen=e,e){t._initial={x:o.x,y:o.y,w:o.w,h:o.h},t._borderBox=t.parseBox("0"),t.getEl("head").style.display="none",o.deltaH-=o.headerH+2,r.addClass(n,s+"fullscreen"),r.addClass(document.body,s+"fullscreen"),t.addClass("fullscreen");var u=r.getWindowSize();t.moveTo(0,0).resizeTo(u.w,u.h)}else t._borderBox=t.parseBox(t.settings.border),t.getEl("head").style.display="",o.deltaH+=o.headerH,r.removeClass(n,s+"fullscreen"),r.removeClass(document.body,s+"fullscreen"),t.removeClass("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);return t.reflow()},postRender:function(){var e=this,t=[],n,r,o;setTimeout(function(){e.addClass("in")},0),e.keyboardNavigation=new i({root:e,enableLeftRight:!1,enableUpDown:!1,items:t,onCancel:function(){e.close()}}),e.find("*").each(function(e){e.canFocus&&(r=r||e.settings.autofocus,n=n||e,"filepicker"==e.type?(t.push(e.getEl("inp")),e.getEl("open")&&t.push(e.getEl("open").firstChild)):t.push(e.getEl()))}),e.statusbar&&e.statusbar.find("*").each(function(e){e.canFocus&&(r=r||e.settings.autofocus,n=n||e,t.push(e.getEl()))}),e._super(),e.statusbar&&e.statusbar.postRender(),!r&&n&&n.focus(),this.dragHelger=new s(e._id+"-dragh",{start:function(){o={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(t){e.moveTo(o.x+t.deltaX,o.y+t.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this;e._super(),e.dragHelger.destroy(),e.statusbar&&this.statusbar.remove()}});return o}),r(Z,[Y],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),i(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}]}return(new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onClose:n.onClose})).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(et,[Y,Z],function(e,t){return function(n){var r=this,i=[];r.windows=i,r.open=function(t){var r;return t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",minWidth:50,onclick:function(){r.find("form")[0].submit(),r.close()}},{text:"Cancel",onclick:function(){r.close()}}]),r=new e(t),i.push(r),r.on("close",function(){for(var e=i.length;e--;)i[e]===r&&i.splice(e,1);n.focus()}),t.data&&r.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),n.nodeChanged(),r.renderTo(document.body).reflow()},r.alert=function(e,n,r){t.alert(e,function(){n.call(r||this)})},r.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},r.close=function(){i.length&&i[window.length-1].win.close()}}}),r(tt,[L,M,w,v,m,p],function(e,n,r,i,s,o){return function(u){function a(e,t){try{u.getDoc().execCommand(e,!1,t)}catch(n){}}function f(){var e=u.getDoc().documentMode;return e?e:6}function l(e){return e.isDefaultPrevented()}function c(){function t(e){function t(){if(3==a.nodeType){if(e&&f==a.length)return!0;if(!e&&0===f)return!0}}var n,r,i,s,a,f,l;n=I.getRng();var c=[n.startContainer,n.startOffset,n.endContainer,n.endOffset];if(n.collapsed||(e=!0),a=n[(e?"start":"end")+"Container"],f=n[(e?"start":"end")+"Offset"],3==a.nodeType&&(r=F.getParent(n.startContainer,F.isBlock),e&&(r=F.getNext(r,F.isBlock)),!r||!t()&&n.collapsed||(i=F.create("em",{id:"__mceDel"}),H(o.grep(r.childNodes),function(e){i.appendChild(e)}),r.appendChild(i))),n=F.createRng(),n.setStart(c[0],c[1]),n.setEnd(c[2],c[3]),I.setRng(n),u.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),i){for(s=I.getBookmark();l=F.get("__mceDel");)F.remove(l,!0);I.moveToBookmark(s)}}u.on("keydown",function(n){var r;r=n.keyCode==j,l(n)||!r&&n.keyCode!=B||e.modifierPressed(n)||(n.preventDefault(),t(r))}),u.addCommand("Delete",function(){t()})}function h(){function e(e){var t=F.create("body"),n=e.cloneContents();return t.appendChild(n),I.serializer.serialize(t,{format:"html"})}function t(t){var n=e(t),r=F.createRng();r.selectNode(u.getBody());var i=e(r);return n===i}u.on("keydown",function(e){var n=e.keyCode,r;if(!l(e)&&(n==j||n==B)){if(r=u.selection.isCollapsed(),r&&!F.isEmpty(u.getBody()))return;if(W&&!r)return;if(!r&&!t(u.selection.getRng()))return;e.preventDefault(),u.setContent(""),u.selection.setCursorLocation(u.getBody(),0),u.nodeChanged()}})}function p(){u.on("keydown",function(t){!l(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),u.execCommand("SelectAll"))})}function d(){u.settings.content_editable||(F.bind(u.getDoc(),"focusin",function(){I.setRng(I.getRng())}),F.bind(u.getDoc(),"mousedown",function(e){e.target==u.getDoc().documentElement&&(u.getWin().focus(),I.setRng(I.getRng()))}))}function v(){u.on("keydown",function(e){if(!l(e)&&e.keyCode===B&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var t=I.getNode(),n=t.previousSibling;n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(F.remove(n),e.preventDefault())}})}function m(){window.Range.prototype.getClientRects||u.on("mousedown",function(e){if(!l(e)&&"HTML"===e.target.nodeName){var t=u.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function g(){u.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&I.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&F.hasClass(e,"mceItemAnchor")&&I.select(e),u.nodeChanged()})}function y(){function e(){var e=F.getAttribs(I.getStart().cloneNode(!1));return function(){var t=I.getStart();t!==u.getBody()&&(F.setAttrib(t,"style",null),H(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function n(){return!I.isCollapsed()&&F.getParent(I.getStart(),F.isBlock)!=F.getParent(I.getEnd(),F.isBlock)}u.on("keypress",function(r){var i;return l(r)||8!=r.keyCode&&46!=r.keyCode||!n()?t:(i=e(),u.getDoc().execCommand("delete",!1,null),i(),r.preventDefault(),!1)}),F.bind(u.getDoc(),"cut",function(t){var r;!l(t)&&n()&&(r=e(),setTimeout(function(){r()},0))})}function b(){var e,t;u.on("selectionchange",function(){t&&(clearTimeout(t),t=0),t=window.setTimeout(function(){var t=I.getRng();e&&n.compareRanges(t,e)||(u.nodeChanged(),e=t)},50)})}function w(){document.body.setAttribute("role","application")}function E(){u.on("keydown",function(e){if(!l(e)&&e.keyCode===B&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var t=I.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function S(){f()>7||(a("RespectVisibilityInDesign",!0),u.contentStyles.push(".mceHideBrInPre pre br {display: none}"),F.addClass(u.getBody(),"mceHideBrInPre"),R.addNodeFilter("pre",function(e){for(var t=e.length,n,i,s,o;t--;)for(n=e[t].getAll("br"),i=n.length;i--;)s=n[i],o=s.prev,o&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":s.parent.insert(new r("#text",3),s,!0).value="\n"}),U.addNodeFilter("pre",function(e){for(var t=e.length,n,r,i,s;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)i=n[r],s=i.prev,s&&3==s.type&&(s.value=s.value.replace(/\r?\n$/,""))}))}function x(){F.bind(u.getBody(),"mouseup",function(){var e,t=I.getNode();"IMG"==t.nodeName&&((e=F.getStyle(t,"width"))&&(F.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),F.setStyle(t,"width","")),(e=F.getStyle(t,"height"))&&(F.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),F.setStyle(t,"height","")))})}function T(){u.on("keydown",function(t){var n,r,i,s,o,a,f,c;if(n=t.keyCode==j,!l(t)&&(n||t.keyCode==B)&&!e.modifierPressed(t)&&(r=I.getRng(),i=r.startContainer,s=r.startOffset,f=r.collapsed,3==i.nodeType&&i.nodeValue.length>0&&(0===s&&!f||f&&s===(n?0:1)))){if(a=i.previousSibling,a&&"IMG"==a.nodeName)return;c=u.schema.getNonEmptyElements(),t.preventDefault(),o=F.create("br",{id:"__tmp"}),i.parentNode.insertBefore(o,i),u.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),i=I.getRng().startContainer,a=i.previousSibling,a&&1==a.nodeType&&!F.isBlock(a)&&F.isEmpty(a)&&!c[a.nodeName.toLowerCase()]&&F.remove(a),F.remove("__tmp")}})}function N(){u.on("keydown",function(t){var n,r,i,s,o;if(!l(t)&&t.keyCode==e.BACKSPACE&&(n=I.getRng(),r=n.startContainer,i=n.startOffset,s=F.getRoot(),o=r,n.collapsed&&0===i)){for(;o&&o.parentNode&&o.parentNode.firstChild==o&&o.parentNode!=s;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(u.formatter.toggle("blockquote",null,o),n=F.createRng(),n.setStart(r,0),n.setEnd(r,0),I.setRng(n))}})}function C(){function e(){u._refreshContentEditable(),a("StyleWithCSS",!1),a("enableInlineTableEditing",!1),q.object_resizing||a("enableObjectResizing",!1)}q.readonly||u.on("BeforeExecCommand MouseDown",e)}function k(){function e(){H(F.select("a"),function(e){var t=e.parentNode,n=F.getRoot();if(t.lastChild===e){for(;t&&!F.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}F.add(t,"br",{"data-mce-bogus":1})}})}u.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function L(){q.forced_root_block&&u.on("init",function(){a("DefaultParagraphSeparator",q.forced_root_block)})}function A(){u.on("Undo Redo SetContent",function(e){e.initial||u.execCommand("mceRepaint")})}function O(){u.on("keydown",function(e){var t;l(e)||e.keyCode!=B||(t=u.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),u.undoManager.beforeChange(),F.remove(t.item(0)),u.undoManager.add()))})}function M(){var e;f()>=10&&(e="",H("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),u.contentStyles.push(e+"{padding-right: 1px !important}"))}function _(){9>f()&&(R.addNodeFilter("noscript",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.firstChild,r&&n.attr("data-mce-innertext",r.value)}),U.addNodeFilter("noscript",function(e){for(var t=e.length,n,s,o;t--;)n=e[t],s=e[t].firstChild,s?s.value=i.decode(s.value):(o=n.attributes.map["data-mce-innertext"],o&&(n.attr("data-mce-innertext",null),s=new r("#text",3),s.value=o,s.raw=!0,n.append(s)))}))}function D(){function e(e,t){var n=i.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y),r&&(r.compareEndPoints("StartToStart",o)>0?r.setEndPoint("StartToStart",o):r.setEndPoint("EndToEnd",o),r.select())):n()}function n(){var e=r.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),F.unbind(r,"mouseup",n),F.unbind(r,"mousemove",t),o=s=0}var r=F.doc,i=r.body,s,o,u;r.documentElement.unselectable=!0,F.bind(r,"mousedown contextmenu",function(i){if("HTML"===i.target.nodeName){if(s&&n(),u=r.documentElement,u.scrollHeight>u.clientHeight)return;s=1,o=e(i.x,i.y),o&&(F.bind(r,"mouseup",n),F.bind(r,"mousemove",t),F.win.focus(),o.select())}})}function P(){u.on("keyup focusin",function(t){65==t.keyCode&&e.metaKeyPressed(t)||I.normalize()})}var H=o.each,B=e.BACKSPACE,j=e.DELETE,F=u.dom,I=u.selection,q=u.settings,R=u.parser,U=u.serializer,z=s.gecko,W=s.ie,X=s.webkit;E(),N(),h(),P(),X&&(T(),c(),d(),g(),L(),s.iOS?b():p()),W&&
(v(),w(),S(),x(),O(),M(),_(),D()),z&&(v(),m(),y(),C(),k(),A())}}),r(nt,[p],function(e){function t(){return!1}function n(){return!0}var r="__bindings",i=e.makeMap("focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave keydown keypress keyup contextmenu dragend dragover draggesture dragdrop drop drag"," ");return{fire:function(e,i,s){var o=this,u,a,f,l,c;if(e=e.toLowerCase(),i=i||{},i.type=e,i.target||(i.target=o),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=n},i.stopPropagation=function(){i.isPropagationStopped=n},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=n},i.isDefaultPrevented=t,i.isPropagationStopped=t,i.isImmediatePropagationStopped=t),o[r]&&(u=o[r][e]))for(a=0,f=u.length;f>a&&(u[a]=l=u[a],!i.isImmediatePropagationStopped());a++)if(l.call(o,i)===!1)return i.preventDefault(),i;if(s!==!1&&o.parent)for(c=o.parent();c&&!i.isPropagationStopped();)c.fire(e,i,!1),c=c.parent();return i},on:function(e,t){var n=this,s,o,u,a;if(t===!1&&(t=function(){return!1}),t)for(u=e.toLowerCase().split(" "),a=u.length;a--;)e=u[a],s=n[r],s||(s=n[r]={}),o=s[e],o||(o=s[e]=[],n.bindNative&&i[e]&&n.bindNative(e)),o.push(t);return n},off:function(e,t){var n=this,s,o=n[r],u,a,f,l;if(o)if(e)for(f=e.toLowerCase().split(" "),s=f.length;s--;){if(e=f[s],u=o[e],!e){for(a in o)o[e].length=0;return n}if(u){if(t)for(l=u.length;l--;)u[l]===t&&u.splice(l,1);else u.length=0;!u.length&&n.unbindNative&&i[e]&&(n.unbindNative(e),delete o[e])}}else{if(n.unbindNative)for(e in o)n.unbindNative(e);n[r]=[]}return n}}}),r(rt,[p,m],function(e,n){var r=e.each,i=e.explode,s={f9:120,f10:121,f11:122};return function(e){var o=this,u={};e.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&r(u,function(r){var i=n.isMac?e.metaKey:e.ctrlKey;if(r.ctrl==i&&r.alt==e.altKey&&r.shift==e.shiftKey)return e.keyCode==r.keyCode||e.charCode&&e.charCode==r.charCode?(e.preventDefault(),"keydown"==e.type&&r.func.call(r.scope),!0):t})}),o.add=function(t,n,o,a){var f;return f=o,"string"==typeof o?o=function(){e.execCommand(f,!1,null)}:o.length&&(o=function(){e.execCommand(f[0],f[1],f[2])}),r(i(t.toLowerCase()),function(t){var f={func:o,scope:a||e,desc:e.translate(n),alt:!1,ctrl:!1,shift:!1};r(i(t,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":f[e]=!0;break;default:f.charCode=e.charCodeAt(0),f.keyCode=s[e]||e.toUpperCase().charCodeAt(0)}}),u[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f}),!0}}}),r(it,[g,b,w,C,N,O,_,D,P,H,B,j,y,a,et,E,x,tt,m,p,nt,rt],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){function x(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu/.test(t)?e.getDoc():e.getBody()}function T(e,t,r){var i=this,s,o;s=i.documentBaseUrl=r.documentBaseURL,o=r.baseURI,i.settings=t=L({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:s,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",directionality:"ltr",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:!0},t),n.settings=t,n.baseURL=r.baseURL,i.id=t.id=e,i.isNotDirty=!1,i.plugins={},i.documentBaseURI=new h(t.document_base_url||s,{base_uri:o}),i.baseURI=o,i.contentCSS=[],i.contentStyles=[],i.shortcuts=new S(i),i.execCommands={},i.queryStateCommands={},i.queryValueCommands={},i.suffix=r.suffix,i.editorManager=r,i.inline=t.inline,i.execCallback("setup",i)}var N=e.DOM,C=n.ThemeManager,k=n.PluginManager,L=w.extend,A=w.each,O=w.explode,M=w.inArray,_=w.trim,D=w.resolve,P=d.Event,H=b.gecko,B=b.ie,j=b.opera;return T.prototype={render:function(){function e(){var e=p.ScriptLoader;r.language&&e.add(n.editorManager.baseURL+"/langs/"+r.language+".js"),r.theme&&"function"!=typeof r.theme&&"-"!=r.theme.charAt(0)&&!C.urls[r.theme]&&C.load(r.theme,"themes/"+r.theme+"/theme"+s+".js"),w.isArray(r.plugins)&&(r.plugins=r.plugins.join(" ")),A(r.plugins.split(/[ ,]/),function(e){if(e=_(e),e&&!k.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=k.dependencies(e);A(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"};e=k.createUrl(t,e),k.load(e.resource,e)})}else k.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,r=n.settings,i=n.id,s=n.suffix;if(!P.domLoaded)return N.bind(window,"ready",function(){n.render()}),t;if(n.editorManager.settings=r,n.getElement()&&b.contentEditable){r.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var o=n.getElement().form||N.getParent(i,"form");o&&(n.formElement=o,r.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&N.insertAfter(N.create("input",{type:"hidden",name:i}),i),n.formEventDelegate=function(e){n.fire(e.type,e)},N.bind(o,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!r.submit_patch||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=1,o._mceOldSubmit(o)})),n.windowManager=new v(n),"xml"==r.encoding&&n.on("GetContent",function(e){e.save&&(e.content=N.encode(e.content))}),r.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&(n.save(),n.isNotDirty=1)}),r.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0})},n.editorManager.on("BeforeUnload",n._beforeUnload)),e()}},init:function(){function e(n){var r=k.get(n),i,s;i=k.urls[n]||t.documentBaseUrl.replace(/\/$/,""),n=_(n),r&&-1===M(d,n)&&(A(k.dependencies(n),function(t){e(t)}),s=new r(t,i),t.plugins[n]=s,s.init&&(s.init(t,i),d.push(n)))}var t=this,n=t.settings,r=t.getElement(),i,s,o,u,a,f,l,c,h,p,d=[];if(t.editorManager.add(t),n.aria_label=n.aria_label||N.getAttrib(r,"aria-label",t.getLang("aria.rich_text_area")),n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),a=C.get(n.theme),t.theme=new a(t,C.urls[n.theme]),t.theme.init&&t.theme.init(t,C.urls[n.theme]||t.documentBaseUrl.replace(/\/$/,""))):t.theme=n.theme),A(n.plugins.replace(/\-/g,"").split(/[ ,]/),e),t.fire("BeforeRenderUI"),n.render_ui&&t.theme&&(t.orgDisplay=r.style.display,"function"!=typeof n.theme?(i=n.width||r.style.width||r.offsetWidth,s=n.height||r.style.height||r.offsetHeight,o=n.min_height||100,h=/^[0-9\.]+(|px)$/i,h.test(""+i)&&(i=Math.max(parseInt(i,10)+(a.deltaWidth||0),100)),h.test(""+s)&&(s=Math.max(parseInt(s,10)+(a.deltaHeight||0),o)),a=t.theme.renderUI({targetNode:r,width:i,height:s,deltaWidth:n.delta_width,deltaHeight:n.delta_height}),n.content_editable||(N.setStyles(a.sizeContainer||a.editorContainer,{wi2dth:i,h2eight:s}),s=(a.iframeHeight||s)+("number"==typeof s?a.deltaHeight||0:""),o>s&&(s=o))):(a=n.theme(t,r),a.editorContainer.nodeType&&(a.editorContainer=a.editorContainer.id=a.editorContainer.id||t.id+"_parent"),a.iframeContainer.nodeType&&(a.iframeContainer=a.iframeContainer.id=a.iframeContainer.id||t.id+"_iframecontainer"),s=a.iframeHeight||r.offsetHeight),t.editorContainer=a.editorContainer),n.content_css&&A(O(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_style&&t.contentStyles.push(n.content_style),n.content_editable)return r=u=a=null,t.initContentBody();for(document.domain&&location.hostname!=document.domain&&(t.editorManager.relaxedDomain=document.domain),t.iframeHTML=n.doctype+"<html><head>",n.document_base_url!=t.documentBaseUrl&&(t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />'),!b.caretAfter&&n.ie7_compat&&(t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',p=0;t.contentCSS.length>p;p++)t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+t.contentCSS[p]+'" />';t.contentCSS=[],l=n.body_id||"tinymce",-1!=l.indexOf("=")&&(l=t.getParam("body_id","","hash"),l=l[t.id]||l),c=n.body_class||"",-1!=c.indexOf("=")&&(c=t.getParam("body_class","","hash"),c=c[t.id]||""),t.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" '+"onload=\"window.parent.tinymce.get('"+t.id+"').fire('load');\"><br></body></html>",t.editorManager.relaxedDomain&&(B||j&&11>parseFloat(window.opera.version()))&&(f='javascript:(function(){document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);'+"document.close();ed.initContentBody();})()"),u=N.add(a.iframeContainer,"iframe",{id:t.id+"_ifr",src:f||'javascript:""',frameBorder:"0",allowTransparency:"true",title:t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:s,display:"block"}}),t.contentAreaContainer=a.iframeContainer,a.editorContainer&&(N.get(a.editorContainer).style.display=t.orgDisplay),N.get(t.id).style.display="none",N.setAttrib(t.id,"aria-hidden",!0),t.editorManager.relaxedDomain&&f||t.initContentBody(),r=u=a=null},initContentBody:function(){var t=this,n=t.settings,s=N.get(t.id),h=t.getDoc(),p,d;n.inline||(t.getElement().style.visibility=t.orgVisibility),B&&t.editorManager.relaxedDomain||n.content_editable||(h.open(),h.write(t.iframeHTML),h.close(),t.editorManager.relaxedDomain&&(h.domain=t.editorManager.relaxedDomain)),n.content_editable&&(N.addClass(s,"mce-content-body"),s.tabIndex=-1,t.contentDocument=h=n.content_document||document,t.contentWindow=n.content_window||window,t.bodyElement=s,n.content_document=n.content_window=null,n.root_name=s.nodeName.toLowerCase()),p=t.getBody(),p.disabled=!0,n.readonly||(p.contentEditable=t.getParam("content_editable_state",!0)),p.disabled=!1,t.schema=new m(n),t.dom=new e(h,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:!0,root_element:n.content_editable?t.id:null,schema:t.schema,onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=new g(n,t.schema),t.parser.addAttributeFilter("src,href,style",function(e,n){for(var r=e.length,i,s=t.dom,o,u;r--;)i=e[r],o=i.attr(n),u="data-mce-"+n,i.attributes.map[u]||("style"===n?i.attr(u,s.serializeStyle(s.parseStyle(o),i.name)):i.attr(u,t.convertURL(o,n,i.name)))}),t.parser.addNodeFilter("script",function(e){for(var t=e.length,n;t--;)n=e[t],n.attr("type","mce-"+(n.attr("type")||"text/javascript"))}),t.parser.addNodeFilter("#cdata",function(e){for(var t=e.length,n;t--;)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),t.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var n=e.length,i,s=t.schema.getNonEmptyElements();n--;)i=e[n],i.isEmpty(s)&&(i.empty().append(new r("br",1)).shortEnded=!0)}),t.serializer=new i(n,t),t.selection=new o(t.dom,t.getWin(),t.serializer,t),t.formatter=new u(t),t.undoManager=new a(t),t.forceBlocks=new l(t),t.enterKey=new f(t),t.editorCommands=new c(t),t.fire("PreInit"),n.browser_spellcheck||n.gecko_spellcheck||(h.body.spellcheck=!1),t.fire("PostRender"),t.quirks=y(t),n.directionality&&(p.dir=n.directionality),n.nowrap&&(p.style.whiteSpace="nowrap"),n.protect&&t.on("BeforeSetContent",function(e){A(n.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),n.padd_empty_editor&&t.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.initialized=!0,A(t._pendingNativeEvents,function(e){t.dom.bind(x(t,e),e,function(e){t.fire(e.type,e)})}),t.fire("init"),t.focus(!0),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),t.contentStyles.length>0&&(d="",A(t.contentStyles,function(e){d+=e+"\r\n"}),t.dom.addStyle(d)),A(t.contentCSS,function(e){t.dom.loadCSS(e)}),n.auto_focus&&setTimeout(function(){var e=t.editorManager.get(n.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),s=h=p=null},focus:function(e){var t,n=this,r=n.selection,i=n.settings.content_editable,s,o,u=n.getDoc(),a;e||(s=r.getRng(),s.item&&(o=s.item(0)),n._refreshContentEditable(),i||n.getWin().focus(),(H||i)&&(a=n.getBody(),a.setActive?a.setActive():a.focus(),i&&r.normalize()),o&&o.ownerDocument==u&&(s=u.body.createControlRange(),s.addElement(o),s.select())),n.editorManager.activeEditor!=n&&((t=n.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t})),n.editorManager.activeEditor=n},execCallback:function(e){var t=this,n=t.settings[e],r;if(n)return t.callbackLookup&&(r=t.callbackLookup[e])&&(n=r.func,r=r.scope),"string"==typeof n&&(r=n.replace(/\.\w+$/,""),r=r?D(r):0,n=D(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r}),n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,i;return"hash"===n?(i={},"string"==typeof r?A(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),i[_(e[0])]=e.length>1?_(e[1]):_(e)}):i=r,i):r},nodeChanged:function(){var e=this,n=e.selection,r,i,s;e.initialized&&!e.settings.disable_nodechange&&(s=e.getBody(),r=n.getStart()||s,r=B&&r.ownerDocument!=e.getDoc()?e.getBody():r,"IMG"==r.nodeName&&n.isCollapsed()&&(r=r.parentNode),i=[],e.dom.getParent(r,function(e){return e===s?!0:(i.push(e),t)}),e.fire("NodeChange",{element:r,parents:i}))},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,t.icon=t.icon||(t.icon!==!1?e:!1),n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,n,r,i){var s=this,o=0,u;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus||s.focus(),i=L({},i),s.fire("BeforeExecCommand",{command:e,ui:n,value:r}),i.terminate?!1:(u=s.execCommands[e])&&u.func.call(u.scope,n,r)!==!0?(s.fire("ExecCommand",{command:e,ui:n,value:r}),!0):(A(s.plugins,function(i){return i.execCommand&&i.execCommand(e,n,r)?(s.fire("ExecCommand",{command:e,ui:n,value:r}),o=!0,!1):t}),o?o:s.theme&&s.theme.execCommand&&s.theme.execCommand(e,n,r)?(s.fire("ExecCommand",{command:e,ui:n,value:r}),!0):s.editorCommands.execCommand(e,n,r)?(s.fire("ExecCommand",{command:e,ui:n,value:r}),!0):(s.getDoc().execCommand(e,n,r),s.fire("ExecCommand",{command:e,ui:n,value:r}),t))},queryCommandState:function(e){var t=this,n,r;if(!t._isHidden()){if((n=t.queryStateCommands[e])&&(r=n.func.call(n.scope),r!==!0))return r;if(r=t.editorCommands.queryCommandState(e),-1!==r)return r;try{return t.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var n=this,r,i;if(!n._isHidden()){if((r=n.queryValueCommands[e])&&(i=r.func.call(r.scope),i!==!0))return i;if(i=n.editorCommands.queryCommandValue(e),i!==t)return i;try{return n.getDoc().queryCommandValue(e)}catch(s){}}},show:function(){var e=this;N.show(e.getContainer()),N.hide(e.id),e.load(),e.fire("show")},hide:function(){var e=this,t=e.getDoc();B&&t&&t.execCommand("SelectAll"),e.save(),N.hide(e.getContainer()),N.setStyle(e.id,"display",e.orgDisplay),e.fire("hide")},isHidden:function(){return!N.isHidden(this.id)},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,r=n.getElement(),i;return r?(e=e||{},e.load=!0,i=n.setContent(r.value!==t?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,i):t},save:function(e){var n=this,r=n.getElement(),i,s;if(r&&n.initialized)return e=e||{},e.save=!0,e.element=r,i=e.content=n.getContent(e),e.no_events||n.fire("SaveContent",e),i=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=i:(r.innerHTML=i,(s=N.getParent(n.id,"form"))&&A(s.elements,function(e){return e.name==n.id?(e.value=i,!1):t})),e.element=r=null,i},setContent:function(e,n){var r=this,i=r.getBody(),o;return n=n||{},n.format=n.format||"html",n.set=!0,n.content=e,n.no_events||r.fire("BeforeSetContent",n),e=n.content,B||0!==e.length&&!/^\s+$/.test(e)?("raw"!==n.format&&(e=(new s({},r.schema)).serialize(r.parser.parse(e,{isRootContent:!0}))),n.content=_(e),r.dom.setHTML(i,n.content),n.no_events||r.fire("SetContent",n),r.settings.content_editable&&document.activeElement!==r.getBody()||r.selection.normalize(),n.content):(o=r.settings.forced_root_block,e=o&&r.schema.isValidChild(i.nodeName.toLowerCase(),o.toLowerCase())?"<"+o+'><br data-mce-bogus="1"></'+o+">":'<br data-mce-bogus="1">',i.innerHTML=e,r.selection.select(i,!0),r.selection.collapse(!0),t)},getContent:function(e){var t=this,n,r=t.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),n="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:t.serializer.serialize(r,e),e.content="text"!=e.format?_(n):n,e.no_events||t.fire("GetContent",e),e.content},insertContent:function(e){this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty&&this.undoManager.hasUndo()},getContainer:function(){var e=this;return e.container||(e.container=N.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return N.get(this.settings.content_element||this.id)},getWin:function(){var e=this,t;return e.contentWindow||(t=N.get(e.id+"_ifr"),t&&(e.contentWindow=t.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n=this,r=n.settings,i=n.dom,s;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=r.visual),A(i.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return s=r.visual_table_class||"mce-item-table",o=i.getAttrib(e,"border"),o&&"0"!=o||(n.hasVisual?i.addClass(e,s):i.removeClass(e,s)),t;case"A":return i.getAttrib(e,"href",!1)||(o=i.getAttrib(e,"name")||e.id,s="mce-item-anchor",o&&(n.hasVisual?i.addClass(e,s):i.removeClass(e,s))),t}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this,t=e.getContainer(),n=e.getDoc();e.removed||(e.removed=1,B&&n&&n.execCommand("SelectAll"),e.save(),N.setStyle(e.id,"display",e.orgDisplay),e.settings.content_editable||(P.unbind(e.getWin()),P.unbind(e.getDoc())),P.unbind(e.getBody()),P.unbind(t),e.fire("remove"),e.editorManager.remove(e),N.remove(t))},bindNative:function(e){var t=this;t.initialized?t.dom.bind(x(t,e),e,function(n){t.fire(e,n)}):t._pendingNativeEvents?t._pendingNativeEvents.push(e):t._pendingNativeEvents=[e]},unbindNative:function(e){var t=this;t.initialized&&t.dom.unbind(e)},destroy:function(e){var t=this,n;t.destroyed||(H&&(P.unbind(t.getDoc()),P.unbind(t.getWin()),P.unbind(t.getBody())),e||(t.editorManager.off(t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null,N.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=null,t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1)},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return H?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},L(T.prototype,E),T}),r(st,[],function(){var e={};return{add:function(t,n){for(var r in n)e[r]=n[r]},translate:function(n){if(n===t)return n;if("string"!=typeof n&&n.raw)return n.raw;if(n.push){var r=n.slice(1);n=(e[n[0]]||n[0]).replace(/\{([^\}]+)\}/g,function(e,t){return r[t]})}return e[n]||n},data:e}}),r(ot,[g],function(e){function t(n){function r(){try{return document.activeElement}catch(e){return document.body}}function i(i){function s(n){return!!e.DOM.getParent(n,t.isEditorUIElement)}var o=i.editor,u,a;o.on("init",function(){"onbeforedeactivate"in document?o.dom.bind(o.getBody(),"beforedeactivate",function(){var e=o.getDoc().selection;a=e&&e.createRange?e.createRange():o.selection.getRng()}):o.inline&&o.on("nodechange",function(){for(var e,t=document.activeElement;t;){if(t==o.getBody()){e=!0;break}t=t.parentNode}e&&(a=o.selection.getRng())})}),o.on("focusin",function(){var e=n.focusedEditor;u&&(o.selection.setRng(u),u=null),e!=o&&(e&&e.fire("blur",{focusedEditor:o}),o.fire("focus",{blurredEditor:e}),o.focus(!1),n.focusedEditor=o)}),o.on("focusout",function(){u=a,window.setTimeout(function(){var e=n.focusedEditor;e!=o&&(u=null),s(r())||e!=o||(o.fire("blur",{focusedEditor:null}),n.focusedEditor=null,u=null)},0)})}n.on("AddEditor",i)}return t.isEditorUIElement=function(e){return-1!==e.className.indexOf("mce-")},t}),r(ut,[it,g,j,m,p,nt,st,ot],function(e,n,r,i,s,o,u,a){var f=n.DOM,l=s.explode,c=s.each,h=s.extend,p=0,d,v={majorVersion:"4",minorVersion:"0b2",releaseDate:"2013-04-24",editors:[],i18n:u,activeEditor:null,setup:function(){var e=this,t,n,i="",s;if(n=document.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"),s=window.tinymce||window.tinyMCEPreInit)t=s.base||s.baseURL,i=s.suffix;else for(var o=document.getElementsByTagName("script"),u=0;o.length>u;u++){var f=o[u].src;if(/tinymce(\.jquery|)(\.min|\.dev|).js/.test(f)){-1!=f.indexOf(".min")&&(i=".min"),t=f.substring(0,f.lastIndexOf("/"));break}}e.baseURL=(new r(n)).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new r(e.baseURL),e.suffix=i,e.focusManager=new a(e)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!f.get(t)?e.name:f.uniqueId(),e.setAttribute("id",t)),t}function r(e,t,n){var r=e[t];if(r)return r.apply(n||this,Array.prototype.slice.call(arguments,2))}function i(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}var s=this,o=[],u;s.settings=t,f.bind(window,"ready",function(){var a,d;switch(r(t,"onpageload"),t.mode){case"exact":a=t.elements||"",a.length>0&&c(l(a),function(n){f.get(n)?(u=new e(n,t,s),o.push(u),u.render(!0)):c(document.forms,function(r){c(r.elements,function(r){r.name===n&&(n="mce_editor_"+p++,f.setAttrib(r,"id",n),u=new e(n,t,s),o.push(u),u.render(1))})})});break;case"textareas":case"specific_textareas":c(f.select("textarea"),function(r){t.editor_deselector&&i(r,t.editor_deselector)||(!t.editor_selector||i(r,t.editor_selector))&&(u=new e(n(r),t,s),o.push(u),u.render(!0))});break;default:t.types?c(t.types,function(r){c(f.select(r.selector),function(i){var u=new e(n(i),h({},t,r),s);o.push(u),u.render(1)})}):t.selector&&c(f.select(t.selector),function(r){var i=new e(n(r),t,s);o.push(i),i.render(1)})}t.oninit&&(a=d=0,c(o,function(e){d++,e.initialized?a++:e.on("init",function(){a++,a==d&&r(t,"oninit")}),a==d&&r(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors[e]},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),d||(d=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",d)),e},createEditor:function(t){return this.add(new e(t))},remove:function(e){var t=this,n,r=t.editors;if(!r[e.id])return null;for(delete r[e.id],n=0;r.length>n;n++)if(r[n]==e){r.splice(n,1);break}return t.activeEditor==e&&(t.activeEditor=r[0]),e.destroy(),t.fire("RemoveEditor",{editor:e}),r.length||f.unbind(window,"beforeunload",d),e},execCommand:function(t,n,r){var i=this,s=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||(new e(r,i.settings,i)).render(),!0;case"mceRemoveEditor":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},triggerSave:function(){c(this.editors,function(e){e.save()})},addI18n:function(e,t){u.add(e,t)},translate:function(e){return u.translate(e)}};return h(v,o),v.setup(),window.tinymce=window.tinyMCE=v,v}),r(at,[ut,p],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&u.setStyle(e,n,t)}),u.rename(e,"span")}function i(e){u=t.dom,a.convert_fonts_to_spans&&n(u.select("font,u,strike",e.node),function(e){s[e.nodeName.toLowerCase()](u,e)})}var s,o,u,a=t.settings;a.inline_styles&&(o=r(a.font_size_legacy_values),s={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:o[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(ft,[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||r++>1e4?(e.success&&1e4>r&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),r(lt,[],function(){function e(t,n){var r,i,s,o;if(n=n||'"',null===t)return"null";if(s=typeof t,"string"==s)return i="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==s){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";t.length>r;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(o in t)t.hasOwnProperty(o)&&(i+="function"!=typeof t[o]?(i.length>1?","+n:n)+o+n+":"+e(t[o],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),r(ct,[lt,ft,p],function(e,n,r){function i(e){this.settings=s({},e),this.count=0}var s=r.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(r){var i=r.error,o=r.success;r=s(this.settings,r),r.success=function(n,s){n=e.parse(n),n===t&&(n={error:"JSON Parse error."}),n.error?i.call(r.error_scope||r.scope,n.error,s):o.call(r.success_scope||r.scope,n.result)},r.error=function(e,t){i&&i.call(r.error_scope||r.scope,e,t)},r.data=e.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params}),r.content_type="application/json",n.send(r)}},i}),r(ht,[g],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,s=n.count!==t?n.count:r.count,o="tinymce_jsonp_"+s;r.callbacks[s]=function(e){i.remove(o),delete r.callbacks[s],n.callback(e)},i.add(i.doc.body,"script",{id:o,src:n.url,type:"text/javascript"}),r.count++}}}),r(pt,[],function(){function e(){u=[];for(var e in o)u.push(e);i.length=u.length}function n(){function n(e){var n,r;return r=e!==t?f+e:i.indexOf(",",f),-1===r||r>i.length?null:(n=i.substring(f,r),f=r+1,n)}var r,i,u,f=0;o={},s.load(a),i=s.getAttribute(a)||"";do r=n(parseInt(n(),32)||0),null!==r&&(u=n(parseInt(n(),32)||0),o[r]=u);while(null!==r);e()}function r(){var t,n="";for(var r in o)t=o[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;s.setAttribute(a,n),s.save(a),e()}var i,s,o,u,a;return window.localStorage?localStorage:(a="tinymce",s=document.documentElement,s.addBehavior("#default#userData"),i={key:function(e){return u[e]},getItem:function(e){return e in o?o[e]:null},setItem:function(e,t){o[e]=""+t,r()},removeItem:function(e){delete o[e],r()},clear:function(){o={},r()}},n(),i)}),r(dt,[g,a,y,b,p,m],function(e,t,n,r,i,s){var o=window.tinymce;return o.DOM=e.DOM,o.ScriptLoader=n.ScriptLoader,o.PluginManager=r.PluginManager,o.ThemeManager=r.ThemeManager,o.dom=o.dom||{},o.dom.Event=t.Event,i.each(i,function(e,t){o[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){o[e]=s[e.substr(2).toLowerCase()]}),{}}),r(vt,[F,p],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t=this,n=t.settings,r,i,s;r=e.items().filter(":visible"),i=n.firstControlClass,s=n.lastControlClass,r.each(function(e){e.removeClass(i).removeClass(s),n.controlClass&&e.addClass(n.controlClass)}),r.eq(0).addClass(i),r.eq(-1).addClass(s)},renderHtml:function(e){var t=this,n=t.settings,r,i="";return r=e.items(),r.eq(0).addClass(n.firstControlClass),r.eq(-1).addClass(n.lastControlClass),r.each(function(e){n.controlClass&&e.addClass(n.controlClass),i+=e.renderHtml()}),i},recalc:function(){},postRender:function(){}})}),r(mt,[vt],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(gt,[U,J],function(e,n){return e.extend({Mixins:[n],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var n=this;return e!==t?(n._value=e,n._rendered&&(n.getEl().lastChild.innerHTML=n.encode(e)),n):n._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div>"+"</div>"},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),r(yt,[U,gt],function(e,t){var n;return e.extend({init:function(e){var t=this;t._super(e),t.canFocus=!0,e.tooltip&&t.on("mouseenter mouseleave",function(n){n.control==t&&"mouseenter"==n.type?t.tooltip().moveTo(-65535).text(e.tooltip).show().moveRel(t.getEl(),"bc tc"):t.tooltip().moveTo(-65535).hide()}),t.aria("label",e.tooltip)},tooltip:function(){var e=this;return n||(n=new t({type:"tooltip"}),n.renderTo(e.getContainerElm())),n},active:function(e){var t=this,n;return e!==n&&(t.aria("pressed",e),t.toggleClass("active",e)),t._super(e)},disabled:function(e){var t=this,n;return e!==n&&(t.aria("disabled",e),t.toggleClass("disabled",e)),t._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!
t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&setTimeout(function(){e.focus()},0)},remove:function(){this._super(),n&&(n.remove(),n=null)}})}),r(bt,[yt],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t.on("click mousedown",function(e){e.preventDefault()}),t._super(e),n=e.size,e.subtype&&t.addClass(e.subtype),n&&t.addClass("btn-"+n)},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i="";return e.settings.image&&(r="none",i=" style=\"background-image: url('"+e.settings.image+"')\""),r=e.settings.icon?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button role="presentation" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button>"+"</div>"}})}),r(wt,[W],function(e){return e.extend({Defaults:{defaultType:"button",role:"toolbar"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(Et,[yt],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var n=this;return e!==t?(e?n.addClass("checked"):n.removeClass("checked"),n._checked=e,n.aria("checked",e),n):n._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labeledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span>"+"</div>"}})}),r(St,[W],function(e){return e.extend({})}),r(xt,[bt,Q],function(e,t){var n=e.extend({showPanel:function(){var e=this,n=e.settings;n.panel.popover=!0,n.panel.autohide=!0,e.active(!0),e.panel?e.panel.show():e.panel=(new t(n.panel)).on("hide",function(){e.active(!1)}).parent(e).renderTo(e.getContainerElm()).reflow().moveRel(e.getEl(),n.popoverAlign||"bc-tc")},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&e.showPanel()}),e._super()}});return n}),r(Tt,[xt],function(e){return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},showPreview:function(e){this.getEl("preview").style.backgroundColor=e},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button role="presentation" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button>"+"</div>"}})}),r(Nt,[yt,R],function(e,n){return e.extend({init:function(e){var r=this;r._super(e),r.addClass("combobox"),r.on("click",function(e){for(var t=e.target;t;)t.id&&-1!=t.id.indexOf("-open")&&r.fire("action"),t=t.parentNode}),r.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&r.parents().reverse().each(function(n){return e.preventDefault(),r.fire("change"),n.submit?(n.submit(),!1):t})}),e.placeholder&&(r.addClass("placeholder"),r.on("focusin",function(){r._hasOnChange||(n.on(r.getEl("inp"),"change",function(){r.fire("change")}),r._hasOnChange=!0),r.hasClass("placeholder")&&(r.getEl("inp").value="",r.removeClass("placeholder"))}),r.on("focusout",function(){0===r.value().length&&(r.getEl("inp").value=e.placeholder,r.addClass("placeholder"))}))},value:function(e){var n=this;return e!==t?(n._value=e,n.removeClass("placeholder"),n._rendered&&(n.getEl("inp").value=e),n):n._rendered?(e=n.getEl("inp").value,e!=n.settings.placeholder?e:""):n._value},repaint:function(){var e=this,t=e.getEl(),r=e.getEl("open"),i=e.layoutRect();return r?n.css(t.firstChild,{width:i.w-r.offsetWidth-10}):n.css(t.firstChild,{width:i.w-10}),e._super(),e},disabled:function(e){var t=this;t._super(e),t._rendered&&(t.getEl().disabled=e)},focus:function(){this.getEl("inp").focus()},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=n.value||n.placeholder||"",s,o,u="";return s=n.icon?r+"ico "+r+"i-"+n.icon:"",o=e._text,(s||o)&&(u='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1">'+'<button id="'+t+'-action" hidefocus tabindex="-1">'+(s?'<i class="'+s+'"></i>':'<i class="'+r+'caret"></i>')+(o?(s?" ":"")+o:"")+"</button>"+"</div>",e.addClass("has-open")),'<div id="'+t+'" class="'+e.classes()+'">'+'<input id="'+t+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+i+'" hidefocus="true">'+u+"</div>"}})}),r(Ct,[U,G],function(e,n){return e.extend({Defaults:{delimiter:"»"},init:function(e){var t=this;t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.keyNav=new n({root:e,enableLeftRight:!0}),e.keyNav.focusFirst(),e},data:function(e){var n=this;return e!==t?(n._data=e,n.update(),n):n._data},update:function(){this.getEl().innerHTML=this._getPathHtml()},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classPrefix+'path">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e=this,t=e._data||[],n,r,i="",s=e.classPrefix;for(n=0,r=t.length;r>n;n++)i+=(n>0?'<div class="'+s+'divider" aria-hidden="true"> '+e.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(n==r-1?" "+s+"last":"")+'" data-index="'+n+'" tabindex="-1" id="'+e._id+"-"+n+'">'+t[n].name+"</div>";return i||(i='<div class="'+s+'path-item">&nbsp;</div>'),i}})}),r(kt,[Ct,ut],function(e,t){return e.extend({postRender:function(){function e(e){return 1===e.nodeType&&("BR"==e.nodeName||!!e.getAttribute("data-mce-bogus"))}var n=this,r=t.activeEditor;return n.on("select",function(t){for(var n=[],i=r.selection.getNode(),s=r.getBody();i&&(e(i)||n.push(i),i=i.parentNode,i!=s););r.focus(),r.selection.select(n[n.length-1-t.index]),r.nodeChanged()}),r.on("nodeChange",function(t){for(var i=[],s=t.parents,o=s.length;o--;)if(!e(s[o])){var u=r.fire("ResolveName",{name:s[o].nodeName.toLowerCase(),target:s[o]});i.push({name:u.name})}n.data(i)}),n._super()}})}),r(Lt,[W],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(At,[W,Lt],function(e,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10},preRender:function(){var e=this,r=e.items();r.each(function(r){var i,s=r.settings.label;s&&(i=new n({layout:"flex",autoResize:"overflow",defaults:{flex:1},items:[{type:"label",text:s,flex:0,forId:r._id}]}),i.type="formitem",r.settings.flex===t&&(r.settings.flex=1),e.replace(r,i),i.add(r))})},recalcLabels:function(){var e=this,t=0,n=[],r,i;if(e.settings.labelGapCalc!==!1)for(e.items().filter("formitem").each(function(e){var r=e.items()[0],i=r.getEl().clientWidth;t=i>t?i:t,n.push(r)}),i=e.settings.labelGap||0,r=n.length;r--;)n[r].settings.minWidth=t+i},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},fromJSON:function(e){var t=this;if(e)for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,n={};return e.find("*").each(function(e){var r=e.name(),i=e.value();r&&i!==t&&(n[r]=i)}),n},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),r(Ot,[At],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}})}),r(Mt,[Nt],function(e){return e.extend({init:function(e){var t=this,n=tinymce.activeEditor,r;e.spellcheck=!1,r=n.settings.file_browser_callback,r&&(e.icon="browse",e.onaction=function(){r(t.getEl("inp").id,t.getEl("inp").value,e.filetype,window)}),t._super(e)}})}),r(_t,[mt],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(Dt,[mt],function(e){return e.extend({recalc:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=[],y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U=Math.max,z=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),s=e._paddingBox,o=e.settings,h=o.direction,u=o.align,a=o.pack,f=o.spacing||0,("row-reversed"==h||"column-reverse"==h)&&(r=r.set(r.toArray().reverse()),h=h.split("-")[0]),"column"==h?(C="y",T="h",N="minH",k="maxH",A="innerH",L="top",O="bottom",M="deltaH",_="contentH",F="left",H="w",D="x",P="innerW",B="minW",j="maxW",I="right",q="deltaW",R="contentW"):(C="x",T="w",N="minW",k="maxW",A="innerW",L="left",O="right",M="deltaW",_="contentW",F="top",H="h",D="y",P="innerH",B="minH",j="maxH",I="bottom",q="deltaH",R="contentH"),c=i[A]-s[L]-s[L],x=l=0,t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),v=p.settings,m=v.flex,c-=n-1>t?f:0,m>0&&(l+=m,d[k]&&g.push(p),d.flex=m),c-=d[N],y=s[F]+d[B]+s[I],y>x&&(x=y);if(E={},E[N]=0>c?i[N]-c+i[M]:i[A]-c+i[M],E[B]=x+i[q],E[_]=i[A]-c,E[R]=x,E.minW=z(E.minW,i.maxW),E.minH=z(E.minH,i.maxH),E.minW=U(E.minW,i.startMinWidth),E.minH=U(E.minH,i.startMinHeight),!i.autoResize||E.minW==i.minW&&E.minH==i.minH){for(w=c/l,t=0,n=g.length;n>t;t++)p=g[t],d=p.layoutRect(),b=d[k],y=d[N]+Math.ceil(d.flex*w),y>b?(c-=d[k]-d[N],l-=d.flex,d.flex=0,d.maxFlexSize=b):d.maxFlexSize=0;for(w=c/l,S=s[L],E={},0===l&&("end"==a?S=c+s[L]:"center"==a?(S=Math.round(i[A]/2-(i[A]-c)/2)+s[L],0>S&&(S=s[L])):"justify"==a&&(S=s[L],f=Math.floor(c/(r.length-1)))),E[D]=s[F],t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),y=d.maxFlexSize||d[N],"center"===u?E[D]=Math.round(i[P]/2-d[H]/2):"stretch"===u?(E[H]=U(d[B]||0,i[P]-s[F]-s[I]),E[D]=s[F]):"end"===u&&(E[D]=i[P]-d[H]-s.top),d.flex>0&&(y+=Math.ceil(d.flex*w)),E[T]=y,E[C]=S,p.layoutRect(E),p.recalc&&p.recalc(),S+=y+f}else if(E.w=E.minW,E.h=E.minH,e.layoutRect(E),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}})}),r(Pt,[vt],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),r(Ht,[z,U,Q,p,ut],function(e,n,r,i,s){function o(e){function n(e){return e.replace(/%(\w+)/g,"")}var r=s.activeEditor,i,o,u=r.dom,f="",l,c;return c=r.settings.preview_styles,c===!1?"":(c||(c="font-family font-size font-weight text-decoration text-transform color background-color border border-radius"),(e=r.formatter.get(e))?(e=e[0],i=e.block||e.inline||"span",o=u.create(i),a(e.styles,function(e,t){e=n(e),e&&u.setStyle(o,t,e)}),a(e.attributes,function(e,t){e=n(e),e&&u.setAttrib(o,t,e)}),a(e.classes,function(e){e=n(e),u.hasClass(o,e)||u.addClass(o,e)}),r.fire("PreviewFormats"),u.setStyles(o,{position:"absolute",left:-65535}),r.getBody().appendChild(o),l=u.getStyle(r.getBody(),"fontSize",!0),l=/px$/.test(l)?parseInt(l,10):0,a(c.split(" "),function(e){var t=u.getStyle(o,e,!0);if(!("background-color"==e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=u.getStyle(r.getBody(),e,!0),"#ffffff"==u.toHex(t).toLowerCase())||"color"==e&&"#000000"==u.toHex(t).toLowerCase())){if("font-size"==e&&/em|%$/.test(t)){if(0===l)return;t=parseFloat(t,10)/(/%$/.test(t)?100:1),t=t*l+"px"}"border"==e&&t&&(f+="padding:0 2px;"),f+=e+":"+t+";"}}),r.fire("AfterPreviewFormats"),u.remove(o),f):t)}function u(e){e=e.split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var a=i.each;n.translate=function(e){return s.translate(e)},s.on("AddEditor",function(t){function n(){function e(r){var i=[];if(r)return a(r,function(r){var s={text:{raw:r.title},icon:r.icon};if(r.items)s.menu=e(r.items);else{var u=r.format||"custom"+t++;r.format||(r.name=u,n.push(r)),s.textStyle=function(){return o(u)},s.onclick=function(){d(u)}}i.push(s)}),i}var t=0,n=[],r=[{title:"Headers",items:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];v.on("init",function(){a(n,function(e){v.formatter.register(e.name,e)})});var i=e(v.settings.style_formats||r);return i}function f(){return v.undoManager?v.undoManager.hasUndo():!1}function l(){return v.undoManager?v.undoManager.hasRedo():!1}function c(){var e=this;e.disabled(!f()),v.on("Undo Redo AddUndo",function(){e.disabled(!f())})}function h(){var e=this;e.disabled(!l()),v.on("Undo Redo AddUndo",function(){e.disabled(!l())})}function p(){var e=this;v.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(v.hasVisual)}function d(e){e.control&&(e=e.control.settings.format),e&&s.activeEditor.execCommand("mceToggleFormat",!1,e)}var v=t.editor,m;m=n(),a({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){v.addButton(t,{tooltip:e,onPostRender:function(){var e=this;v.formatter?v.formatter.formatChanged(t,function(t){e.active(t)}):v.on("init",function(){v.formatter.formatChanged(t,function(t){e.active(t)})})},onclick:function(){d(t)}})}),a({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(e,t){v.addButton(t,{tooltip:e[0],cmd:e[1]})}),a({blockquote:["Toggle blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bulleted list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(e,t){v.addButton(t,{tooltip:e[0],cmd:e[1],onPostRender:function(){var e=this;v.formatter?v.formatter.formatChanged(t,function(t){e.active(t)}):v.on("init",function(){v.formatter.formatChanged(t,function(t){e.active(t)})})}})}),v.addButton("undo",{tooltip:"Undo",onPostRender:c,cmd:"undo"}),v.addButton("redo",{tooltip:"Redo",onPostRender:h,cmd:"redo"}),v.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),v.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:c,cmd:"undo"}),v.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:h,cmd:"redo"}),v.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:p,cmd:"mceToggleVisualAid"}),a({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(e,t){v.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),v.on("mousedown",function(){r.hideAll()}),e.add("styleselect",function(t){var n=[].concat(m);return e.create("menubutton",i.extend({text:"Formats",menu:n},t))}),e.add("formatselect",function(t){var n=[],r=u("Paragraph=p;Address=address;Pre=pre;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6");return a(r,function(e){n.push({text:{raw:e[0]},format:e[1],textStyle:function(){return o(e[1])}})}),e.create("listbox",i.extend({text:{raw:r[0][0]},menu:n,onclick:d},t))}),e.add("fontselect",function(t){var n=[],r=u("Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return a(r,function(e){n.push({text:{raw:e[0]},format:e[1],style:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),e.create("listbox",i.extend({text:"Font Family",menu:n,onclick:function(e){e.control.settings.format&&s.activeEditor.execCommand("FontName",!1,e.control.settings.format)}},t))}),e.add("fontsizeselect",function(t){var n=[];return a("8pt 10pt 12pt 14pt 18pt 24pt 36pt".split(" "),function(e){n.push({text:e,format:e})}),e.create("listbox",i.extend({text:"Font Sizes",menu:n,onclick:function(e){e.control.settings.format&&s.activeEditor.execCommand("FontSize",!1,e.control.settings.format)}},t))}),v.addMenuItem("formats",{text:"Formats",menu:m})})}),r(Bt,[mt],function(e){return e.extend({recalc:function(e){var t=e.settings,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=[],N=[],C,k,L,A,O,M;for(t=e.settings,i=e.items().filter(":visible"),s=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,E=t.alignV||t.align,m=e._paddingBox,c=0;r>c;c++)T.push(0);for(h=0;n>h;h++)N.push(0);for(h=0;n>h;h++)for(c=0;r>c&&(l=i[h*r+c],l);c++)f=l.layoutRect(),C=f.minW,k=f.minH,T[c]=C>T[c]?C:T[c],N[h]=k>N[h]?k:N[h];for(O=s.innerW-m.left-m.right,S=0,c=0;r>c;c++)S+=T[c]+(c>0?y:0),O-=(c>0?y:0)+T[c];for(M=s.innerH-m.top-m.bottom,x=0,h=0;n>h;h++)x+=N[h]+(h>0?b:0),M-=(h>0?b:0)+N[h];if(S+=m.left+m.right,x+=m.top+m.bottom,a={},a.minW=S+(s.w-s.innerW),a.minH=x+(s.h-s.innerH),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH,a.minW=Math.min(a.minW,s.maxW),a.minH=Math.min(a.minH,s.maxH),a.minW=Math.max(a.minW,s.startMinWidth),a.minH=Math.max(a.minH,s.startMinHeight),!s.autoResize||a.minW==s.minW&&a.minH==s.minH){s.autoResize&&(a=e.layoutRect(a),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH);var _;_="start"==t.packV?0:M>0?Math.floor(M/n):0;var D=0,P=t.flexWidths;if(P)for(c=0;P.length>c;c++)D+=P[c];else D=r;var H=O/D;for(c=0;r>c;c++)T[c]+=P?Math.ceil(P[c]*H):H;for(d=m.top,h=0;n>h;h++){for(p=m.left,u=N[h]+_,c=0;r>c&&(l=i[h*r+c],l);c++)v=l.settings,f=l.layoutRect(),o=T[c],L=A=0,f.x=p,f.y=d,g=v.alignH||w,"center"==g?f.x=p+o/2-f.w/2:"right"==g?f.x=p+o-f.w:"stretch"==g&&(f.w=o),g=v.alignV||E,"center"==g?f.y=d+u/2-f.h/2:"bottom"==g?f.y=d+u-f.h:"stretch"==g&&(f.h=u),l.layoutRect(f),p+=o+y,l.recalc&&l.recalc();d+=u+b}}else if(a.w=a.minW,a.h=a.minH,e.layoutRect(a),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}})}),r(jt,[yt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e){return this.getEl().contentWindow.document.body.innerHTML=e,this}})}),r(Ft,[yt],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(e.getEl().offsetWidth>t.maxW&&(t.minW=t.maxW,e.addClass("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,e.getEl().offsetHeight)),t},disabled:function(e){var t=this,n;return e!==n&&(t.toggleClass("label-disabled",e),t._rendered&&(t.getEl()[0].className=t.classes())),t._super(e)},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&(t.getEl().innerHTML=t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t:"")+'">'+e.encode(e._text)+"</label>"}})}),r(It,[W,G],function(e,t){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e.keyNav=new t({root:e,enableLeftRight:!0}),e._super()}})}),r(qt,[It],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",defaults:{type:"menubutton"}}})}),r(Rt,[bt,z,qt],function(e,t,n){function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e=this,n=e.settings,r;e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control==e.menu&&e.activeMenu("show"==t.type)}).fire("show"),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),"bl-tl")},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1))},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon?r+"ico "+r+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button id="'+t+'-open" role="presentation" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+(e._text?(i?" ":"")+e.encode(e._text):"")+' <i class="'+r+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.keyboard&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n=t.control,r=e.parent(),s;n&&r&&n instanceof i&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(s=!0),e.hideMenu())}),s&&n.showMenu())}),e._super()},text:function(e){var t=this,n,r;if(t._rendered)for(r=t.getEl("open").childNodes,n=0;r.length>n;n++)3==r[n].nodeType&&(r[n].data=t.encode(e));return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(Ut,[Rt],function(e){return e.extend({init:function(e){var t=this,n,r,i,s,o;if(t._values=n=e.values,n){for(r=0;n.length>r;r++)i=n[r].selected||e.value===n[r].value,i&&(s=s||n[r].text,t._value=n[r].value);e.menu=n}e.text=e.text||s||n[0].text,t._super(e),t.addClass("listbox"),t.on("select",function(n){var r=n.control;o&&(n.lastControl=o),e.multiple?r.active(!r.active()):t.value(n.control.settings.value),o=r})},value:function(e){function n(e,t){e.items().each(function(e){i=e.value()===t,i&&(s=s||e.text()),e.active(i),e.menu&&n(e.menu,t)})}var r=this,i,s,o,u;if(e!==t){if(r.menu)n(r.menu,e);else for(o=r.settings.menu,u=0;o.length>u;u++)i=o[u].value==e,i&&(s=s||o[u].text),o[u].active=i;r.text(s)}return r._super(e)}})}),r(zt,[yt,z],function(e,t){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t.canFocus=!1,t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.aria("checked",!0),t.addClass("menu-item-checkbox"),e.icon="selected"),t.on("mousedown",function(e){e.preventDefault()}),t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.keyboard&&setTimeout(function(){t.menu.items()[0].focus()},0)):(t.parent().hideAll(),t.fire("cancel"),t.fire("select")))}),e.menu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,r;e.parent().items().each(function(t){t!==e&&t.hideMenu()}),n.menu&&(e.menu?e.menu.show():(r=n.menu,r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.menu.reflow(),e.menu.fire("show"),e.menu.on("cancel",function(){e.focus()}),e.menu.on("hide",function(t){t.control===e.menu&&e.removeClass("selected")})),e.menu._parentMenu=e.parent(),e.menu.addClass("menu-sub"),e.menu.moveRel(e.getEl(),"tr-tl"),e.addClass("selected"),e.aria("expanded",!0))},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=e.encode(e._text),s=e.settings.icon;return s&&e.parent().addClass("menu-has-icons"),s=r+"ico "+r+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==i?'<i class="'+s+'"></i>&nbsp;':"")+("-"!==i?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(n.shortcut?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+n.shortcut+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n()),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(Wt,[Q,G,zt],function(e,n,r){var i=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"menu"},init:function(e){var t=this;e.autohide=!0,t._super(e),t.addClass("menu"),t.keyNav=new n({root:t,enableUpDown:!0,enableLeftRight:!0,leftAction:function(){t.parent()instanceof r&&t.keyNav.cancel()},onCancel:function(){t.fire("cancel",{},!1),t.hide()}})},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("cancel"),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(n){var r=n.settings;return r.icon||r.selectable?(e._hasIcons=!0,!1):t}),e._super()}});return i}),r(Xt,[yt],function(e){return e.extend({Defaults:{classes:"radio",checked:!1},init:function(e){var t=this;t._super(e),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked()||(t.parent().items().filter("radio:checked").exec("checked",!1),t.checked(!0))}),t.checked(e.checked)},checked:function(e){var n=this;return e!==t?(e?n.addClass("checked"):n.removeClass("checked"),n._checked=e,n):n._checked},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" role="radio" unselectable="on">'+'<i class="'+n+"ico "+n+'radio"></i>'+e._text+"</div>"}})}),r(Vt,[W],function(e){return e.extend({})}),r($t,[yt,X,R],function(e,t,n){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),e.settings.both&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){function e(e){return{width:e.clientWidth,height:e.clientHeight}}function r(t,r){var s,u,a,f,l=o.settings;s=o.getContainer(),u=o.getContentAreaContainer().firstChild,a=e(s),f=e(u),t=Math.max(l.min_width||100,t),r=Math.max(l.min_height||100,r),t=Math.min(l.max_width||65535,t),r=Math.min(l.max_height||65535,r),i.settings.both&&n.css(s,"width",t+(a.width-f.width)),n.css(s,"height",r+(a.height-f.height)),i.settings.both&&n.css(u,"width",t),n.css(u,"height",r),o.fire("ResizeEditor")}var i=this,s,o=i.settings.editor;i._super(),i.resizeDragHelper=new t(this._id,{start:function(){s=e(o.getContentAreaContainer().firstChild)},drag:function(e){r(s.width+e.deltaX,s.height+e.deltaY)},end:function(){}})}})}),r(Jt,[yt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),r(Kt,[Rt,g],function(e,t){var n=t.DOM;return e.extend({Defaults:{classes:"widget btn splitbtn",role:"splitbutton"},repaint:function(){var e=this,t=e.getEl(),r=e.layoutRect(),i,s,o;return e._super(),i=t.firstChild,s=t.lastChild,n.css(i,{width:r.w-s.offsetWidth,height:r.h-2}),n.css(s,{height:r.h-2}),o=i.firstChild.style,o.width=o.height="100%",o=s.firstChild.style,o.width=o.height="100%",e},activeMenu:function(e){var t=this;n.toggleClass(t.getEl().lastChild,t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'">'+'<button hidefocus tabindex="-1">'+(r?'<i class="'+r+'"></i>':"")+(e._text?(r?" ":"")+e._text:"")+"</button>"+'<button class="'+n+'open" hidefocus tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){e.control!=this||n.getParent(e.target,"."+this.classPrefix+"open")||(e.stopImmediatePropagation(),t.call(this,e))}),delete e.settings.onclick,e._super()}})}),r(Qt,[Pt],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),r(Gt,[$,R],function(e,t){"use stict";return e.extend({lastIdx:0,Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){this.activeTabId&&t.removeClass(this.getEl(this.activeTabId),this.classPrefix+"active"),this.activeTabId="t"+e,t.addClass(this.getEl("t"+e),this.classPrefix+"active"),e!=this.lastIdx&&(this.items()[this.lastIdx].hide(),this.lastIdx=e),this.items()[e].show().fire("showtab"),this.reflow()},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){n+='<div id="'+e._id+"-t"+i+'" class="'+r+'tab" unselectable="on">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+'<div id="'+e._id+'-head" class="'+r+'tabs">'+n+"</div>"+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=
t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e=this,t,n,r;n=r=0,e.items().each(function(t,i){n=Math.max(n,t.layoutRect().minW),r=Math.max(r,t.layoutRect().minH),e.settings.activeTab!=i&&t.hide()}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=r,e.layoutRect({x:0,y:0,w:n,h:r})});var i=e.getEl("head").offsetHeight;return e.settings.minWidth=n,e.settings.minHeight=r+i,t=e._super(),t.deltaH+=e.getEl("head").offsetHeight,t.innerH=t.h-t.deltaH,t}})}),r(Yt,[yt,R],function(e,n){return e.extend({init:function(e){var n=this;n._super(e),n._value=e.value||"",n.addClass("textbox"),e.multiline?n.addClass("multiline"):n.on("keydown",function(e){13==e.keyCode&&n.parents().reverse().each(function(n){return e.preventDefault(),n.submit?(n.submit(),!1):t})})},value:function(e){var n=this;return e!==t?(n._value=e,n._rendered&&(n.getEl().value=e),n):n._rendered?n.getEl().value:n._value},repaint:function(){var e=this,t,n,r,i=0,s=0,o;return t=e.getEl().style,n=e._layoutRect,o=e._lastRepaintRect||{},r=e._borderBox,i=r.left+r.right+8,s=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==o.x&&(t.left=n.x+"px",o.x=n.x),n.y!==o.y&&(t.top=n.y+"px",o.y=n.y),n.w!==o.w&&(t.width=n.w-i+"px",o.w=n.w),n.h!==o.h&&(t.height=n.h-s+"px",o.h=n.h),e._lastRepaintRect=o,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="true"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="true"'+i+">"},postRender:function(){var e=this;return n.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()}})}),r(Zt,[R],function(e){return function(t){var n=this,r;n.show=function(i){return n.hide(),r=!0,window.setTimeout(function(){r&&t.appendChild(e.createFragment('<div class="mce-throbber"></div>'))},i||0),n},n.hide=function(){var e=t.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),r=!1,n}}}),o([a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt])})(this);