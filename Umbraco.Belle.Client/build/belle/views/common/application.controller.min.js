//Handles the section area of the app
angular.module("umbraco").controller("NavigationController",function(e,t,n,r,i,s,o){function u(t){e.currentSection=t;e.tree=n.getTree(e.currentSection)}function a(t){switch(t){case"tree":e.ui.showNavigation=!0;e.ui.showContextMenu=!1;e.ui.showContextMenuDialog=!1;e.ui.stickyNavigation=!1;break;case"menu":e.ui.showNavigation=!0;e.ui.showContextMenu=!0;e.ui.showContextMenuDialog=!1;e.ui.stickyNavigation=!0;break;case"dialog":e.ui.stickyNavigation=!0;e.ui.showNavigation=!0;e.ui.showContextMenu=!1;e.ui.showContextMenuDialog=!0;break;case"search":e.ui.stickyNavigation=!1;e.ui.showNavigation=!0;e.ui.showContextMenu=!1;e.ui.showSearchResults=!0;e.ui.showContextMenuDialog=!1;break;default:e.ui.showNavigation=!1;e.ui.showContextMenu=!1;e.ui.showContextMenuDialog=!1;e.ui.showSearchResults=!1;e.ui.stickyNavigation=!1}}u(s.section);e.currentSection=s.section;e.selectedId=s.id;e.sections=r.all();e.ui.mode=a;e.ui.mode("default");e.openSection=function(t){e.ui.mode("default");$("#search-form input").focus();r.setCurrent(t.alias);e.currentSection=t.alias;e.showSectionTree(t)};e.showSectionTree=function(t){if(!e.ui.stickyNavigation){$("#search-form input").focus();u(t.alias);e.ui.mode("tree")}};e.hideSectionTree=function(){e.ui.stickyNavigation||e.ui.mode("default")};e.showContextMenu=function(t,r){if(r!=undefined&&t.defaultAction&&!r.altKey){var i={alias:t.defaultAction,name:t.defaultAction};e.showContextDialog(t,i)}else{e.contextMenu=n.getActions(t,e.section);e.currentNode=t;e.menuTitle=t.name;e.selectedId=t.id;e.ui.mode("menu")}};e.hideContextMenu=function(){e.selectedId=s.id;e.contextMenu=[];e.ui.mode("tree")};e.showContextDialog=function(t,n){e.ui.mode("dialog");e.currentNode=t;e.dialogTitle=n.name;var r="views/"+e.currentSection+"/"+n.alias+".html",i=o.append({container:$("#dialog div.umb-panel-body"),scope:e,template:r})};e.hideContextDialog=function(){e.showContextMenu(e.currentNode,undefined)};e.hideNavigation=function(){e.ui.mode("default")};e.setTreePadding=function(e){return{"padding-left":e.level*20+"px"}};e.getTreeChildren=function(t){if(t.expanded){t.expanded=!1;t.children=[]}else{t.children=n.getChildren(t,e.currentSection);t.expanded=!0}}});angular.module("umbraco").controller("SearchController",function(e,t,n){var r="";e.deActivateSearch=function(){r=""};e.performSearch=function(n){if(n!=undefined&&n!=r)if(n.length>3){e.ui.selectedSearchResult=-1;e.ui.mode("search");r=n;e.ui.searchResults=t.search(n,e.currentSection)}else e.ui.searchResults=[]};e.hideSearch=function(){e.ui.mode("default")};e.iterateResults=function(t){t=="up"&&e.ui.selectedSearchResult<e.ui.searchResults.length?e.ui.selectedSearchResult++:e.ui.selectedSearchResult>0&&e.ui.selectedSearchResult--};e.selectResult=function(){e.showContextMenu(e.ui.searchResults[e.ui.selectedSearchResult],undefined)}});angular.module("umbraco").controller("DashboardController",function(e,t){e.name=t.section});angular.module("umbraco").controller("MainController",function(e,t,n,r){var i=new Date,s=new Array("Super Sunday","Manic Monday","Tremendous Tuesday","Wonderfull Wednesday","Thunder Thursday","Friendly Friday","Shiny Saturday");e.today=s[i.getDay()];e.ui={showTree:!1,showSearchResults:!1,mode:undefined};e.signin=function(){e.authenticated=user.authenticate(e.login,e.password);e.authenticated&&(e.user=user.getCurrentUser())};e.signout=function(){user.signout();e.authenticated=!1};e.notifications=t.current;e.$watch("notifications.current",function(t,n,r){t&&(e.notifications=t)});e.authenticated=r.authenticated;e.$watch("userFactory.authenticated",function(t,n,r){t&&(e.authenticated=t)});e.removeNotification=function(e){t.remove(e)};e.closeDialogs=function(t){$(t.target).parents(".umb-modalcolumn").size()==0&&e.ui.mode("default")};e.authenticated?e.user=r.getCurrentUser():e.$on("$viewContentLoaded",function(){e.signin()})});